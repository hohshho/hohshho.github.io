{"componentChunkName":"component---src-templates-post-tsx","path":"/next/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"fa8f6f89-e1cb-52b1-8044-a7bf037cb3a4","html":"<p>회사 프로젝트에 필요해져서 강의듣고 빠르게 정리!</p>\n<p>정리해보자</p>\n<hr>\n<h1 id=\"1-nextjs-소개\" style=\"position:relative;\"><a href=\"#1-nextjs-%EC%86%8C%EA%B0%9C\" aria-label=\"1 nextjs 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Next.js 소개</h1>\n<p>Next.js는 React.js보다 더 강력하고 편하게 사용할 수 있는 기능들을 제공</p>\n<ul>\n<li>페이지 라우팅</li>\n<li>빌트인 최적화 기능</li>\n<li>다이나믹 HTML 스트리밍</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>비교 기준</th>\n<th>프레임워크</th>\n<th>라이브러리</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>기능 구현의 주도권</td>\n<td>개발자에게 없다</td>\n<td>개발자에게 있다</td>\n</tr>\n<tr>\n<td>기능 제공</td>\n<td>거의 모든 기능을 제공</td>\n<td>기본기능 외 제공 X</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"사전-렌더링-이해\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%A0%84-%EB%A0%8C%EB%8D%94%EB%A7%81-%EC%9D%B4%ED%95%B4\" aria-label=\"사전 렌더링 이해 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사전 렌더링 이해</h4>\n<ul>\n<li>\n<p>브라우저의 요청에 사전에 렌더링이 완료된 HTML을 응답하는 렌더링 방식</p>\n</li>\n<li>\n<p>Client Side Rendering의 단점을 효율적으로 해결하는 기술</p>\n<ul>\n<li>클라이언트(브라우저)에서 직접 화면을 렌더링 하는 방식\n<ul>\n<li>\n<ol>\n<li>접속 요청</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>index.html(빈 껍데기)</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>빈화면 렌더링</li>\n</ol>\n</li>\n<li>\n<ol start=\"4\">\n<li>JS Bundle 리턴</li>\n</ol>\n</li>\n<li>\n<ol start=\"5\">\n<li>JS실행</li>\n</ol>\n</li>\n<li>\n<ol start=\"6\">\n<li>컨텐츠 렌더링</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9489d518e964aa30647270cfcf673577/58c38/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.37423312883436%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB6ElEQVR42mVSy5LTMBCUn5Jsy5L8iO28SHa3NktCEQ7cqVpuHCi+nuLAvzQzyjohcJiSSx71dPe0cM6h67pQ4zhiGAakaYo4jpEkCZ0RouhSfBcn8eX8p+YewQDL5fIOkIEiBooFsixFWRaoqgpS5vRY3A0RQoS6DI8hpJSw1obLueHGLkZpaux2O+z3e1jfEMP0P3b8Zr1eo2kaiKIo0Pf9G2AcpgcG1JhJjVQqlLWDsS3SXCFTZRiWJHEoVsJvT6cTNpsNfwswS5bEZUyFuq7pNHBNB+c9Di9HfPh4hicGxjXQREJrBaUkikKTJSV961nhTf/fS0hzCW08St+hJpC2W8D1E9phTfI2WK1W2G63wS4mlOfZDZAvmBHLn6YJ5/MnHN4fYZ2H7wboqibZHpVt4NsFebrHw9Nz8JYBlVIB8M1PcWewJhm2NsTKB78K8k6XZIf1gaHxPYZxwgsN5FRI8piJ5Hke4iYiQUvgmESXbSnT0MMlRWnCu4dHLKY1DHmpjYMsa8jKIScQRaqyLAuLmbN5lXwLpkCuK5QkrW0b9MMYFuT6EYok8/9UFdSfXFIhomts2LYvX18hPh9esRmer9taTiNOx2PwhzNomwUqY5HRkjIaxjGao8UVZBLgj+/f8PP3L/wBlUj7ijtvL7IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/9489d518e964aa30647270cfcf673577/a81b5/1.webp 163w,\n/static/9489d518e964aa30647270cfcf673577/da3ef/1.webp 325w,\n/static/9489d518e964aa30647270cfcf673577/309d5/1.webp 650w,\n/static/9489d518e964aa30647270cfcf673577/78344/1.webp 975w,\n/static/9489d518e964aa30647270cfcf673577/bd21a/1.webp 1260w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/9489d518e964aa30647270cfcf673577/5e043/1.png 163w,\n/static/9489d518e964aa30647270cfcf673577/e5cc6/1.png 325w,\n/static/9489d518e964aa30647270cfcf673577/663f3/1.png 650w,\n/static/9489d518e964aa30647270cfcf673577/d880f/1.png 975w,\n/static/9489d518e964aa30647270cfcf673577/58c38/1.png 1260w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/9489d518e964aa30647270cfcf673577/663f3/1.png\"\n            alt=\"1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>장점 : 페이지 이동이 매우 빠르고 쾌적</li>\n<li>단점 : 초기 접속 속도(FCP)가 느리다 - FCP(First Contentful Paint) : 요청 시작 시점으로부터 컨텐츠가 화면에 처음 나타나는데 걸리는 시간 - index.html, JS Bundle을 받아와야 하고, 실행까지 해줘야 함\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/445860049461b7fc22151b091f15980b/64756/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.306748466257666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABl0lEQVR42k1Sy3LCMAx07LwTAgl5FIbw6kBgyAyXHvg0ZvohPffan9x6lYT2sFFsSauVZGWMwXw+h1IKjuPAURbagdZarOd5WK1W2O/3qKoKjNfit3GOlhzmuq6LoiigmNA0zcshxPqPlOcwDBHHsZArNZGN0EMeiz0eDygyz2Yz+L4vCYTve3ImgiCQgrvdDnmej/7B5/mMd0U1Cy6XBckHubxIksRitGmCmP/WrtdrHA4Hm7BEmqbip4gsm8mZIyvLUoiFcGpNOSPGu0khVbEowTv6SXK5dLjdblKQccLjGhts3HEpylbR0nIQ+IiiYXYkybIMi8VCLNWcTid0XYfNZiPk08LUpf3A7q1DGAWSXNc17vc7+r6XrUVRJCRcDP+phLM8n88Ckk8zFUKjDTyXLZlXawxq21ZaqapSCEiU2nkmtigVbbdbHI9H8VEIIS+Fn9cMx7bzfCHBBBdBpcYW4nynp+L8ezpqfHLPzyfUsemxqd/tRiPZWFlWuF6vMiPOjBulIqpnSwP0AHewJCusiJ/vL/wCyUPkiP3KnqcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/445860049461b7fc22151b091f15980b/a81b5/2.webp 163w,\n/static/445860049461b7fc22151b091f15980b/da3ef/2.webp 325w,\n/static/445860049461b7fc22151b091f15980b/309d5/2.webp 650w,\n/static/445860049461b7fc22151b091f15980b/78344/2.webp 975w,\n/static/445860049461b7fc22151b091f15980b/cbd37/2.webp 1200w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/445860049461b7fc22151b091f15980b/5e043/2.png 163w,\n/static/445860049461b7fc22151b091f15980b/e5cc6/2.png 325w,\n/static/445860049461b7fc22151b091f15980b/663f3/2.png 650w,\n/static/445860049461b7fc22151b091f15980b/d880f/2.png 975w,\n/static/445860049461b7fc22151b091f15980b/64756/2.png 1200w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/445860049461b7fc22151b091f15980b/663f3/2.png\"\n            alt=\"2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></li>\n<li>JS 실행 (렌더링) : 자바스크립트 코드(React 컴포넌트)를 HTML로 변환하는 과정</li>\n<li>화면에 렌더링 : HTML코드를 브라우저가 화면에 그려내는 작업</li>\n<li>수화(Hydration) : HTML과 Javascript를 연결하는 과정\n<ul>\n<li>TTI (Time To Interactive)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>페이지 이동의 경우엔 클라이언트 렌더링 방식으로 처리\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2eec9ae2bc1b67d92cd90df8b3bef663/08158/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.987730061349694%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKElEQVR42mWSSXPaQBBGh00I7SCbZWRkySAhDNjaAQMVx1WupJIc8ltzSf7dl56RHR9yeNU9Sz+1pGaWZUHXNTDG0GoxGSWtj7Vh6rBsC51uR+7/Q9a0ZHQcB0VZgPl8AW9yC1MbwtJHsK0Rrt0x3OEVbHNIuBjZtHbGdD6EMbDprg1DdWD0HRk1xcKVPcE63oE93f9AtvyENLogXRDrPU71Z+S7PbaLPfL4EzI62wQ1diHtBQdswgqbRYHtssS9yG+PuPf3iGYZWMwLJDclYl5i5VVY3RTYxRXq7EzSA9KEiM7Y3R2Qry4kP5OoQv74hLp8JnGJdHnG4+JE0hpsPd+TRAgLEpZIfBKuCmSbAx6SCrtlLUVrv0LsZURODdD59ivSh+9Yz0tEPG/qycMum5+ok1cUq2dJvj3icnhBlZ6Qrk44bF9Rb16og6YLQbq84Jx9w/HxCz3smTqjz+AfJczRrzEyJxiaY8mIPq5LTFwPfOzLH+baU8qbeO1wOMYY5mBIjGANXNjkEB5RT3+8hV6vC3WgQOn3wL0Z4jjC3SKkUTGh6aqMhqEjCH3M+FTCPY6buSfvi3VP6TXj1m630e12JZ1OB6ZpIlpGEn9OgtlU7ilU0O+rFPuE8hbfc0XWChcTgymTt4FWVRVhGFCHd/BvfUynH0Jx939ouNvNcIdUw0Si6zq9kgFN08A5R5IkCIJAisSeOBNvIB7cQE10GoTsvaHff37hL/LsHmJjswZVAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2eec9ae2bc1b67d92cd90df8b3bef663/a81b5/3.webp 163w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/da3ef/3.webp 325w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/309d5/3.webp 650w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/78344/3.webp 975w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/632a5/3.webp 1195w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2eec9ae2bc1b67d92cd90df8b3bef663/5e043/3.png 163w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/e5cc6/3.png 325w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/663f3/3.png 650w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/d880f/3.png 975w,\n/static/2eec9ae2bc1b67d92cd90df8b3bef663/08158/3.png 1195w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2eec9ae2bc1b67d92cd90df8b3bef663/663f3/3.png\"\n            alt=\"3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n</li>\n</ul>\n<p>Next.js가 사전 렌더링으로 인해 얻는 장점</p>\n<ul>\n<li>React App의 단점 해소\n<ul>\n<li>빠른 FCP 달성</li>\n</ul>\n</li>\n<li>React App의 장점 승계\n<ul>\n<li>빠른 페이지 이동</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>수강을 위한 백엔드 서버 설정</p>\n<ol>\n<li>github에서 <a href=\"https://github.com/winterlood/onebite-books-server\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">소스 다운로드</a></li>\n<li>supabase 로그인</li>\n<li>.env 생성 후 설정</li>\n<li>npm install</li>\n<li>npx prisma db push</li>\n<li>npm run seed</li>\n<li>npm run build</li>\n<li>npm run start</li>\n</ol>\n<p>npx prisma studio<br>\n-> 편하게 볼 수 있다.</p>\n<h1 id=\"2-page-router-핵심-정리\" style=\"position:relative;\"><a href=\"#2-page-router-%ED%95%B5%EC%8B%AC-%EC%A0%95%EB%A6%AC\" aria-label=\"2 page router 핵심 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Page Router 핵심 정리</h1>\n<h4 id=\"21-page-router-소개\" style=\"position:relative;\"><a href=\"#21-page-router-%EC%86%8C%EA%B0%9C\" aria-label=\"21 page router 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1) Page Router 소개</h4>\n<ul>\n<li>현재 많은 기업에서 사용되고 있는 안정적인 라우터</li>\n<li>React Router처럼 페이지 라우팅 기능을 제공</li>\n</ul>\n<p>특징</p>\n<ul>\n<li>Pages의 폴더 경로와 파일 이름에 따라 라우팅</li>\n<li>동적 경로는 <code>[]</code>안에 넣어준다.</li>\n</ul>\n<p>프로젝트 생성</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"17328551497951494000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`npx create-next-app@14 section02\r\n\r\nnpm run dev`, `17328551497951494000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">npx create-next-app@14 section02</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">npm run dev</span></span></span></code></pre>\n<p>폴더 구조</p>\n<ul>\n<li>node_mudule : 의존성을 보관</li>\n<li>package.json : 패키지 내용 저장\n<ul>\n<li>pages\n<ul>\n<li>_app.tsx</li>\n<li>_document.tsx:\n<ul>\n<li>위 두개의 파일은 next앱의 모든 페이지에 공통적으로 적용 될 로직이나 레이아웃, 데이터를 다루기 위해 필요한 파일</li>\n<li>메타 태그를 설정하거나, 서드파티 스크립트를 넣다던가 등등 페이지 전체에 적용</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>next.config.mjs\n<ul>\n<li>next app의 설정을 관리하는 파일</li>\n</ul>\n</li>\n</ul>\n<p>_app.tsx</p>\n<ul>\n<li>모든 Page 컴포넌트의 부모 컴포넌트 역할 (root 컴포넌트)</li>\n<li>인자값\n<ul>\n<li>Component : 현재 페이지 역할을 할 컴포넌트를 받는다.</li>\n<li>pageProps : 페이지 역할을 할 컴포넌트에 전달될 props</li>\n</ul>\n</li>\n</ul>\n<p>결론적으로 next에서는 어떤 페이지를 렌더링 하던간에 App Component아래 Page역할을 하는 컴포넌트가 렌더링 된다.</p>\n<p>_document.tsx</p>\n<ul>\n<li>모든 페이지에 공통적으로 적용이 되야 하는 next app의 html코드를 설정하는 컴포넌트</li>\n</ul>\n<hr>\n<h4 id=\"22-페이지-라우팅-설정하기\" style=\"position:relative;\"><a href=\"#22-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"22 페이지 라우팅 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2) 페이지 라우팅 설정하기</h4>\n<ul>\n<li>QueryString\n<ul>\n<li>사용하기 위해선 <code>useRouter</code>라는 훅을 next에서 가져와서 사용하면 된다.\n<ul>\n<li>이름 그대로 Router라는 객체를 컴포넌트에서 사용할 수 있도록 반환하는 함수</li>\n<li><code>back()</code> 이나 <code>push()</code>처럼 페이지 이동 함수도 내장되어 있다.</li>\n<li>query 프로퍼티 안에 객체 형태로 값이 저장되어 있다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"20722046904086098000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import { useRouter } from 'next/router'\r\n\r\nexport default function Page() {\r\n  const router = useRouter()\r\n\r\n  // const q = router.query.q;\r\n  const { q } = router.query\r\n\r\n  return <h1>Search {q}</h1>\r\n}`, `20722046904086098000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useRouter</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/router&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// const q = router.query.q;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk12\">query</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">h1</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">Search</span><span class=\"mtk1\"> {</span><span class=\"mtk12\">q</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>url parameter\n<ul>\n<li>queryString과 동일하게 <code>useRouter()</code>을 사용하고 router객체에 <code>id</code>라는 프로퍼티로 저장된다.</li>\n<li>여러개의 url parameter를 주고 싶을 경우 ex - book/1234/234/243/234\n<ul>\n<li><code>[...id].tsx</code>로 만들어준다. (Catch All Segment라 부른다.)</li>\n<li>여러개의 id는 배열 형태로 저장된다.</li>\n<li>파라미터가 없는 경우는 대응이 안되는데 해결책은 2가지\n<ul>\n<li>index.tsx생성</li>\n<li><code>[[...id]].tsx</code> 대괄호를 2번 사용한다. (Optional Catch All Segment라 부른다.)</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"37769919348828470000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import { useRouter } from 'next/router'\r\n\r\nexport default function Page() {\r\n  const router = useRouter()\r\n\r\n  const { id } = router.query\r\n\r\n  return <h1>Book</h1>\r\n}`, `37769919348828470000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useRouter</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/router&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> } = </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk12\">query</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">h1</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">Book</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>404Page\n<ul>\n<li>page아래 만들면 된다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"23-네비-게이팅\" style=\"position:relative;\"><a href=\"#23-%EB%84%A4%EB%B9%84-%EA%B2%8C%EC%9D%B4%ED%8C%85\" aria-label=\"23 네비 게이팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3) 네비 게이팅</h4>\n<ul>\n<li>&#x3C;a>링크는 페이지를 새로 로드해 이동하는 방법 react에서는 <code>&#x3C;Link></code>컴포넌트를 이용하는 방식이 좋다.</li>\n<li>csr로 이동시키기 위해서는 <code>useRouter</code>의 push를 이용한다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"3132133079637422600\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import { useRouter } from &quot;next/router&quot;;\r\n\r\nexport default function App({ Component, pageProps }: AppProps) {\r\n  const router = useRouter();\r\n\r\n  const onClickButton = () => {\r\n    router.push('/test');\r\n  };\r\n  ...\r\n}`, `3132133079637422600`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useRouter</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;next/router&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">App</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">, </span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\"> }: </span><span class=\"mtk10\">AppProps</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onClickButton</span><span class=\"mtk1\"> = () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">push</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/test&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"24-프리페칭\" style=\"position:relative;\"><a href=\"#24-%ED%94%84%EB%A6%AC%ED%8E%98%EC%B9%AD\" aria-label=\"24 프리페칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4) 프리페칭</h4>\n<blockquote>\n<p>페이지를 사전에 미리 불러온다.</p>\n</blockquote>\n<ul>\n<li>현재 사용자가 보고있는 페이지에서 이동 가능성이 있는 페이지를 모두 미리 불러온다.</li>\n<li>\n<Link>컴포넌트로 명시된 경로가 아니라면 프리페칭이 이루어지지 않는다. \r\n- 사용하면 자동으로 프리페칭 이루어진다.\n</li>\n<li><code>useRouter</code>의 <code>perfetch()</code>명시적으로 작성해주면 prefetch가 이루어 진다.</li>\n<li>\n<Link>컴포넌트를 prefetch하기 싫으면 인자값으로 `prefetch={false}`를 넘겨주면 된다.\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4bcdf2f35f7fdad2f3d813b88d6b5076/047c3/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.282208588957054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACVklEQVR42mWTyXKbQBCGB4bVaHHJWg0IBYFYZGsxQoDkeMshVbmlyq+SW3LIA+Qh8mw5Ju/wpxktcVUOf/3NdPc3PTCwZqsJWZbBGDtLkhitSWDkqqaiRTWGoUOS2Vl1TtQfPYpm6HavwOyRC10zoXANqqJTbMA0TOGaosHQL9BuXaJptaCrBnSq0ThJprxcx4boTeM5RgMbrEw+4nZaYRncYxEW2GZ7lPl73MY5Fv4O69k9bv0S0ThD7GWIaD2eF4iTAlFaIPRzRE6O6XCFYLQCS8cFDiox98j9DVZUuEy2uJltsL15FsDEL5AEBaZ7Ar3cI3yoED7vMF3kSCcViTYhMIvsDcLRHWbXNAHF8WSJfFmhyh4IeIdN+oAFnSCyMyTuhryuXZ8V03rdGzmUczKwKv2Eu9kjsugF62iPXf6I3fYJq6SktScU8w/idcy9Uuim9vpENM3c3VJcInUr8kqckrndEKPOBNdXPq67E9hDD86QnvsePb+DTap91CN1D3KcEGMvhm2HGFLP8IpEjP7lmL66JP13XQ76d5VkLkM2OGRNBjdVNBcO+vsI7fUY8oUKSaF6VYZgqaqKhtWAZVl0j7pI4hgxyXVdaJqGTqcD68ISxfUmnFS7JB283vyUE0Auc3BOUjgURaHjOEiSBNNgSlAHvV4Puq4fpuQnyBvYEVQz/CAAe3u0OjEYDBAQzPPGFPfFhKZpHgH8DDqpHqLu/fz6il9/foMZ9Fc0W200Gg3R7Ps+AQMxmUGgVrtNv50hGg/iRyliKk3TBfDL12/4+eM7/gK9VDVLaBsDkQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4bcdf2f35f7fdad2f3d813b88d6b5076/a81b5/4.webp 163w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/da3ef/4.webp 325w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/309d5/4.webp 650w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/78344/4.webp 975w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/a5bb4/4.webp 1208w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4bcdf2f35f7fdad2f3d813b88d6b5076/5e043/4.png 163w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/e5cc6/4.png 325w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/663f3/4.png 650w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/d880f/4.png 975w,\n/static/4bcdf2f35f7fdad2f3d813b88d6b5076/047c3/4.png 1208w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4bcdf2f35f7fdad2f3d813b88d6b5076/663f3/4.png\"\n            alt=\"4\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"59142065040063520000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export default function App({ Component, pageProps }: AppProps) {\r\n  const router = useRouter();\r\n\r\n  const onClickButton = () => {\r\n    router.push('/test');\r\n  };\r\n\r\n  useEffect(() => {\r\n    router.prefetch('/test');\r\n  }, [])\r\n  ...\r\n}`, `59142065040063520000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">App</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">, </span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\"> }: </span><span class=\"mtk10\">AppProps</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onClickButton</span><span class=\"mtk1\"> = () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">push</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/test&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">prefetch</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/test&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"25-api-routes\" style=\"position:relative;\"><a href=\"#25-api-routes\" aria-label=\"25 api routes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.5) API Routes</h4>\n<blockquote>\n<p>Next.js에서 API를 구축할 수 있게 해주는 기능</p>\n</blockquote>\n<ul>\n<li>/pages/api에 있는 경우 api응답을 정의하는 파일로서 자동으로 설정</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"41583287207994050000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import type { NextApiRequest, NextApiResponse } from 'next'\r\n\r\nexport default function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  const date = new Date()\r\n  res.json({ time: date.toLocaleString() })\r\n}`, `41583287207994050000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk12\">NextApiResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">handler</span><span class=\"mtk1\">(</span><span class=\"mtk12\">req</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk12\">res</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextApiResponse</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">date</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Date</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk11\">json</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">time:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">date</span><span class=\"mtk1\">.</span><span class=\"mtk11\">toLocaleString</span><span class=\"mtk1\">() })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"26-스타일링\" style=\"position:relative;\"><a href=\"#26-%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81\" aria-label=\"26 스타일링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.6) 스타일링</h4>\n<ul>\n<li>React Component Styling하는 과정과 동일\n<ul>\n<li>인라인 방법</li>\n<li>css파일을 만들어 분리해주는 방법\n<ul>\n<li>글로벌 css는 App Component외에서는 css파일을 불러오는 방식을 지원하지 않는다.</li>\n</ul>\n</li>\n<li>CSS Moudule 활용\n<ul>\n<li>활용하는 이유\n<ul>\n<li>Next.js에서는 page별로 css가 겹치는 문제를 원천차단하기 위해서</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"35289140384017360000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import style from './index.module.css'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <h1 className={style.h1}>인덱스</h1>\r\n      <h2 className={style.h2}>H2</h2>\r\n    </>\r\n  )\r\n}\r\n\r\nimport GlobalLayout from '@/components/global-layout'\r\nimport '@/styles/globals.css'\r\nimport type { AppProps } from 'next/app'\r\n\r\nexport default function App({ Component, pageProps }: AppProps) {\r\n  return (\r\n    <GlobalLayout>\r\n      <Component {...pageProps} />\r\n    </GlobalLayout>\r\n  )\r\n}`, `35289140384017360000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./index.module.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">h1</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">인덱스</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">h2</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">h2</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">H2</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h2</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">GlobalLayout</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/components/global-layout&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/styles/globals.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">AppProps</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/app&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">App</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">, </span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\"> }: </span><span class=\"mtk10\">AppProps</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">GlobalLayout</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">Component</span><span class=\"mtk1\"> {...</span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">GlobalLayout</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>여기서 @는 Next.js + TypeScript 프로젝트에서 자주 쓰는 **커스텀 경로 별칭(alias)**이다.</p>\n<p>tsconfig.json이나 jsconfig.json을 보면</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"10388245188187950000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`    &quot;paths&quot;: {\r\n      &quot;@/*&quot;: [&quot;./src/*&quot;]\r\n    }`, `10388245188187950000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;paths&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;@/*&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk8\">&quot;./src/*&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span></code></pre>\n<p>그래서 @/styles/globals.css = src/styles/globals.css</p>\n<h4 id=\"27-글로벌-레이아웃-설정\" style=\"position:relative;\"><a href=\"#27-%EA%B8%80%EB%A1%9C%EB%B2%8C-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%84%A4%EC%A0%95\" aria-label=\"27 글로벌 레이아웃 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.7) 글로벌 레이아웃 설정</h4>\n<ul>\n<li>글로벌 레이아웃은 루트 컴포넌트인 <strong>App컴포넌트에 적용</strong>시켜주면 된다.\n<ul>\n<li>페이지 컴포넌트를 감싸는 구조</li>\n</ul>\n</li>\n</ul>\n<p>특정 경우에만 컴포넌트를 감싸주고 싶을 때</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"62219010271818400000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import SearchableLayout from '@/components/searchable-layout'\r\nimport style from './index.module.css'\r\nimport { ReactNode } from 'react'\r\n\r\nexport default function Home() {\r\n  return (\r\n    <>\r\n      <h1 className={style.h1}>인덱스</h1>\r\n      <h2 className={style.h2}>H2</h2>\r\n    </>\r\n  )\r\n}\r\n\r\nHome.getLayout = (page: ReactNode) => {\r\n  return <SearchableLayout>{page}</SearchableLayout>\r\n}`, `62219010271818400000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">SearchableLayout</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/components/searchable-layout&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./index.module.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">ReactNode</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">h1</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">인덱스</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">h2</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">h2</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">H2</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h2</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk12\">Home</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getLayout</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">page</span><span class=\"mtk1\">: </span><span class=\"mtk10\">ReactNode</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">SearchableLayout</span><span class=\"mtk1\">&gt;{</span><span class=\"mtk12\">page</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">SearchableLayout</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>메서드를 추가해 컴포넌트를 감싸주고 특정 경우에만 불러온다.</li>\n<li><code>ReactNode</code>는 전달받는 컴포넌트의 타입</li>\n<li>페이지 역할\n<ul>\n<li>_app.tsx : 앱 전체에 공통으로 적용되는 컴포넌트 (전역 설정)\n<ul>\n<li>app Component로 어떤 요청이 오던 간에 루트 컴포넌트로써 렌더링 된다.\n<ul>\n<li>현재 접속요청이 온 페이지 컴포넌트들을 <code>Component</code>라는 props로 전달을 받게 된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>index.tsx : ”/“경로로 접근 시 렌더링 되는 페이지</li>\n<li>페이지 연결은 Next.js내부 라우팅 시스템이 한다.</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"84886590976537660000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import GlobalLayout from '@/components/global-layout'\r\nimport '@/styles/globals.css'\r\nimport { NextPage } from 'next'\r\nimport type { AppProps } from 'next/app'\r\nimport { ReactNode } from 'react'\r\n\r\ntype NextPageWithLayout = NextPage & {\r\n  getLayout?: (page: ReactNode) => ReactNode\r\n}\r\n\r\nexport default function App({\r\n  Component,\r\n  pageProps,\r\n}: AppProps & {\r\n  Component: NextPageWithLayout\r\n}) {\r\n  const getLayout = Component.getLayout ?? ((page: ReactNode) => page)\r\n\r\n  return <GlobalLayout>{getLayout(<Component {...pageProps} />)}</GlobalLayout>\r\n}`, `84886590976537660000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">GlobalLayout</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/components/global-layout&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/styles/globals.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">NextPage</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">AppProps</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/app&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">ReactNode</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">NextPageWithLayout</span><span class=\"mtk1\"> = </span><span class=\"mtk10\">NextPage</span><span class=\"mtk1\"> &amp; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">getLayout</span><span class=\"mtk1\">?: (</span><span class=\"mtk12\">page</span><span class=\"mtk1\">: </span><span class=\"mtk10\">ReactNode</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">ReactNode</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">App</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: </span><span class=\"mtk10\">AppProps</span><span class=\"mtk1\"> &amp; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextPageWithLayout</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">getLayout</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">.</span><span class=\"mtk12\">getLayout</span><span class=\"mtk1\"> ?? ((</span><span class=\"mtk12\">page</span><span class=\"mtk1\">: </span><span class=\"mtk10\">ReactNode</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">page</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">GlobalLayout</span><span class=\"mtk1\">&gt;{</span><span class=\"mtk11\">getLayout</span><span class=\"mtk1\">(&lt;</span><span class=\"mtk12\">Component</span><span class=\"mtk1\"> {...</span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\">} /&gt;)}&lt;/</span><span class=\"mtk12\">GlobalLayout</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>위와같이 전달받는데 null병합 연산자를 사용해 메서드가 정의되어 있지 않아도 사용 가능하게 한다.</li>\n<li>((page: ReactNode) => page); 부분은 페이지를 받은 그대로 반환한다는 뜻</li>\n<li>AppProps는 Next.js의 _app.tsx 전용 타입 정의 app Component는 기본적으로 아래와 같은 구조이다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"12289301747903281000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`type AppProps = {\r\n  Component: NextPage\r\n  pageProps: any\r\n}`, `12289301747903281000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">type</span><span class=\"mtk1\"> </span><span class=\"mtk10\">AppProps</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">Component</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextPage</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">pageProps</span><span class=\"mtk1\">: </span><span class=\"mtk10\">any</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>compoent: NextPageWithLayout은 App Component가 받는 타입을 확장한 것</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"27868217296321560000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export default function SearchableLayout({\r\n  children,\r\n}: {\r\n  children: ReactNode\r\n}) {\r\n  const router = useRouter()\r\n  const [search, setSearch] = useState('')\r\n\r\n  // 기본적으로 query string이 string or string[]이다.\r\n  // 타입 단언으로 string으로 지정한다.\r\n  const q = router.query.q as string\r\n\r\n  useEffect(() => {\r\n    setSearch(q || '')\r\n  }, [q])\r\n\r\n  const onChangeSearch = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setSearch(e.target.value)\r\n  }\r\n\r\n  const onSubmit = () => {\r\n    if (!search || q === search) return\r\n    router.push(\\`/search?q=\\${search}\\`)\r\n  }\r\n\r\n  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === 'Enter') {\r\n      onSubmit()\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <input\r\n          value={search}\r\n          onKeyDown={onKeyDown}\r\n          onChange={onChangeSearch}\r\n          placeholder=&quot;검색어를 입력하세요...&quot;\r\n        />\r\n        <button onClick={onSubmit}>검색</button>\r\n      </div>\r\n      {children}\r\n    </div>\r\n  )\r\n}`, `27868217296321560000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SearchableLayout</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">children</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">children</span><span class=\"mtk1\">: </span><span class=\"mtk10\">ReactNode</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">search</span><span class=\"mtk1\">, </span><span class=\"mtk12\">setSearch</span><span class=\"mtk1\">] = </span><span class=\"mtk11\">useState</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 기본적으로 query string이 string or string[]이다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 타입 단언으로 string으로 지정한다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk12\">query</span><span class=\"mtk1\">.</span><span class=\"mtk12\">q</span><span class=\"mtk1\"> </span><span class=\"mtk15\">as</span><span class=\"mtk1\"> </span><span class=\"mtk10\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">setSearch</span><span class=\"mtk1\">(</span><span class=\"mtk12\">q</span><span class=\"mtk1\"> || </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk12\">q</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onChangeSearch</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">: </span><span class=\"mtk10\">React</span><span class=\"mtk1\">.</span><span class=\"mtk10\">ChangeEvent</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">HTMLInputElement</span><span class=\"mtk1\">&gt;) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">setSearch</span><span class=\"mtk1\">(</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk12\">target</span><span class=\"mtk1\">.</span><span class=\"mtk12\">value</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onSubmit</span><span class=\"mtk1\"> = () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">search</span><span class=\"mtk1\"> || </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> === </span><span class=\"mtk12\">search</span><span class=\"mtk1\">) </span><span class=\"mtk15\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">push</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`/search?q=</span><span class=\"mtk4\">${</span><span class=\"mtk12\">search</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">onKeyDown</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">: </span><span class=\"mtk10\">React</span><span class=\"mtk1\">.</span><span class=\"mtk10\">KeyboardEvent</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">HTMLInputElement</span><span class=\"mtk1\">&gt;) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">e</span><span class=\"mtk1\">.</span><span class=\"mtk12\">key</span><span class=\"mtk1\"> === </span><span class=\"mtk8\">&#39;Enter&#39;</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">onSubmit</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">input</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">value</span><span class=\"mtk1\">={</span><span class=\"mtk12\">search</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">onKeyDown</span><span class=\"mtk1\">={</span><span class=\"mtk12\">onKeyDown</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">onChange</span><span class=\"mtk1\">={</span><span class=\"mtk12\">onChangeSearch</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">placeholder</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;검색어를 입력하세요...&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">onClick</span><span class=\"mtk1\">={</span><span class=\"mtk12\">onSubmit</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">검색</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">button</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span><span class=\"mtk12\">children</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>React.ChangeEvent<HTMLInputElement>는 TypeScript에서 DOM 이벤트에 타입을 명확하게 지정하는 방식</li>\n</ul>\n<p>대표적인 이벤트 타입</p>\n<table>\n<thead>\n<tr>\n<th>요소</th>\n<th>이벤트타입</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>&#x3C;input /></td>\n<td>React.ChangeEvent<HTMLInputElement></td>\n</tr>\n<tr>\n<td>&#x3C;textarea /></td>\n<td>React.ChangeEvent<HTMLTextAreaElement></td>\n</tr>\n<tr>\n<td>&#x3C;select /></td>\n<td>React.ChangeEvent<HTMLSelectElement></td>\n</tr>\n<tr>\n<td>&#x3C;form onSubmit={…}></td>\n<td>React.FormEvent<HTMLFormElement></td>\n</tr>\n<tr>\n<td>&#x3C;button onClick={…}></td>\n<td>React.MouseEvent<HTMLButtonElement></td>\n</tr>\n<tr>\n<td>&#x3C;div onClick={…}></td>\n<td>React.MouseEvent<HTMLDivElement></td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"28-사전-렌더링과-데이터-페칭\" style=\"position:relative;\"><a href=\"#28-%EC%82%AC%EC%A0%84-%EB%A0%8C%EB%8D%94%EB%A7%81%EA%B3%BC-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8E%98%EC%B9%AD\" aria-label=\"28 사전 렌더링과 데이터 페칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.8) 사전 렌더링과 데이터 페칭</h4>\n<ul>\n<li>기존 리액트 App에서의 패칭\n<ol>\n<li>불러온 데이터를 보관할 state생성</li>\n<li>데이터 페칭 함수 생성</li>\n<li>컴포넌트 마운트 시점에 fetchData호출</li>\n<li>데이터 로딩중일때 예외처리</li>\n</ol>\n=> 이 방식의 단점\n<ul>\n<li>초기 접속 요청부터 데이터 로딩까지 오랜시간이 걸림</li>\n<li>이유 : CSR방식의 FCP가 느리고, 게다가 마운트가 완료된 다음 호출하기 때문. (FCP + 데이터 로딩시간동안 기다려야 함)</li>\n</ul>\n</li>\n<li>Next App의 데이터 페칭\n<ul>\n<li>사전 렌더링 중 발생함 (당연히 컴포넌트 마운트 이후에도 발생 가능)</li>\n<li>데이터 요청 시점이 매우 빨라지는 장점 있음</li>\n<li>추가적인 로딩없이 한방에 보여준다.</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d13bf8021f0abf9a141169d886ef43f3/329d6/5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.355828220858896%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJElEQVR42lWQzW6DMBCEbTA/DlgJTggcoAlSEEScKnHruVIfoPe8/1NMmUXQ9jBae73e2W9VGIbIsgxKKWitVwUaYRjgfPZo31pcr6Xcg2CTluicA//zL8+n0wkqjmOUZSlJFu1NF1lrcTwekaap3LemSivJzfO8D9O2LV6vFxQd8jxHFEUwxkiM4khiURS43+/w3u/vrKeSJJHJmWNDxmEYeFZScDgcfpWtkQ2bplnQz2LqCy80zF8uF5COZjRlTqbfULcdMv7V9sYJ+XGaJsFzbqWq6xrjOIqp1Hb1iOftHd5VS4HZ3XOXCTp3tS388Xig73tB5Z37446rqhICafgxfeFz/sbt+lxQLbquE0cWETtJYpG1qUxBZDbizowJF6r/ND8IU6DMilzyzwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d13bf8021f0abf9a141169d886ef43f3/a81b5/5.webp 163w,\n/static/d13bf8021f0abf9a141169d886ef43f3/da3ef/5.webp 325w,\n/static/d13bf8021f0abf9a141169d886ef43f3/309d5/5.webp 650w,\n/static/d13bf8021f0abf9a141169d886ef43f3/78344/5.webp 975w,\n/static/d13bf8021f0abf9a141169d886ef43f3/bdb72/5.webp 1300w,\n/static/d13bf8021f0abf9a141169d886ef43f3/48c97/5.webp 1326w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d13bf8021f0abf9a141169d886ef43f3/5e043/5.png 163w,\n/static/d13bf8021f0abf9a141169d886ef43f3/e5cc6/5.png 325w,\n/static/d13bf8021f0abf9a141169d886ef43f3/663f3/5.png 650w,\n/static/d13bf8021f0abf9a141169d886ef43f3/d880f/5.png 975w,\n/static/d13bf8021f0abf9a141169d886ef43f3/4c573/5.png 1300w,\n/static/d13bf8021f0abf9a141169d886ef43f3/329d6/5.png 1326w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d13bf8021f0abf9a141169d886ef43f3/663f3/5.png\"\n            alt=\"5\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>서버의 응답 시간이 너무 길 경우 빌드 타임에 데이터를 가져오는 설정도 가능</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e65924f277ee01970ab1639eb159d443/2d324/6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.263803680981596%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABkUlEQVR42kVS2VIcMQz07M7hc+5zh5klIbAFxQK1ITwmPPEb5P9/otP2UJUHVVvqlixLFmmaQmsNIQR2ux2iKCJGiJM9hqHHuq5omhoRY/v9nrbxXuucC+hzy7JEURQQSilUVROCUeTJKBQVkQgJTdMikzL4PtkX81rfxOVygfQc/XGa8Pn5F6LKDbo6h8liWJXCyoSYBMxNhirXyHW2cWpDI2PGFY7LhL4ymGqD2km8vpwhhlJiKDJMlcJcaRxqTYHGlUf6M8UbMtYaLMTr3uJ6MOiZd7lp8f604LyWKFXMgiw0lopFJUaeO15wpPjtVOP1tsKvU4OnbyVuDw5/nhd8vN2Q63kpc9id13cuQ5+zMV4sRhK+u4lFD5UOwqlht40OtrQWV+FssPYOR5rv8Pto6Vv8/NHi93nGIzucOwuhOQ/DeeksDrMxX76RKRxnWFgFxxkalQTO6/TXnJ1O0fDZfmwFzzsuTvgNJfw6ilvT2vw3YzDPM+7vH9B2XdiqsZa2cR6TJA0b9ib5W+5Od/gHfm+8XmtNLKQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/e65924f277ee01970ab1639eb159d443/a81b5/6.webp 163w,\n/static/e65924f277ee01970ab1639eb159d443/da3ef/6.webp 325w,\n/static/e65924f277ee01970ab1639eb159d443/309d5/6.webp 650w,\n/static/e65924f277ee01970ab1639eb159d443/78344/6.webp 975w,\n/static/e65924f277ee01970ab1639eb159d443/bdb72/6.webp 1300w,\n/static/e65924f277ee01970ab1639eb159d443/1ba46/6.webp 1306w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/e65924f277ee01970ab1639eb159d443/5e043/6.png 163w,\n/static/e65924f277ee01970ab1639eb159d443/e5cc6/6.png 325w,\n/static/e65924f277ee01970ab1639eb159d443/663f3/6.png 650w,\n/static/e65924f277ee01970ab1639eb159d443/d880f/6.png 975w,\n/static/e65924f277ee01970ab1639eb159d443/4c573/6.png 1300w,\n/static/e65924f277ee01970ab1639eb159d443/2d324/6.png 1306w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/e65924f277ee01970ab1639eb159d443/663f3/6.png\"\n            alt=\"6\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Next.js에서 제공하는 사전 렌더링 방식</p>\n<ul>\n<li>\n<ol>\n<li>서버사이드 렌더링(SSR)</li>\n</ol>\n<ul>\n<li>가장 기본적인 사전 렌더링 방식</li>\n<li>요청이 들어올 때 마다 사전 렌더링을 진행 함</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>정적 사이트 생성 (SSG)</li>\n</ol>\n<ul>\n<li>빌드 타임에 미리 페이지를 사전 렌더링 해둠</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>증분 정적 재생성(ISR)</li>\n</ol>\n<ul>\n<li>향후에 다룰 사전 렌더링 방식</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"29-서버사이드-렌더링-ssr\" style=\"position:relative;\"><a href=\"#29-%EC%84%9C%EB%B2%84%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A0%8C%EB%8D%94%EB%A7%81-ssr\" aria-label=\"29 서버사이드 렌더링 ssr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.9) 서버사이드 렌더링 (SSR)</h4>\n<ul>\n<li><code>export const getServerSideProps = () => {};</code> 이 있으면 서버사이드 렌더링 방식으로 호출한다. (약속된 이름)\n<ul>\n<li>페이지 컴포넌트보다 먼저 실행이 되어 필요한 데이터 불러오는 함수</li>\n<li>data를 props에 담아 리턴이 가능</li>\n<li>리턴값은 props라는 단 하나의 객체여야만 한다.</li>\n<li>getServerSizeProps는 서버측에서만 실행하는 코드이다. (console 사용 불가)\n<ul>\n<li>window객체에도 접근 못함 -> 브라우저로 접근을 못한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>컴포넌트는 서버에서 2번 실행된다.\n<ul>\n<li>\n<ol>\n<li>서버측 - 사전 렌더링 할 때</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>브라우저측 - 브라우저에서 자바스크립트 번들 형태로 전달되어서 브라우저에서 실행될 때 (하이드레이션)</li>\n</ol>\n<ul>\n<li>이러한 이유 때문에 <code>window</code>객체를 사용하지 못한다. ex - window.location\n<ul>\n<li>window.location같은 기능을 사용하고 싶을 땐 <code>useRouter()</code>를 사용한다</li>\n<li>useEffect() 를 사용해 마운트 이후에 사용도 가능하다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Component에서 props의 type을 지정할 땐 아래와 같이 InferGetServerSidePropsType을 사용</li>\n<li>Promise.all()을 사용할 경우 여러 프로미스를 병렬로 실행하므로 여러 개의 비동기 작업을 동시에 처리할 수 있다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"97061353573005410000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export const getServerSideProps = async () => {\r\n  // 컴포넌트보다 먼저 실행되어서, 컴포넌트에 필요한 데이터를 불러오는 함수\r\n  // const allBooks = await fetchBooks();\r\n  // const recoBooks = await fetchRandomBooks();\r\n\r\n  const [allBooks, recoBooks] = await Promise.all([\r\n    fetchBooks(),\r\n    fetchRandomBooks(),\r\n  ])\r\n\r\n  return {\r\n    props: {\r\n      allBooks,\r\n      recoBooks,\r\n    },\r\n  }\r\n}\r\n\r\nexport default function Home({\r\n  allBooks,\r\n  recoBooks,\r\n}: InferGetServerSidePropsType<typeof getServerSideProps>) {\r\n  return (\r\n    <div className={style.container}>\r\n      <section>\r\n        <h3>지금 추천하는 도서</h3>\r\n        {recoBooks.map(book => (\r\n          <BookItem key={book.id} {...book} />\r\n        ))}\r\n      </section>\r\n      <section>\r\n        <h3>등록된 모든 도서</h3>\r\n        {allBooks.map(book => (\r\n          <BookItem key={book.id} {...book} />\r\n        ))}\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n\r\nHome.getLayout = (page: ReactNode) => {\r\n  return <SearchableLayout>{page}</SearchableLayout>\r\n}`, `97061353573005410000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getServerSideProps</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 컴포넌트보다 먼저 실행되어서, 컴포넌트에 필요한 데이터를 불러오는 함수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// const allBooks = await fetchBooks();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// const recoBooks = await fetchRandomBooks();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">, </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">] = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">([</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">fetchBooks</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">fetchRandomBooks</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">props:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: </span><span class=\"mtk10\">InferGetServerSidePropsType</span><span class=\"mtk1\">&lt;</span><span class=\"mtk4\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk10\">getServerSideProps</span><span class=\"mtk1\">&gt;) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">container</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk10\">h3</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">지금</span><span class=\"mtk1\"> </span><span class=\"mtk12\">추천하는</span><span class=\"mtk1\"> </span><span class=\"mtk12\">도서</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h3</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">.</span><span class=\"mtk12\">map</span><span class=\"mtk1\">(</span><span class=\"mtk12\">book</span><span class=\"mtk1\"> =&gt; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">={book.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">} {...</span><span class=\"mtk12\">book</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        ))}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk10\">h3</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">등록된</span><span class=\"mtk1\"> </span><span class=\"mtk12\">모든</span><span class=\"mtk1\"> </span><span class=\"mtk12\">도서</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h3</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">.</span><span class=\"mtk12\">map</span><span class=\"mtk1\">(</span><span class=\"mtk12\">book</span><span class=\"mtk1\"> =&gt; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">={book.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">} {...</span><span class=\"mtk12\">book</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        ))}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk12\">Home</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getLayout</span><span class=\"mtk1\"> = (</span><span class=\"mtk12\">page</span><span class=\"mtk1\">: </span><span class=\"mtk10\">ReactNode</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">SearchableLayout</span><span class=\"mtk1\">&gt;{</span><span class=\"mtk12\">page</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">SearchableLayout</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>query string 읽어오는 방법\n<ul>\n<li>context : GetServerSideProps를 매개변수로 받는다\n<ul>\n<li>GetServerSideProps에는 브라우저에서 받은 요청에 대한 모든 정보가 포함되어 있다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"210-ssg\" style=\"position:relative;\"><a href=\"#210-ssg\" aria-label=\"210 ssg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.10) SSG</h4>\n<p>시작하기 전에</p>\n<ul>\n<li>SSR\n<ul>\n<li>장점 : 페이지 내부의 데이터를 항상 최신으로 유지할 수 있다.</li>\n<li>단점 : 데이터 요청이 늦어질 경우 모든게 늦어진다.</li>\n</ul>\n</li>\n<li>SSG\n<ul>\n<li>SSR의 단점을 해결하는 사전 렌더링 방식</li>\n<li>빌드 타임에 페이지를 미리 사전 렌더링 해 둠</li>\n<li>단점 : 매번 똑같은 페이지만 응답, 최신 데이터 반영은 어렵다.</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/862ebf547b99040e1e25f4e2bcefe4e1/d3b48/7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.69325153374233%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABs0lEQVR42m1Su5LaQBBc7WpfgJDECSQ4U7xJnPITfMVVUXUX4u9w7A/w5zl17NryeHqEjsRBl2Y10z29LSnnHMUYSSlFWmtBlmU0Go1otVoyVhRCkHfGmMdMRkVRkLVWeNPpNJVlifqu+IAXn4IgAnmeU1VV0nsKPfuXy4XquhJe13XpdrthyV1558WhMTmLWIJj56wALiaTiTgB+l6P2ayWhai992mz2UDnrrABw7gWmtbmGGBnBR2PR9rtdiKKpQBm4LhpGrper9LfbrcJOnLl9fxEVTEj5x21bUun04kWiwVnGEUYWY7HY6mRE5PpcDjwTCsziMQ5/xScFR1FPyJttBDruubBIBlCJMRAMURxiYXL5VKeEDfMQVScaUKuLPhNDSFjA0hwN5/PqXl5kRzhYvjicA8hRISFWaYG7iB4V9b4pLWB5cQhp/1+n9brdSqrMsUYuKdT70A9nn3N7qQGj+s/Psitfqp995WauqXITl5fv9D5fMZvIK6AwU3/F/AzN4KcPx4bYYca0fwdM9/o7JfiwzsTH5i887UFOHuA+/+DtYIPXvhmrPmeG/PbZNmPf5MZ0CsD+wLfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/862ebf547b99040e1e25f4e2bcefe4e1/a81b5/7.webp 163w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/da3ef/7.webp 325w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/309d5/7.webp 650w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/78344/7.webp 975w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/bdb72/7.webp 1300w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/f0eed/7.webp 1340w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/862ebf547b99040e1e25f4e2bcefe4e1/5e043/7.png 163w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/e5cc6/7.png 325w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/663f3/7.png 650w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/d880f/7.png 975w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/4c573/7.png 1300w,\n/static/862ebf547b99040e1e25f4e2bcefe4e1/d3b48/7.png 1340w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/862ebf547b99040e1e25f4e2bcefe4e1/663f3/7.png\"\n            alt=\"7\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>SSG\n<ul>\n<li><code>export const getStaticProps = async () => {}</code>함수가 있으면 SSG방식으로 호출한다.</li>\n<li>받는 컴포넌트에서는 <code>export default function Page({book,}: InferGetStaticPropsType&#x3C;typeof getStaticProps>) {}</code>로 받아 사용한다\n<ul>\n<li><code>InferGetStaticPropsType</code>와 똑같이 getStaticProps로 생성한 함수의 반환값 타입을 추론에서 PropsType으로 설정해주는 역할</li>\n</ul>\n</li>\n<li>수정했는데도 화면에 바로 반영되는 것을 볼 수 있는데 dev모드로 실행했기 때문\n<ul>\n<li>npm run build</li>\n<li>static, SSG, Dynamic(SSR)을 볼 수 있는데 아무런 설정 안하고 route하면 SSR이 기본값이다.</li>\n</ul>\n</li>\n<li>SSG방식은 SSR방식처럼 Context에서 query string을 가져올 수 없다.\n<ul>\n<li>제약사항이 있음에도 불구하고 SSG로 동작시키길 원한다면 사전 렌더링 과정 이후에 Client에서 직접 실행해줘야함\n<ul>\n<li>이전에 React의 방식으로</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>[id].tsx SSG\n<ul>\n<li>동적인 경로를 가진 파일을 SSG하기 위해선 선수 과정으로 경로를 설정하는 것이 필요하다.\n<ul>\n<li>해당 역할을 하는 것은 <code>getStaticPaths()</code></li>\n<li>path라는 값으로 현재 어떤 경로들이 존재할 수 있는지 배열로 리턴해야 한다.</li>\n<li>url parameter값은 반드시 문자열로 명시해야 한다.</li>\n<li>fallback 옵션을 추가해야 한다 -> path값에 존재하지 않는 url로 접속 요청을 보내게 되면 설정할 대비책\n<ul>\n<li>false : 404 Not Found반환</li>\n<li>blocking : 즉시 생성 (Like SSR)</li>\n<li>true : 즉시 생성 + 페이지만 미리 반환\n<ul>\n<li>true로 해줬을 때 loading중이면 <code>useRouter()</code>의 <code>isFallback</code>을 이용해 분기처리가 가능</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>data가 없을 경우 return {notFound: true}를 통해 에러처리가 가능하다</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"13085903375188357000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export const getStaticPaths = () => {\r\n  return {\r\n    paths: [\r\n      { params: { id: '1' } },\r\n      { params: { id: '2' } },\r\n      { params: { id: '3' } },\r\n    ],\r\n    fallback: true,\r\n    // fallback : &quot;blocking&quot;\r\n    // fallback : false\r\n  }\r\n}\r\n\r\nexport const getStaticProps = async (context: GetStaticPropsContext) => {\r\n  // 해당 페이지는 무조건 param이 있는 페이지\r\n  // 그로므로 !로 단언해줘도 상관 없다.\r\n  const id = context.params!.id\r\n  const book = await fetchOneBook(Number(id))\r\n\r\n  if (!book) {\r\n    return {\r\n      notFound: true,\r\n    }\r\n  }\r\n\r\n  return {\r\n    props: {\r\n      book,\r\n    },\r\n  }\r\n}\r\n\r\nexport default function Page({\r\n  book,\r\n}: InferGetStaticPropsType<typeof getStaticProps>) {\r\n  const router = useRouter()\r\n\r\n  if (router.isFallback) return '로딩 중입니다.'\r\n\r\n  if (!book) return '문제가 발생 하였습니다.'\r\n\r\n  const { id, title, subTitle, description, author, publisher, coverImgUrl } =\r\n    book\r\n  return (\r\n    <div className={style.container}>\r\n      <div\r\n        className={style.cover_img_container}\r\n        style={{ backgroundImage: \\`url('\\${coverImgUrl}')\\` }}\r\n      >\r\n        <img src={coverImgUrl} />\r\n      </div>\r\n      <div className={style.title}>{title}</div>\r\n      <div className={style.subTitle}>{subTitle}</div>\r\n      <div className={style.author}>\r\n        {author} | {publisher}\r\n      </div>\r\n\r\n      <div className={style.description}>{description}</div>\r\n    </div>\r\n  )\r\n}`, `13085903375188357000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getStaticPaths</span><span class=\"mtk1\"> = () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">paths:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      { </span><span class=\"mtk12\">params:</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;1&#39;</span><span class=\"mtk1\"> } },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      { </span><span class=\"mtk12\">params:</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;2&#39;</span><span class=\"mtk1\"> } },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      { </span><span class=\"mtk12\">params:</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;3&#39;</span><span class=\"mtk1\"> } },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">fallback:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// fallback : &quot;blocking&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// fallback : false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getStaticProps</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">context</span><span class=\"mtk1\">: </span><span class=\"mtk10\">GetStaticPropsContext</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 해당 페이지는 무조건 param이 있는 페이지</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 그로므로 !로 단언해줘도 상관 없다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">context</span><span class=\"mtk1\">.</span><span class=\"mtk12\">params</span><span class=\"mtk1\">!.</span><span class=\"mtk12\">id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">book</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetchOneBook</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Number</span><span class=\"mtk1\">(</span><span class=\"mtk12\">id</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">notFound:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">props:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">book</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">book</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: </span><span class=\"mtk10\">InferGetStaticPropsType</span><span class=\"mtk1\">&lt;</span><span class=\"mtk4\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk10\">getStaticProps</span><span class=\"mtk1\">&gt;) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk12\">isFallback</span><span class=\"mtk1\">) </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;로딩 중입니다.&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;문제가 발생 하였습니다.&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">title</span><span class=\"mtk1\">, </span><span class=\"mtk12\">subTitle</span><span class=\"mtk1\">, </span><span class=\"mtk12\">description</span><span class=\"mtk1\">, </span><span class=\"mtk12\">author</span><span class=\"mtk1\">, </span><span class=\"mtk12\">publisher</span><span class=\"mtk1\">, </span><span class=\"mtk12\">coverImgUrl</span><span class=\"mtk1\"> } =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">book</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">container</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">div</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"47\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">cover_img_container</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"48\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">style</span><span class=\"mtk1\">={{ </span><span class=\"mtk12\">backgroundImage:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`url(&#39;</span><span class=\"mtk4\">${</span><span class=\"mtk12\">coverImgUrl</span><span class=\"mtk4\">}</span><span class=\"mtk8\">&#39;)`</span><span class=\"mtk1\"> }}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"49\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"50\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">img</span><span class=\"mtk1\"> </span><span class=\"mtk12\">src</span><span class=\"mtk1\">={</span><span class=\"mtk12\">coverImgUrl</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"51\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"52\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">title</span><span class=\"mtk1\">}&gt;{</span><span class=\"mtk12\">title</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"53\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">subTitle</span><span class=\"mtk1\">}&gt;{</span><span class=\"mtk12\">subTitle</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"54\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">author</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"55\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span><span class=\"mtk12\">author</span><span class=\"mtk1\">} | {</span><span class=\"mtk12\">publisher</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"56\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"57\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"58\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">description</span><span class=\"mtk1\">}&gt;{</span><span class=\"mtk12\">description</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"59\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"60\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"61\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"211-isrincremental-static-regeneration-증분-정적-재생성\" style=\"position:relative;\"><a href=\"#211-isrincremental-static-regeneration-%EC%A6%9D%EB%B6%84-%EC%A0%95%EC%A0%81-%EC%9E%AC%EC%83%9D%EC%84%B1\" aria-label=\"211 isrincremental static regeneration 증분 정적 재생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.11) ISR(Incremental Static Regeneration) 증분 정적 재생성</h4>\n<ul>\n<li>SSG방식으로 생성된 정적 페이지를 일정 시간을 주기로 다시 생성하는 기술\n<ul>\n<li>매우 빠른 속도 응답 가능 (SSG 장점)</li>\n<li>최신 데이터 반영 가능 (기존 SSR방식의 장점)</li>\n</ul>\n</li>\n<li>revalidate 옵션을 준다. (아래 코드는 3초마다 재생성한다.)</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"36902851215030230000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export const getStaticProps = async () => {\r\n  // 컴포넌트보다 먼저 실행되어서, 컴포넌트에 필요한 데이터를 불러오는 함수\r\n  // const allBooks = await fetchBooks();\r\n  // const recoBooks = await fetchRandomBooks();\r\n  console.log('인덱스 페이지')\r\n\r\n  const [allBooks, recoBooks] = await Promise.all([\r\n    fetchBooks(),\r\n    fetchRandomBooks(),\r\n  ])\r\n\r\n  return {\r\n    props: {\r\n      allBooks,\r\n      recoBooks,\r\n    },\r\n    revalidate: 3,\r\n  }\r\n}`, `36902851215030230000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getStaticProps</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// 컴포넌트보다 먼저 실행되어서, 컴포넌트에 필요한 데이터를 불러오는 함수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// const allBooks = await fetchBooks();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// const recoBooks = await fetchRandomBooks();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;인덱스 페이지&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">, </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">] = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">.</span><span class=\"mtk11\">all</span><span class=\"mtk1\">([</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">fetchBooks</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">fetchRandomBooks</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">props:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">revalidate:</span><span class=\"mtk1\"> </span><span class=\"mtk7\">3</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>주문형 재검증</p>\n<ul>\n<li>요청받을 때마다 페이지를 다시 생성\n<ul>\n<li>시간으로 생성하는 것 보다 자원 낭비가 적다.</li>\n<li>api를 생성하여 revalidate할 경로를 작성한다.</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"95046693661185880000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import { NextApiRequest, NextApiResponse } from 'next'\r\n\r\nexport default async function handler(\r\n  req: NextApiRequest,\r\n  res: NextApiResponse,\r\n) {\r\n  try {\r\n    await res.revalidate('/')\r\n    return res.json({ revalidate: true })\r\n  } catch (err) {\r\n    res.status(500).send('Revalidation Failed')\r\n  }\r\n  await res.revalidate('/')\r\n}`, `95046693661185880000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">NextApiRequest</span><span class=\"mtk1\">, </span><span class=\"mtk12\">NextApiResponse</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">handler</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">req</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextApiRequest</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">res</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextApiResponse</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk11\">revalidate</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk11\">json</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">revalidate:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk15\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">err</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk11\">status</span><span class=\"mtk1\">(</span><span class=\"mtk7\">500</span><span class=\"mtk1\">).</span><span class=\"mtk11\">send</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Revalidation Failed&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">res</span><span class=\"mtk1\">.</span><span class=\"mtk11\">revalidate</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"212-seo-설정\" style=\"position:relative;\"><a href=\"#212-seo-%EC%84%A4%EC%A0%95\" aria-label=\"212 seo 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.12) SEO 설정</h4>\n<ul>\n<li>메타 태그 설정을 위해 next/head의 <Head> import</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"60751083059023480000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export default function Home({\r\n  allBooks,\r\n  recoBooks,\r\n}: InferGetStaticPropsType<typeof getStaticProps>) {\r\n  return (\r\n    <>\r\n      <Head>\r\n        <title>한입 북스</title>\r\n        <meta property=&quot;og:image&quot; content=&quot;/thumbnail.png&quot; />\r\n        <meta property=&quot;og:title&quot; content=&quot;한입 북스&quot; />\r\n        <meta property=&quot;og:description&quot; content=&quot;한입 북스에 등록된 도서들을 만나보세요&quot; />\r\n      </Head>\r\n        <title>한입 북스</title>\r\n      </Head>\r\n      <div className={style.container}>\r\n        <section>\r\n          <h3>지금 추천하는 도서</h3>\r\n          {recoBooks.map((book) => (\r\n            <BookItem key={book.id} {...book} />\r\n          ))}\r\n        </section>\r\n        <section>\r\n          <h3>등록된 모든 도서</h3>\r\n          {allBooks.map((book) => (\r\n            <BookItem key={book.id} {...book} />\r\n          ))}\r\n        </section>\r\n      </div>\r\n    </>\r\n  );\r\n}`, `60751083059023480000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"tsx\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: </span><span class=\"mtk10\">InferGetStaticPropsType</span><span class=\"mtk1\">&lt;</span><span class=\"mtk4\">typeof</span><span class=\"mtk1\"> </span><span class=\"mtk10\">getStaticProps</span><span class=\"mtk1\">&gt;) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">Head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">한입 북스</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">property</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;og:image&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;/thumbnail.png&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">property</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;og:title&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;한입 북스&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk12\">property</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;og:description&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;한입 북스에 등록된 도서들을 만나보세요&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">한입 북스</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">title</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk10\">Head</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">style</span><span class=\"mtk1\">.</span><span class=\"mtk12\">container</span><span class=\"mtk4\">}</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">section</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">h3</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">지금 추천하는 도서</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">h3</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">{</span><span class=\"mtk12\">recoBooks</span><span class=\"mtk1\">.</span><span class=\"mtk11\">map</span><span class=\"mtk1\">((</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">book</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk4\">{</span><span class=\"mtk1\">...</span><span class=\"mtk12\">book</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ))</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">section</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">section</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">h3</span><span class=\"mtk17\">&gt;</span><span class=\"mtk1\">등록된 모든 도서</span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">h3</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">{</span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">.</span><span class=\"mtk11\">map</span><span class=\"mtk1\">((</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk10\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">=</span><span class=\"mtk4\">{</span><span class=\"mtk12\">book</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk4\">{</span><span class=\"mtk1\">...</span><span class=\"mtk12\">book</span><span class=\"mtk4\">}</span><span class=\"mtk1\"> </span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ))</span><span class=\"mtk4\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">section</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">div</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"213-배포하기\" style=\"position:relative;\"><a href=\"#213-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"213 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.13) 배포하기</h4>\n<p>vercel에 배포</p>\n<p>바로 배포하는 명령어</p>\n<ul>\n<li>vercel –prod</li>\n</ul>\n<h4 id=\"214-페이지-라우터-정리\" style=\"position:relative;\"><a href=\"#214-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%9D%BC%EC%9A%B0%ED%84%B0-%EC%A0%95%EB%A6%AC\" aria-label=\"214 페이지 라우터 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.14) 페이지 라우터 정리</h4>\n<ul>\n<li>Page Router의 장점\n<ul>\n<li>\n<ol>\n<li>파일 시스템 기반의 간편한 페이지 라우팅 제공</li>\n</ol>\n<ul>\n<li>page폴더의 구조로 설정</li>\n<li>동적 경로의 경우 []로 url파라미터에 대응\n<ul>\n<li>book/100/2345/12233같은 경우 […id].tsx로 대응\n<ul>\n<li>index page까지 대응하려면 [[…id]].tsx</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>다양한 방식의 사전 렌더링 제공</li>\n</ol>\n<ul>\n<li>느린 fcp에 대응하기 위해 서버에서 js를 실행해 fcp를 단축 (사전 렌더링)</li>\n<li>SSR, SSG, ISR로 나뉜다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Page Router의 단점\n<ul>\n<li>\n<ol>\n<li>페이지별 레이아웃 설정이 번거롭다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>데이터 페칭이 페이지 컴포넌트에 집중된다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>불 필요한 컴포넌트들도 JS Bundle에 포함된다.</li>\n</ol>\n<ul>\n<li>상호 작용이 없는 컴포넌트들도 js bundle에 포함되어 2번씩 실행된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"3-app-router-시작하기\" style=\"position:relative;\"><a href=\"#3-app-router-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"3 app router 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. App Router 시작하기</h1>\n<h4 id=\"31-app-router-시작하기\" style=\"position:relative;\"><a href=\"#31-app-router-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"31 app router 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1) App Router 시작하기</h4>\n<ul>\n<li>변경되거나 추가되는 사항\n<ul>\n<li>페이지 라우팅 설정 방식 변경</li>\n<li>레이아웃 설정 방식 변경</li>\n<li>데이터 페칭 방식 변경</li>\n<li>React 18 신규 기능 추가\n<ul>\n<li>ex - Streaming, React Server Component</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>크게 변경되지 않은 사항\n<ul>\n<li>네비게이팅 (Navigating)</li>\n<li>프리페칭 (Pre-fetching)</li>\n<li>사전 렌더링 (Pre-Rendering)</li>\n</ul>\n</li>\n</ul>\n<p>npx create-next-app@latest section03으로 프로젝트 생성</p>\n<p>추가로 eslint.config.mjs 설정 변경</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"9909623188005300000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import { dirname } from 'path'\r\nimport { fileURLToPath } from 'url'\r\nimport { FlatCompat } from '@eslint/eslintrc'\r\n\r\nconst __filename = fileURLToPath(import.meta.url)\r\nconst __dirname = dirname(__filename)\r\n\r\nconst compat = new FlatCompat({\r\n  baseDirectory: __dirname,\r\n})\r\n\r\nconst eslintConfig = [\r\n  ...compat.extends('next/core-web-vitals', 'next/typescript'),\r\n  {\r\n    // 이 부분이 추가\r\n    rules: {\r\n      '@typescript-eslint/no-unused-vars': 'off',\r\n      '@typescript-eslint/no-explicit-any': 'warn',\r\n    },\r\n  },\r\n]\r\n\r\nexport default eslintConfig`, `9909623188005300000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"mjs\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">dirname</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;path&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">fileURLToPath</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;url&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">FlatCompat</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@eslint/eslintrc&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">__filename</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">fileURLToPath</span><span class=\"mtk1\">(</span><span class=\"mtk15\">import</span><span class=\"mtk1\">.</span><span class=\"mtk12\">meta</span><span class=\"mtk1\">.</span><span class=\"mtk12\">url</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">__dirname</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">dirname</span><span class=\"mtk1\">(</span><span class=\"mtk12\">__filename</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">compat</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">FlatCompat</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">baseDirectory:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">__dirname</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">eslintConfig</span><span class=\"mtk1\"> = [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span><span class=\"mtk12\">compat</span><span class=\"mtk1\">.</span><span class=\"mtk11\">extends</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;next/core-web-vitals&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;next/typescript&#39;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 이 부분이 추가</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">rules:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;off&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">&#39;@typescript-eslint/no-explicit-any&#39;</span><span class=\"mtk12\">:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;warn&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk12\">eslintConfig</span></span></span></code></pre>\n<h4 id=\"32-페이지-라우팅-설정하기\" style=\"position:relative;\"><a href=\"#32-%ED%8E%98%EC%9D%B4%EC%A7%80-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"32 페이지 라우팅 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2) 페이지 라우팅 설정하기</h4>\n<ul>\n<li>App이라는 폴더를 기반으로 라우팅 설정\n<ul>\n<li><code>page.tsx</code> 페이지 이름을 갖는 파일이 페이지 역할을 하는 파일로 자동 설정된다.</li>\n<li>~/search경로 만들고 싶으면 search폴더 아래에 <code>page.tsx</code>파일을 생성해야 한다.</li>\n<li>동적 경로를 만들고 싶을 때는 [id] 같은 대괄호로 감싸진 폴더를 만든 다음에 <code>page.tsx</code>파일을 생성한다</li>\n</ul>\n</li>\n<li>App Router의 Next버전에서는 query string이나 url파라미터와 같은 경로상의 포함되는 값들은 Page컴포넌트에 props로 전달이 된다.\n<ul>\n<li>함수형 컴포넌트에 async를 붙이는데 리액트의 서버 컴포넌트이기 때문에 async를 붙일 수 있다.</li>\n<li>아래는 query string과 param을 가져오는 코드이다.</li>\n<li>url파라미터가 중첩으로 여러개 전달되는 경우에도 대응하게 만들고 싶으면 […id]라고 폴더명을 변경한다.\n<ul>\n<li>url파라미터가 없는 경우에도 대응하고 싶으면 [[…id]]로 만들어 준다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"64585699492665795000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export default function Page(props) {\r\n  console.log(props)\r\n  return <div>Search 페이지</div>\r\n}\r\n\r\nexport default async function Page({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{ q: string }>\r\n}) {\r\n  const { q } = await searchParams\r\n\r\n  return <div>Search 페이지 : {q}</div>\r\n}\r\n\r\nexport default async function Page({\r\n  params,\r\n}: {\r\n  params: Promise<{ id: string }>\r\n}) {\r\n  const { id } = await params\r\n\r\n  return <div>book/[id] 페이지 : {id}</div>\r\n}`, `64585699492665795000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">(</span><span class=\"mtk12\">props</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">props</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">Search</span><span class=\"mtk1\"> </span><span class=\"mtk12\">페이지</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{ </span><span class=\"mtk12\">q</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> }&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> } = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">searchParams</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">Search</span><span class=\"mtk1\"> 페이지 : {</span><span class=\"mtk12\">q</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">params</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">params</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{ </span><span class=\"mtk12\">id</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> }&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> } = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">params</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">book</span><span class=\"mtk1\">/[</span><span class=\"mtk12\">id</span><span class=\"mtk1\">] 페이지 : {</span><span class=\"mtk12\">id</span><span class=\"mtk1\">}&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"33-레이아웃-설정하기\" style=\"position:relative;\"><a href=\"#33-%EB%A0%88%EC%9D%B4%EC%95%84%EC%9B%83-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"33 레이아웃 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3) 레이아웃 설정하기</h4>\n<ul>\n<li>폴더 아래에 <code>layout.tsx</code>가 있으면 search페이지의 레이아웃으로 자동 적용</li>\n<li>폴더의 모든 경로로 시작하는 페이지의 레이아웃으로 적용된다.\n<ul>\n<li>ex - /search/layout.tsx -> /search 모든 경로에 적용</li>\n</ul>\n</li>\n<li>root layout이 &#x3C;html>의 &#x3C;body>로 나타나고 있다.\n<ul>\n<li>html의 기초 틀을 유지할 수 있게 한다.</li>\n<li>children이라는 props로 자동으로 페이지 컴포넌트가 전달된다.\n<ul>\n<li>layout component를 직접 구성할 때는 리턴문 안에 어디에 렌더링 할 것인지 지정해줘야 한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>공통된 경로로 시작하지 않은 페이지에도 동일한 레이아웃을 설정하는 방법\n<ul>\n<li>라우트 그룹 활용 -> 폴더명을 소괄호로 감싸 만든다.\n<ul>\n<li>ex - (with-searchbar)</li>\n<li>더이상 경로에 어떠한 영향도 주지 않으면서, 각기 다른 경로를 가진 페이지 파일을 하나의 파일에 묶을 수 있는 기능\n<ul>\n<li>경로상에 영향을 미치지 않으면서 layout만 동일하게 적용이 가능하다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ffd196a9d09cfdbb692adb5f0125f72e/3e0bb/8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.282208588957054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACSklEQVR42m2Ta3OaQBSGQeUi4nJXogFELkLQaCqJjbl06pcmzUz/RP9BZ/r7356FkIwz/fDM2T2w775n96yQJAnSNIWiKBAEAaIoEsInPRG9Xq+J3TehQWxz73mhy0uS1CyQZRmqqjZw8XasNHm+kTFmcEwbJkXPdmAbBkRu4B2h43Q6IYoiGIYJ02wx6GceLcuCpmnNhvrEgrMK4OUhvFUItpii547Qn+gYEDz2xlSl7XowLbtZ3Il18Lk2GkHWFOiZj9nPGuHbHS5f92APGbRDDOlmjv7Wx6CeYRCYEMqyxHa7xYJcctFPsU5Qg6oTsQvrqYD7WGHyvMbFaQf3qYKyiyBfX0KuIwxCEozjuLkU/8InwXOHXcnD8QhsGSC/ecBx/4pD/QOPhzfc1y+oVkcU0S3i6pYELQjciTWZw5v4mE6n5y6t1uGQjWBkIeJyj+v4AVVyxIZYE8XigDK4w7LkgjYEx7Ywy/dIVlfI0gT+fAbTc2B5LuypB91kULUhxuklgtUORXCLPKqRh3UbyR3PLcoa0sLlDk18e37C9nqN5XIJxtjH+XGHQxKTJBksC7Ao9tgER1TR/RlryqXl17Zk27bh+xcIV+QyzRCGIVx7Qr1GOFMYugl9yMCSAGyXw61KOOuiZUPjTdHk2DbD/EtCJTvUMtSo4eYRV1cV8iyDS61k0Ua260IfjyEPVUjUOuJIgsDRBxT7H/THUtPUf//8hmDxHqTF0zAnd1HrkM7PdEmQIqPyVboY/noU6T8M6IXJaiP46+U7/gHrLC6bXSVcvQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ffd196a9d09cfdbb692adb5f0125f72e/a81b5/8.webp 163w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/da3ef/8.webp 325w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/309d5/8.webp 650w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/78344/8.webp 975w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/2a579/8.webp 1213w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ffd196a9d09cfdbb692adb5f0125f72e/5e043/8.png 163w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/e5cc6/8.png 325w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/663f3/8.png 650w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/d880f/8.png 975w,\n/static/ffd196a9d09cfdbb692adb5f0125f72e/3e0bb/8.png 1213w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ffd196a9d09cfdbb692adb5f0125f72e/663f3/8.png\"\n            alt=\"8\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"34-리액트-서버-컴포넌트-이해하기\" style=\"position:relative;\"><a href=\"#34-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%84%9C%EB%B2%84-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0\" aria-label=\"34 리액트 서버 컴포넌트 이해하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.4) 리액트 서버 컴포넌트 이해하기</h4>\n<ul>\n<li>React18v부터 추가된, 새로운 유형의 컴포넌트</li>\n<li>서버측에서만 실행되는 컴포넌트 (브라우저에서 실행X)</li>\n<li>Page Router버전에서의 Next.js에는 어떤 문제가 있었나\n<ul>\n<li>Hydration을 위해 모든 컴포넌트들을 JS Bundle로 묶어 보내준다.\n<ul>\n<li>리액트 훅이나 이벤트 핸들러가 붙어있는건 ok / 상호작용이 없는 정적인 컴포넌트도 포함하는건 불필요</li>\n</ul>\n</li>\n<li>문제점을 해결하기 위해선 사전 렌더링 과정중에 JS Bundle을 구성할 때 상호작용이 없는 정적인 컴포넌트를 제외한다</li>\n<li>그렇게 되면 클라이언트 JS Bundle에 컴포넌트들만 포함된다.</li>\n</ul>\n</li>\n<li>페이지의 <strong>대부분을 서버컴포넌트로 구성</strong>할 것은 권장, <strong>클라이언트 컴포넌트는 꼭 필요한 경우에만 사용</strong></li>\n<li>서버 컴포넌트는 서버측에서만 할 수 있었던 보안에 민감한 작업이나 데이터를 패칭해오는 다양한 작업을 진행할 수 있다.</li>\n<li>기본적으로 server component, client component로 바꾸고 싶으면 페이지 최 상단에 “use client”를 기입한다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"77094298290539900000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`'use client'\r\n\r\nimport Image from 'next/image'\r\nimport styles from './page.module.css'\r\nimport { useEffect } from 'react'\r\n\r\nexport default function Home() {\r\n  console.log('Home 컴포넌트 실행')\r\n\r\n  useEffect(() => {})\r\n\r\n  return <div className={styles.page}>인덱스 페이지</div>\r\n}`, `77094298290539900000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">&#39;use client&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">Image</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/image&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">styles</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./page.module.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;Home 컴포넌트 실행&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\"> </span><span class=\"mtk10\">className</span><span class=\"mtk1\">={</span><span class=\"mtk10\">styles</span><span class=\"mtk1\">.</span><span class=\"mtk10\">page</span><span class=\"mtk1\">}&gt;</span><span class=\"mtk12\">인덱스</span><span class=\"mtk1\"> </span><span class=\"mtk12\">페이지</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>상호작용이 있는 컴포넌트만 클라이언트 컴포넌트로 만들어준다. (Link는 HTML고유 기능)</li>\n<li>페이지나 레이아웃이 아닌 컴포넌트를 위한 파일도 만들어 줬는데 파일 이름이 Page나 Layout이 아니면 일반적인 javascript or typescript파일로 간주\n<ul>\n<li>컴포넌트를 위한 파일도 app하위에 위치시켜도 된다. -> Co-Location이라 부른다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"35-리액트-서버-컴포넌트-주의사항\" style=\"position:relative;\"><a href=\"#35-%EB%A6%AC%EC%95%A1%ED%8A%B8-%EC%84%9C%EB%B2%84-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%A3%BC%EC%9D%98%EC%82%AC%ED%95%AD\" aria-label=\"35 리액트 서버 컴포넌트 주의사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.5) 리액트 서버 컴포넌트 주의사항</h4>\n<ol>\n<li>서버 컴포넌트에는 브라우저에서 실행될 코드가 포함되면 안된다.\n<ul>\n<li>React Hooks나 이벤트 핸들러는 사용 불가</li>\n<li>브라우저에서 실행되는 기능을 담고있는 라이브러리도 사용 불가</li>\n</ul>\n</li>\n<li>클라이언트 컴포넌트는 클라이언트에서만 실행되지 않는다.\n<ul>\n<li>서버와 클라이언트 모두에서 실행된다.</li>\n</ul>\n</li>\n<li>클라이언트 컴포넌트에서 서버 컴포넌트를 import할 수 없다\n<ul>\n<li>클라이언트 컴포넌트는 서버와 브라우저 모두에서 실행된다.</li>\n<li>만약 import해서 서버 컴포넌트를 사용한다면 해당 내용은 오직 서버에서만 실행된다. -> 코드가 없다\n<ul>\n<li>이런 경우 Next.js는 자동으로 <strong>서버 컴포넌트를 클라이언트 컴포넌트로 변경</strong>한다.</li>\n<li>부득이하게 Client Component에서 Server 컴포넌트로 사용해야 하는 경우\n<ul>\n<li>바로 import해서 사용하는 것이 아니라 children props로 받아 렌더링을 시킨다.</li>\n<li>children으로 받은 컴포넌트는 클라이언트 코드로 변경하지 않는다.\n<ul>\n<li>결과물만 받게 구조가 변경되었기 때문</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>\n<ol start=\"4\">\n<li>서버 컴포넌트에서 클라이언트 컴포넌트에게 직렬화 되지 않는 Props는 전달 불가하다.</li>\n</ol>\n<ul>\n<li>직렬화 되지 않은 Props?\n<ul>\n<li>직렬화 : 객체, 배열, 클래스 등의 복잡한 구조의 데이터를 네트워크 상으로 전송하기 위해 아주 단순한 형태(문자열, Byte)로 변환하는 것을 의미한다.</li>\n</ul>\n</li>\n<li>자바스크립트의 함수는 직렬화가 불가능 -> 함수 전달 불가능</li>\n<li>서버 컴포넌트가 Next.js에서 어떻게 실행되는지 살펴보면 이해가 쉽다\n<ul>\n<li>서버 컴포넌트는 사전 렌더링 때 실행된다.</li>\n<li>페이지를 구성하는 모든 컴포넌트들 -> 서버 컴포넌트들만 따로 실행 -> Client Component실행-> 완성된 HTML페이지</li>\n<li>서버 컴포넌트들만 실행이 될 때 RSC Payload(JSON과 유사한 형태)라는 문자열이 생성된다.\n<ul>\n<li>RSC Payload\n<ul>\n<li>React Server Component의 순수한 데이터 (결과물)</li>\n<li>React Server Component를 직렬화한 결과</li>\n<li>RSC Payload에는 서버 컴포넌트의 모든 데이터 포함\n<ul>\n<li>서버 컴포넌트의 렌더링 결과</li>\n<li>연결된 클라이언트 컴포넌트 위치</li>\n<li>클라이언트 컴포넌트에게 전달하는 Props값</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>함수는 직렬화가 안되기 때문에 RSC Payload에 포함되지 않는다. -> 함수는 props로 전달 불가능</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"36-네비게이팅\" style=\"position:relative;\"><a href=\"#36-%EB%84%A4%EB%B9%84%EA%B2%8C%EC%9D%B4%ED%8C%85\" aria-label=\"36 네비게이팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.6) 네비게이팅</h4>\n<ul>\n<li>페이지 이동은 Page Router와 동일한데 Client Side Rendering 방식으로 처리된다.</li>\n<li>pre-fetching에서 동작이 조금 달라진다.\n<ul>\n<li>JS Bundle은 브라우저에서 실행할 자바스크립트 코드 (Client Components만 포함됨)</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/972682fa05852a134156f201691f924c/4c66b/9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.80368098159509%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACOUlEQVR42m1TSY7bMBCkREqkVmuxtXiTN0wAxwYcGJlBTjGSZ+Q2+UL+lWOelGvOEaCaJiV7xsAcCmV2t6q7izTLsgyWZd1g2/YNXHDUdY2HhwcsFgs4rqC4Bc77/PBNp7ksS+R5fmFplpgEY+wO1xjnHL7vQZC4yVkDXms613Xx9PSI8/l8YbNihTyukIalQRYNiAukUYF60mDX7DGvNkOO4mEx1BdIwqJLKb6stpiVzYVV6Qpl0kBzna0JG0zztUGZNljVH7DffsJueRjiG8zGW8Madb7pqpRqE9IZkaBeyfMVpHJRVgWOxwM+Hvao6tLE/cAj75zbupx8jOY54uWYMIFQbqdz2lPiXvAKqSTiOEYcxfA8H47jGLhSwiVh11NwiOVhjsnXI/zzGs4o6IR0wR0BzviFvbmtdy9H36oWDalZQFtE9PHjtMb37QZfZlOknuo82sDhvJ/w7pnQcwijEGmWYjQaGcRxBH2LjtnCRkCCJxI6Lxf43CyQBb5Zmfcrf2O6iDHr9gxWzQqn0wnHwwH7/R4ZiesJr00FCbt0FkIYdoS491AnPI/8oc70MLHb7QySJDGTjZIYiryzLNv4/Haj3ibDnbaGYr+0YKuUaqWUbRAE7Xg8bieTSRuGYUuNTFzXUHFLaxFbLQkT7Nai3yTW0mT/dXOK/yVBZ/BPvHYdzpymN6tpD82N96zPUiqTE3SmWvq3aLb/Md+PnqXvP/sGUY9o4CEu34O84adSwQ8a5rdlsT8vSF4SEeNesMYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/972682fa05852a134156f201691f924c/a81b5/9.webp 163w,\n/static/972682fa05852a134156f201691f924c/da3ef/9.webp 325w,\n/static/972682fa05852a134156f201691f924c/309d5/9.webp 650w,\n/static/972682fa05852a134156f201691f924c/78344/9.webp 975w,\n/static/972682fa05852a134156f201691f924c/1eaf0/9.webp 1215w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/972682fa05852a134156f201691f924c/5e043/9.png 163w,\n/static/972682fa05852a134156f201691f924c/e5cc6/9.png 325w,\n/static/972682fa05852a134156f201691f924c/663f3/9.png 650w,\n/static/972682fa05852a134156f201691f924c/d880f/9.png 975w,\n/static/972682fa05852a134156f201691f924c/4c66b/9.png 1215w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/972682fa05852a134156f201691f924c/663f3/9.png\"\n            alt=\"9\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>프로그래미틱한 페이지 이동 구현\n<ul>\n<li><code>useRouter()</code>를 사용한다\n<ul>\n<li>Page Router와 달리 useRouter를 App Router 버전인 <code>next/navigation</code>에서 가져온다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>App Router의 페이지는 static과 Dynamic페이지로 나뉜다.\n<ul>\n<li>기본적으로 static, query string, url parameter들을 꺼내던가 하는 작업이 있으면 Dynamic페이지로 설정된다.</li>\n<li>static은 RSC payload와 js bundle을 불러오고, dynamic 페이지는 data upload가 필요할 수도 있으니 RSC payload만 불러온다.\n<ul>\n<li>dynamic 페이지는 JS bundle은 향후에 실제 페이지 이동이 발생했을 때만 불러온다</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>=> App Router버전에서는 페이지의 데이터가 Server Component는 RSC Payload로 Client Component는 JS Bundle로 나뉘어서 동시에 전달된다.</p>\n<h4 id=\"37-한입북스-ui-구현하기\" style=\"position:relative;\"><a href=\"#37-%ED%95%9C%EC%9E%85%EB%B6%81%EC%8A%A4-ui-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"37 한입북스 ui 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.7) 한입북스 UI 구현하기</h4>\n<ul>\n<li>useSearchParams() 라는 훅\n<ul>\n<li>현재 페이지에 전달된 query string값을 꺼내올 수 있다.\n<ul>\n<li>PageRouter에서는 useRouter()를 사용해 router.query.q로 불러왔다.</li>\n<li>AppRouter는 불가능</li>\n<li>**useSearchParams()**를 사용해야 한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-데이터-페칭\" style=\"position:relative;\"><a href=\"#4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8E%98%EC%B9%AD\" aria-label=\"4 데이터 페칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 데이터 페칭</h1>\n<h4 id=\"41-앱-라우터의-데이터-페칭\" style=\"position:relative;\"><a href=\"#41-%EC%95%B1-%EB%9D%BC%EC%9A%B0%ED%84%B0%EC%9D%98-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8E%98%EC%B9%AD\" aria-label=\"41 앱 라우터의 데이터 페칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1) 앱 라우터의 데이터 페칭</h4>\n<ul>\n<li>Page Router\n<ul>\n<li>\n<ol>\n<li>SSR (서버사이드 렌더링)</li>\n</ol>\n<ul>\n<li>export async function getServerSideProps() {}</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>SSG (정적 사이트 생성)</li>\n</ol>\n<ul>\n<li>export async function getStaticProps() {}</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>Dynamic SSG(동적 경로에 대한 정적 사이트 생성)</li>\n</ol>\n<ul>\n<li>export async function getStaticPaths() {}</li>\n</ul>\n</li>\n<li>Page Router에서는 클라이언트 컴포넌트만 있기 때문에 서버와 클라이언트 모두 실행이 된다\n<ul>\n<li>위와같은 특수한 함수를 사용해 서버에서만 사용하게 코드를 작성했어야 했다.</li>\n<li>클라이언트 컴포넌트에는 Async키워드를 사용할 수 없었다.\n<ul>\n<li>브라우저에서 동작 시 문제를 일으킬 수 있기 때문이다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>App Router\n<ul>\n<li>컴포넌트 내부에서 직접 필요로 하는 데이터를 불러와서 바로 렌더링해서 사용할 수 있는 방식으로 변경</li>\n<li>필요로 하는 곳에서 불러오니 props를 전달해서 사용한다는 Page Router의 단점이 아래와 같이 사라진다.</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4976206d0ad8c42c69ad647e50fe25a6/61d11/10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.987730061349694%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB3UlEQVR42lVT2W7jMAzMW9eHrMOSLF9pEzvO2RYNWrQo9v9/a5aU0hT7MCBF02POiF5VVYUIWUFSVILyUqRaJRKoJsRvjKCePMuQ/SFkCVxfSSkRQc3KGZSXEXLtobSGMhq6TlAEaRiKchPj07zFfNhjs5uwWWaUZYkVT8KEPJXuHR6+t1CnAcbV0MEmNBYqoobyXHdUqzER2fHlguVyxPJ8+p+Qx23bAD8EtF1H8mWUG6f/sUX8gvuLokCR5wmUR8k/HjrvEXyDMi9g6xptCESWnsk7mUhgX0lRQb05keU30kjIl1DOLbKvLeq+Ib8MNHk573d4nDYwniRbqlmSS1FZnSJZwlIv11fsLyccSHqUzF/XS4/qc4LpPerGwRC2+wXzcZ/OIdUM+ZiQzvxBvgzG0zLdPKTRuyagCy1UJW/rIdCQBVE216jxLleknGssM7+tTJ7dJNsxwDYezjp0dBnsmSeyvu9hjME4jNBK4b5e8RLZWxknKgtGEXN+d/Xwd4I6r2mnNtGHsO6xOx8wHRf0mzXVznjcbePq2NZFC6LXdD6/veL6/Ynn9ze8fFwj8UqQf7Kt4ZzFMI5xoduuRaAV0rTI/TDQBjgISSukZPqjKDJ8aBCot+F+Akv+Bx3tD/If4hqHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/4976206d0ad8c42c69ad647e50fe25a6/a81b5/10.webp 163w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/da3ef/10.webp 325w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/309d5/10.webp 650w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/e185d/10.webp 713w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/4976206d0ad8c42c69ad647e50fe25a6/5e043/10.png 163w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/e5cc6/10.png 325w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/663f3/10.png 650w,\n/static/4976206d0ad8c42c69ad647e50fe25a6/61d11/10.png 713w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/4976206d0ad8c42c69ad647e50fe25a6/663f3/10.png\"\n            alt=\"10\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"74479935999532070000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`async function AllBooks() {\r\n  const response = await fetch(\\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/book\\`);\r\n  const allBooks: BookData[] = await response.json();\r\n\r\n  if(!response.ok) {\r\n    return <div>오류가 발생했습니다...</div>\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      {allBooks.map((book) => (\r\n        <BookItem key={book.id} {...book} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// query string 사용\r\nimport BookItem from &quot;@/components/book-item&quot;;\r\nimport { BookData } from &quot;@/types&quot;;\r\n\r\nexport default async function Page({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{\r\n    q?: string;\r\n  }>;\r\n}) {\r\n  const response = await fetch(\r\n    \\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/book/search?q=\\${searchParams.q}\\`\r\n  );\r\n\r\n  if (!response.ok) {\r\n    return <div>오류가 발생했습니다...</div>;\r\n  }\r\n\r\n  const books: BookData[] = await response.json();\r\n\r\n  return (\r\n    <div>\r\n      {books.map((book) => (\r\n        <BookItem key={book.id} {...book} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// params\r\nexport default async function Page({\r\n  params,\r\n}: {\r\n  params: Promise<{ id: string | string[] }>;\r\n}) {\r\n  const response = await fetch(\\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/book/\\${params.id}\\`);\r\n\r\n  if (!response.ok) {\r\n    return <div>오류가 발생했습니다...</div>;\r\n  }\r\n\r\n  const book = await response.json();\r\n\r\n  const { id, title, subTitle, description, author, publisher, coverImgUrl } =\r\n    book;\r\n  ...\r\n}`, `74479935999532070000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">AllBooks</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/book`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">: </span><span class=\"mtk10\">BookData</span><span class=\"mtk1\">[] = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk11\">json</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\">(!</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ok</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">오류가</span><span class=\"mtk1\"> </span><span class=\"mtk12\">발생했습니다</span><span class=\"mtk1\">...&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span><span class=\"mtk12\">allBooks</span><span class=\"mtk1\">.</span><span class=\"mtk12\">map</span><span class=\"mtk1\">((</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) =&gt; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">={book.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">} {...</span><span class=\"mtk12\">book</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      ))}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// query string 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;@/components/book-item&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">BookData</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;@/types&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">q</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">string</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/book/search?q=</span><span class=\"mtk4\">${</span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">.</span><span class=\"mtk12\">q</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ok</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">오류가</span><span class=\"mtk1\"> </span><span class=\"mtk12\">발생했습니다</span><span class=\"mtk1\">...&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">books</span><span class=\"mtk1\">: </span><span class=\"mtk10\">BookData</span><span class=\"mtk1\">[] = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk11\">json</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span><span class=\"mtk12\">books</span><span class=\"mtk1\">.</span><span class=\"mtk12\">map</span><span class=\"mtk1\">((</span><span class=\"mtk12\">book</span><span class=\"mtk1\">) =&gt; (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">BookItem</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">={book.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">} {...</span><span class=\"mtk12\">book</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      ))}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  );</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"47\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"48\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// params</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"49\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"50\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">params</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"51\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"52\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">params</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{ </span><span class=\"mtk12\">id</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk10\">string</span><span class=\"mtk1\">[] }&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"53\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"54\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/book/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">params</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"55\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"56\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ok</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"57\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">오류가</span><span class=\"mtk1\"> </span><span class=\"mtk12\">발생했습니다</span><span class=\"mtk1\">...&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"58\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"59\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"60\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">book</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk11\">json</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"61\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"62\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id</span><span class=\"mtk1\">, </span><span class=\"mtk12\">title</span><span class=\"mtk1\">, </span><span class=\"mtk12\">subTitle</span><span class=\"mtk1\">, </span><span class=\"mtk12\">description</span><span class=\"mtk1\">, </span><span class=\"mtk12\">author</span><span class=\"mtk1\">, </span><span class=\"mtk12\">publisher</span><span class=\"mtk1\">, </span><span class=\"mtk12\">coverImgUrl</span><span class=\"mtk1\"> } =</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"63\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">book</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"64\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"65\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>url 환경변수로 등록\n<ul>\n<li><code>NEXT_PUBLIC_API_SERVER_URL=http://localhost:12345</code>\n<ul>\n<li><code>NEXT_PUBLIC</code>이 없으면 서버측 컴포넌트에서만 사용이 가능하다</li>\n<li>클라이언트 컴포넌트에서도 사용이 가능하려면 <code>NEXT_PUBLIC</code>을 접두사로 붙여야 한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"42-데이터-캐시\" style=\"position:relative;\"><a href=\"#42-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%BA%90%EC%8B%9C\" aria-label=\"42 데이터 캐시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2) 데이터 캐시</h4>\n<ul>\n<li>데이터 캐시 : fetch메서드를 활용해 불러온 데이터를 Next 서버에서 보관하는 기능\n<ul>\n<li>영구적으로 데이터를 보관하거나, 특정 시간을 주기로 갱신시키는 것도 가능</li>\n<li>불필요한 데이터 요청 수를 줄여서 웹 서비스의 성능을 크게 개선할 수 있다.</li>\n<li>ex - const response = await fetch(<code>~/apu</code>, { cache: “force-cache})\n<ul>\n<li>요청 결과를 무조건 캐싱함</li>\n<li>한번 호출 된 이후에는 다시는 호출되지 않음</li>\n</ul>\n</li>\n<li>axios같은 http request라이브러리 에서는 사용 불가능하고 오직 fetch메서드에서만 활용 가능\n<ul>\n<li>Next.js에서 제공하는 fetch는 일반적인 fetch메서드가 아닌 데이터 캐시와 관련된 여러 기능을 추가한 확장판개념의 메서드이기 때문</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>캐시 옵션\n<ul>\n<li>\n<ol>\n<li>{cache: “no-store”}</li>\n</ol>\n<ul>\n<li>데이터 페칭의 결과를 저장하지 않는 옵션</li>\n<li>캐싱을 아예 하지 않도록 설정하는 옵션</li>\n<li>데이터 캐싱의 <strong>기본값은 캐싱을 하지 않는 것</strong> (15버전 이하는 기본값이 캐싱하는 것)</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>{cache: “force-cache”}</li>\n</ol>\n<ul>\n<li>요청의 결과를 무조건 캐싱함</li>\n<li>한번 호출 된 이후에는 다시는 호출되지 않음</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>{next: {revalidate:3}};</li>\n</ol>\n<ul>\n<li>특정 시간을 주기로 캐시를 업데이트</li>\n<li>마치 Page Router의 ISR방식과 유사</li>\n</ul>\n</li>\n<li>\n<ol start=\"4\">\n<li>{next: {tags: [‘a’]}}</li>\n</ol>\n<ul>\n<li>On-Demand Revalidate</li>\n<li>요청이 들어왔을 때 데이터를 최신화 함</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>fetch데이터 확인을 위한 config옵션</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"37240661896357220000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import type { NextConfig } from 'next'\r\n\r\nconst nextConfig: NextConfig = {\r\n  /* config options here */\r\n  logging: {\r\n    fetches: {\r\n      fullUrl: true,\r\n    },\r\n  },\r\n}\r\n\r\nexport default nextConfig`, `37240661896357220000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">NextConfig</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">nextConfig</span><span class=\"mtk1\">: </span><span class=\"mtk10\">NextConfig</span><span class=\"mtk1\"> = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* config options here */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">logging:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">fetches:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">fullUrl:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk12\">nextConfig</span></span></span></code></pre>\n<h4 id=\"43-리퀘스트-메모이제이션\" style=\"position:relative;\"><a href=\"#43-%EB%A6%AC%ED%80%98%EC%8A%A4%ED%8A%B8-%EB%A9%94%EB%AA%A8%EC%9D%B4%EC%A0%9C%EC%9D%B4%EC%85%98\" aria-label=\"43 리퀘스트 메모이제이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3) 리퀘스트 메모이제이션</h4>\n<ul>\n<li>다양한 API요청 중에 중복된 요청을 제거시켜 캐싱시켜 한번만 요청할 수 있도록 <strong>자동으로 데이터 페칭을 최적화 해주는 기능</strong></li>\n<li>하나의 페이지를 렌더링 하는 동안에 중복된 API요청을 캐싱하기 위해 존재함\n<ul>\n<li>렌더링이 종료되면 모든 캐시가 소멸된다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"5-페이지-캐싱\" style=\"position:relative;\"><a href=\"#5-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%BA%90%EC%8B%B1\" aria-label=\"5 페이지 캐싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 페이지 캐싱</h1>\n<h4 id=\"51-풀-라우트-캐시1\" style=\"position:relative;\"><a href=\"#51-%ED%92%80-%EB%9D%BC%EC%9A%B0%ED%8A%B8-%EC%BA%90%EC%8B%9C1\" aria-label=\"51 풀 라우트 캐시1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1) 풀 라우트 캐시1</h4>\n<blockquote>\n<p>Next서버 측에서 빌드 타임에 특정 페이지의 렌더링 결과를 캐싱하는 기능</p>\n</blockquote>\n<p>SSG와 비슷하게 빌드타임에 페이지를 만들어 줘 바로 페이지 반환</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6153820d921f0a9cb9db1beb0317ff5e/1cb02/11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.423312883435585%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABgUlEQVR42jWS3XKbMBCFBTYxxo75EQYZCQTY4LpN0+mkzfSy0+lF3/+Fvq5JcnFGu2eOzu5qpZRSKBUQBAFhGFKfPM5fadyAcxZrLcMwME8Xxt5x7luGzuKbkXN341gYqqricrlQFIV4LYYfCLHDT+anf9j+u4jGRZgXmt7V/HkZ+P0y8vrUcrM/eJ3+4oqJ8lgyXSbyPEfpw46mrnCNkWoZVZFTl5pTpfHO0HdOzE70bYOtNTdf0pkUWxo+t98wYqKzBH1IyJIHlCszJi8Vp7MIS7zRDHL53Bnmc8c8Oq6DZe5ldFvy62b41OX0Tc3X4QudFPEnTVPsKZMIlccrDpEilVPvI2ot4vEZb2u5pKWTR9zxgKsOtFXK86CZ2xxXS5fHnfCp8DKVdLkYZvsEU5XLyHm6J0tTjnXHLolJ4jXbTUSyWS/YCvbbtzx+uHMRcbSSWBCt2axDVLzd0nkvmxyXR33MNNpcWUUbwiBcNh8I7nHwni/ce6yCtx9yx32x/wE416zuLIMnwwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6153820d921f0a9cb9db1beb0317ff5e/a81b5/11.webp 163w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/da3ef/11.webp 325w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/309d5/11.webp 650w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/78344/11.webp 975w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/bdb72/11.webp 1300w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/dfc37/11.webp 1397w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6153820d921f0a9cb9db1beb0317ff5e/5e043/11.png 163w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/e5cc6/11.png 325w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/663f3/11.png 650w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/d880f/11.png 975w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/4c573/11.png 1300w,\n/static/6153820d921f0a9cb9db1beb0317ff5e/1cb02/11.png 1397w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6153820d921f0a9cb9db1beb0317ff5e/663f3/11.png\"\n            alt=\"11\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Dynamic Page로 설정되는 기준 (서버 컴포넌트만 해당, 클라이언트 컴포넌트는 페이지 유형에 영향을 미치지 않음)\n<ul>\n<li>특정 페이지가 접속 요청을 받을 때 마다 매번 변화가 생기거나, 데이터가 달라질 경우</li>\n<li>\n<ol>\n<li>캐시되지 않는 Data Fetching을 사용하는 경우</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>동적 함수(쿠키, 헤더, 쿼리스트링)을 사용하는 컴포넌트가 있을 때</li>\n</ol>\n</li>\n</ul>\n</li>\n<li>static page로 설정되는 기준\n<ul>\n<li>Dynamic페이지가 아니면 모두 static page가 된다.</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>동적함수 사용 유무</th>\n<th>데이터캐시</th>\n<th>페이지 분류</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>YES</td>\n<td>NO</td>\n<td>Dynamic Page</td>\n</tr>\n<tr>\n<td>YES</td>\n<td>YES</td>\n<td>Dynamic Page</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>NO</td>\n<td>Dynamic Page</td>\n</tr>\n<tr>\n<td>NO</td>\n<td>YES</td>\n<td>Static Page</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>맨 마지막의 동적사용 x, 데이터 캐시o -> 풀 라우트 캐시가 가능하다</li>\n<li>풀 라우트 캐시도 revalidate가 가능하다.</li>\n</ul>\n<h4 id=\"52-풀-라우트-캐시2\" style=\"position:relative;\"><a href=\"#52-%ED%92%80-%EB%9D%BC%EC%9A%B0%ED%8A%B8-%EC%BA%90%EC%8B%9C2\" aria-label=\"52 풀 라우트 캐시2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2) 풀 라우트 캐시2</h4>\n<ul>\n<li>useSearchParams() -> Suspense로 감싸줘야 한다.\n<ul>\n<li><strong>Suspense태그</strong>로 감싸주게 된다면 사전 렌더링 과정에선 배제되고, 오직 클라이언트 측에서만 렌더링 된다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"53-풀-라우트-캐시---동적-경로에-적용하기\" style=\"position:relative;\"><a href=\"#53-%ED%92%80-%EB%9D%BC%EC%9A%B0%ED%8A%B8-%EC%BA%90%EC%8B%9C---%EB%8F%99%EC%A0%81-%EA%B2%BD%EB%A1%9C%EC%97%90-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"53 풀 라우트 캐시   동적 경로에 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.3) 풀 라우트 캐시 - 동적 경로에 적용하기</h4>\n<ul>\n<li>실시간으로 데이터를 백엔드 서버로 부터 불러와서 렌더링하는 페이지는 static으로 설정 불가능\n<ul>\n<li>풀 라우트 캐시를 포기하지만, 조금이라도 생성 속도를 최적화를 하자면 데이터 캐시만 따로 적용하는 방법이 있다.</li>\n</ul>\n</li>\n<li>parameter로 받는 경우, 어떤 경로가 올 수 있는지 알려줘야 한다. -> 빌드타임에 만들어 질 수 있도록\n<ul>\n<li><code>generateStaticParams()</code>를 활용한다</li>\n<li>정적인 url파라미터를 담은 배열을 반환하면 빌드타임에 넥스트 서버가 자동으로 정적 파라미터들을 읽어서 파라미터에 해당하는 페이지를 정적으로 만들게 된다.</li>\n<li>명시할 때는 문자열로만 명시해야 한다.</li>\n<li>데이터 캐싱이 설정되지 않은 데이터 패칭이 존재하더라도 무조건 해당하는 페이지가 static페이지로 강제로 설정된다.</li>\n</ul>\n</li>\n<li>404오류일 경우엔 nextjs의 notFound() 를 활용해 404페이지로 리다이렉트 해준다.\n<ul>\n<li>app폴더 아래에 not-found.tsx를 만들어준다.</li>\n</ul>\n</li>\n<li>설정하지 않은 페이지들도 접속하면 static한 page를 만드는데 그렇지 않고 정적으로 설정해둔 url파라미터 이외에 전부 에러처리를 하려면\n<ul>\n<li>export const dynamicParams = false; 를 줘서 내보내주면 된다. (기본값이 true)</li>\n<li>dynamicParams이 true일 경우 요청 오면 새로운 페이지를 실시간으로 생성해서 응답</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"59150236405892500000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export const dynamicParams = false;\r\n\r\nexport function generateStaticParams() {\r\n  return [{id: &quot;1&quot;}, {id: &quot;2&quot;},{id: &quot;3&quot;}];\r\n}\r\n\r\nexport default async function Page(props: {\r\n  params: Promise<{ id: string | string[] }>;\r\n}) {\r\n  const { id } = await props.params;\r\n  ...\r\n}`, `59150236405892500000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">dynamicParams</span><span class=\"mtk1\"> = </span><span class=\"mtk4\">false</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateStaticParams</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> [{</span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;1&quot;</span><span class=\"mtk1\">}, {</span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;2&quot;</span><span class=\"mtk1\">},{</span><span class=\"mtk12\">id:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&quot;3&quot;</span><span class=\"mtk1\">}];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">(</span><span class=\"mtk12\">props</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">params</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{ </span><span class=\"mtk12\">id</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> | </span><span class=\"mtk10\">string</span><span class=\"mtk1\">[] }&gt;;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">id</span><span class=\"mtk1\"> } = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">props</span><span class=\"mtk1\">.</span><span class=\"mtk12\">params</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"54-라우트-세그먼트-옵션\" style=\"position:relative;\"><a href=\"#54-%EB%9D%BC%EC%9A%B0%ED%8A%B8-%EC%84%B8%EA%B7%B8%EB%A8%BC%ED%8A%B8-%EC%98%B5%EC%85%98\" aria-label=\"54 라우트 세그먼트 옵션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.4) 라우트 세그먼트 옵션</h4>\n<ul>\n<li>풀라우트 캐시를 위해서 모든 페이지의 컴포넌트들이 동적인 함수를 사용하진 않는지, 또는 캐싱되지 않는 데이터 페칭을 하고있지 않는지 확인해야 한다.</li>\n<li>라우트 세그먼트 옵션 : 강제로 특정 페이지를 스태틱, 다이나믹 페이지로 설정하던지, Page Revalidate를 하던지 페이지를 동작을 강제로 설정할 수 있다.\n<ul>\n<li><code>dynamicParams</code>처럼 약속된 이름의 변수를 선언하고, 값을 설정함으로써 페이지의 설정을 강제로 조절할 수 있는 기능 -> 라우트 세그먼트 옵션</li>\n<li>많이 사용되는 옵션은 <code>Dynamic옵션</code>\n<ul>\n<li>export const dynamic = ”;</li>\n<li>dynamic옵션을 사용하면 페이지 내부의 동적함수나 데이터 캐시의 유무를 떠나서 강제로 static or dynamic으로 설정 가능\n<ul>\n<li>\n<ol>\n<li>auto : 기본값으로 아무것도 강제하지 않음 (기본값이니 생략 가능)</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>force-dynamic : 페이지를 강제로 Dynamic 페이지로 설정</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>force-static : 페이지를 강제로 static 페이지로 설정</li>\n</ol>\n<ul>\n<li>페이지 내부의 동적함수는 빈값을 리턴하게 자동으로 설정함</li>\n</ul>\n</li>\n<li>\n<ol start=\"4\">\n<li>error : 페이지를 강제로 Static 페이지로 설정 (설정하면 안되는 이유가 있으면 -> 빌드 에러)</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>라우트 세그먼트 옵션을 지정해주는건 권장사항이 아니다.\n<ul>\n<li>App Router기반의 NextJS은 페이지를 구성하고 있는 각각의 컴포넌트들이 어떻게 동작하는지에 따라서 컴포넌트 단위로 페이지를 스태틱, 다이나믹으로 설정해주는 아주 좋은 기능이 있는데 이러한 매커니즘을 무시하기 때문</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"55-클라이언트-라우터-캐시\" style=\"position:relative;\"><a href=\"#55-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EB%9D%BC%EC%9A%B0%ED%84%B0-%EC%BA%90%EC%8B%9C\" aria-label=\"55 클라이언트 라우터 캐시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.5) 클라이언트 라우터 캐시</h4>\n<ul>\n<li>브라우저에 저장되는 캐시</li>\n<li>페이지 이동을 효율적으로 진행하기 위해 페이지의 일부 데이터를 보관함\n<ul>\n<li>레이아웃에 대한 데이터를 따로 추출을 해서 클라이언트 라우터 캐시라는 이름으로 보관하도록 자동으로 설정한다.</li>\n<li>한번 접속한 페이지의 레이아웃만 따로 보관해 페이지 이동이 추가로 발생하였을 때 공통된 레이아웃을 중복해 불러오지 않도록 페이지의 이동을 최적화</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6e1d58ac8b28c7c25ff7552d8e28bca4/c3e55/13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.877300613496935%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUklEQVR42nVQyW7CMBSMnYUgyGInZAMlhSQooiQSrRAHeuhy6bEc+gn9/0+Y2lkglehh9FaPZ55i2zaiKEKSJKiqCnEcYxEEcF0HjHMEYYgwCBGInu/7yLIMRVGKOmz35Dzo58xlUDRNQwtdhzWb4WOzwXdTo2QOlvkJzfGCvDqjrvdomgbZwxr7qsDneSfwiNfjFk/5GW/1Bdv4AIVSivl8DsMwQAlBtfBxEioiQe4GBdLyHVxEz/NahdKRxx1slhz5iiOLGSInRcor8FncKZSWHcfBdGoiFFYTxsAtC5bDsFjuhHoTRFFAxIeKiAPG9TWXCembusi/yhw/hwbPUQjdNDGZGFBVFcNppCNZqyqFJqOoKZFQb4R9Ak0MmzDAyzrFyrbaviTpCDpIwgGSlFLSK6QjhXdBr8q6+D+h3KdjwvEdpAV9sNI++mvzRkjuKvwFeva5I1UW2FkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6e1d58ac8b28c7c25ff7552d8e28bca4/a81b5/13.webp 163w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/da3ef/13.webp 325w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/309d5/13.webp 650w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/78344/13.webp 975w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/bdb72/13.webp 1300w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/cde6a/13.webp 3044w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6e1d58ac8b28c7c25ff7552d8e28bca4/5e043/13.png 163w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/e5cc6/13.png 325w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/663f3/13.png 650w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/d880f/13.png 975w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/4c573/13.png 1300w,\n/static/6e1d58ac8b28c7c25ff7552d8e28bca4/c3e55/13.png 3044w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6e1d58ac8b28c7c25ff7552d8e28bca4/663f3/13.png\"\n            alt=\"13\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"6-스트리밍과-에러-핸들링\" style=\"position:relative;\"><a href=\"#6-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EA%B3%BC-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81\" aria-label=\"6 스트리밍과 에러 핸들링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 스트리밍과 에러 핸들링</h1>\n<h4 id=\"61-스트리밍이란\" style=\"position:relative;\"><a href=\"#61-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EC%9D%B4%EB%9E%80\" aria-label=\"61 스트리밍이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1) 스트리밍이란?</h4>\n<ul>\n<li>잘게 쪼개진 데이터를 연속적으로 보내주는 기술\n<ul>\n<li>사용자에게 긴로딩 없이 좋은 경험을 제공</li>\n</ul>\n</li>\n<li>일반적인 웹서비스에서도 HTML페이지를 스트리밍 하는 기능 제공\n<ul>\n<li>단순한 컴포넌트부터 화면에 보여주고 데이터 패칭등으로 렌더링이 오래걸릴 것 같은 컴포넌트를 대체 UI(로딩바)화면에 보여주고 있다가 서버측에서 컴포넌트 렌더링이 완료되면 컨텐츠를 보여준다.</li>\n</ul>\n</li>\n<li>Static Page보단 Dynamic Page에 자주 사용된다.\n<ul>\n<li><code>loading.tsx</code>를 생성하면 동일한 경로에 있는 페이지 컴포넌트를 스트리밍 되도록 설정해주면 렌더링하는데 시간이 소요하더라도 전체 페이지의 렌더링을 지연시키지 않는다.</li>\n<li>주의사항\n<ul>\n<li>\n<ol>\n<li>상위 경로에 있더라도 <code>loading.tsx</code>로 동일하게 설정된다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li><code>loading.tsx</code>파일이 스트리밍 하도록 스트리밍하는 페이지 컴포넌트는 <code>async</code>가 붙어서 <strong>비동기로 작동하도록 설정된 페이지 컴포넌트에만 스트리밍을 제공</strong>한다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li><code>loading.tsx</code>파일은 Page Component에만 스트리밍을 적용할 수 있다.</li>\n</ol>\n<ul>\n<li>페이지 컴포넌트(Page.tsx) 외에 별도의 컴포넌트에도 적용하고 싶다면 <code>loading.tsx</code>가 아니라 react에서 제공하는 <Suspense>를 별도로 활용해줘야 한다.</li>\n</ul>\n</li>\n<li>\n<ol start=\"4\">\n<li><code>loading.tsx</code>로 설정된 스트리밍은 브라우저에서 query string이 변경될 때는 트리거 되지 않는다.</li>\n</ol>\n<ul>\n<li>이런 경우에도 스트리밍하고 싶은 경우에는 react에서 제공하는 <Suspense>를 별도로 활용해줘야 한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"62-스트리밍-1-페이지-스트리밍-적용하기\" style=\"position:relative;\"><a href=\"#62-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-1-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"62 스트리밍 1 페이지 스트리밍 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2) 스트리밍 1. 페이지 스트리밍 적용하기</h4>\n<ul>\n<li>특정 페이지 컴포넌트를 스트리밍 하게 설정하려면 해당 컴포넌트와 동일한 위치에 loading.tsx파일 생성\n<ul>\n<li>loading.tsx에 대체 UI역할을 할 컴포넌트 작성</li>\n<li>loading.tsx는 동일한 경로에 페이지만 스트리밍하는게 아니라 layout파일처럼 해당하는 경로 아래 모든 페이지가 스트리밍 되도록 설정된다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"63-스트리밍-2-컴포넌트-스트리밍-적용하기\" style=\"position:relative;\"><a href=\"#63-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-2-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"63 스트리밍 2 컴포넌트 스트리밍 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3) 스트리밍 2. 컴포넌트 스트리밍 적용하기</h4>\n<ul>\n<li><Suspense>태그로 스트리밍하길 원하는 컴포넌트를 감싸준다.\n<ul>\n<li>loading상태를 대체하길 원하는 UI는 Suspense의 fallback이라는 props로 컴포넌트를 전달해준다.(UI자체를 넘겨줘도 ok)</li>\n<li>Suspense를 이용하는 방식 또한 loading.tsx을 이용했던 방법과 동일하게 브라우저에서 쿼리 스트링만 변경되었을 경우에 loading상태가 표시되지 않는다.</li>\n<li>key라는 props를 전달해서 key값이 변화할 때마다 다시 loading상태로 돌아가도록 설정한다.\n<ul>\n<li>Suspense는 최초로 한번 내부 컴포넌트 로딩이 완료된 이후에는 어떠한 컨텐츠가 변경된다 하더라도 기본적으로는 새롭게 로딩상태로 돌아가지 않는다.</li>\n<li>이럴땐 key값을 줘서 쿼리스트링이 바뀔 때 마다 리액트에게 새로운 컴포넌트로 인식하도록 화면에 새롭게 그리게 설정해준거다.\n<ul>\n<li>리액트에서는 키값이 바뀌면 컴포넌트가 달라졌다, 다른 컴포넌트가 생겼다 라고 인식한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><Suspense>태그를 사용하면 병렬로 하나의 페이지에 여러개의 컴포넌트들을 완료되는 순서대로 각각 렌더링 시킬 수 있다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"63858549820823130000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export default async function Page({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{\r\n    q?: string\r\n  }>\r\n}) {\r\n  const { q } = await searchParams\r\n\r\n  return (\r\n    <Suspense key={q || ''} fallback={<div>Loading...</div>}>\r\n      <SearchResult q={q || ''} />\r\n    </Suspense>\r\n  )\r\n}\r\nexport default async function Home() {\r\n  return (\r\n    <div className={style.container}>\r\n      <section>\r\n        <h3>지금 추천하는 도서</h3>\r\n        <Suspense fallback={<BookListSkeleton count={3} />}>\r\n          <RecoBooks />\r\n        </Suspense>\r\n      </section>\r\n      <section>\r\n        <h3>등록된 모든 도서</h3>\r\n        <Suspense\r\n          fallback={\r\n            <>\r\n              <BookListSkeleton count={3} />\r\n            </>\r\n          }\r\n        >\r\n          <AllBooks />\r\n        </Suspense>\r\n      </section>\r\n    </div>\r\n  )\r\n}`, `63858549820823130000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Page</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">q</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> } = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">searchParams</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\"> </span><span class=\"mtk12\">key</span><span class=\"mtk1\">={q || </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">} </span><span class=\"mtk12\">fallback</span><span class=\"mtk1\">={&lt;div&gt;Loading...&lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">SearchResult</span><span class=\"mtk1\"> </span><span class=\"mtk12\">q</span><span class=\"mtk1\">={q || </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Home</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">container</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk10\">h3</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">지금</span><span class=\"mtk1\"> </span><span class=\"mtk12\">추천하는</span><span class=\"mtk1\"> </span><span class=\"mtk12\">도서</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h3</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\"> </span><span class=\"mtk12\">fallback</span><span class=\"mtk1\">={&lt;BookListSkeleton </span><span class=\"mtk12\">count</span><span class=\"mtk1\">={</span><span class=\"mtk7\">3</span><span class=\"mtk1\">} /&gt;}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">RecoBooks</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk10\">h3</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">등록된</span><span class=\"mtk1\"> </span><span class=\"mtk12\">모든</span><span class=\"mtk1\"> </span><span class=\"mtk12\">도서</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">h3</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">Suspense</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">fallback</span><span class=\"mtk1\">={</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              &lt;BookListSkeleton </span><span class=\"mtk12\">count</span><span class=\"mtk1\">={</span><span class=\"mtk7\">3</span><span class=\"mtk1\">} /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">AllBooks</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk12\">Suspense</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"64-스켈레톤-ui적용하기\" style=\"position:relative;\"><a href=\"#64-%EC%8A%A4%EC%BC%88%EB%A0%88%ED%86%A4-ui%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"64 스켈레톤 ui적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.4) 스켈레톤 UI적용하기</h4>\n<ul>\n<li>스켈레톤 UI : 컨텐츠가 로드되는 중에 실제 컨텐츠 대신에 보여지게 된다.\n<ul>\n<li>뼈대역할을 하는 UI</li>\n<li>실제 컨텐츠 대신에 실루엣만 보여주는 UI</li>\n</ul>\n</li>\n<li><strong>React Loading Skeleton</strong>이라는 라이브러리도 존재 (퍼블리싱이 귀찮으면 해당 라이브러리 사용하자)</li>\n</ul>\n<h4 id=\"65-에러-핸들링\" style=\"position:relative;\"><a href=\"#65-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81\" aria-label=\"65 에러 핸들링 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.5) 에러 핸들링</h4>\n<ul>\n<li><code>loading.tsx</code>처럼 error핸들링 할 <code>error.tsx</code>를 해당하는 경로에 생성한다.\n<ul>\n<li>에러 파일과 같은 경로에 있거나 하위 경로에 있는 페이지에서 오류 발생 시 page.tsx대신 화면에 출력된다.</li>\n<li>error.tsx는 클라이언트 컴포넌트로 생성해야 하는데 그 이유는 오류는 서버, 클라이언트 모두 발생할 수 있기 때문에 함께 대응할 수 있어야 하기 때문이다.</li>\n<li>현재 발생하는 에러나 메시지를 핸들링 하고 싶은 경우에는 props로 전달되는 error를 이용만 하면 된다.\n<ul>\n<li>Next는 에러 발생 시 에러 컴포넌트에게 자바스크립트 error타입의 error객체를 props로 component에 전달해준다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>props로 reset이라는 props도 전달된다.\n<ul>\n<li>에러가 발생한 페이지를 복구하기 위해서 다시한번 컴포넌트들을 렌더링 시켜보는 기능을 가진 함수</li>\n<li>기능을 만들어주더라도 클라이언트 측에서만 다시 렌더링 하기 때문에 서버측에서는 다시실행하지 않아 같은 에러 페이지 노출\n<ul>\n<li>즉, 클라이언트 내부에서 발생한 오류만 복구</li>\n<li>서버측에서 실행이 필요한 경우엔 window.location.reload()거나 router.refresh()\n<ul>\n<li>router.refresh()는 현재 페이지에 필요한 서버컴포넌트만 다시 불러옴\n<ul>\n<li>해당 함수는 비동기적으로 실행되기 때문에 startTransition()을 사용 (async - await는 사용불가 refresh함수는 반환값이 프로미스가 아닌 보이드이기 때문)\n<ul>\n<li>하나의 콜백함수를 인수로 받아 콜백함수 안에있는 UI변경 작업을 모두 일괄적으로 처리한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>reset()함수도 같이 작성하는데 그 이유는 reset()함수가 에러상태를 초기화하고, 컴포넌트를 다시 렌더링하기 때문</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"53155299835843110000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`'use client'\r\n\r\nimport { useRouter } from 'next/navigation'\r\nimport { startTransition, useEffect } from 'react'\r\n\r\nexport default function Error({\r\n  error,\r\n  reset,\r\n}: {\r\n  error: Error\r\n  reset: () => void\r\n}) {\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    console.error(error.message)\r\n  }, [error])\r\n\r\n  return (\r\n    <div>\r\n      <h2>오류가 발생했습니다.</h2>\r\n      {/* <button onClick={() => reset()}>다시 시도 </button> */}\r\n      {/* <button onClick={() => window.location.reload()}>다시 시도 </button> */}\r\n      <button\r\n        onClick={() => {\r\n          startTransition(() => {\r\n            router.refresh()\r\n            reset()\r\n          })\r\n        }}\r\n      >\r\n        다시 시도{' '}\r\n      </button>\r\n    </div>\r\n  )\r\n}`, `53155299835843110000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">&#39;use client&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useRouter</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/navigation&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">startTransition</span><span class=\"mtk1\">, </span><span class=\"mtk12\">useEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Error</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">error</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">reset</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">error</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Error</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">reset</span><span class=\"mtk1\">: () </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">router</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">useRouter</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">error</span><span class=\"mtk1\">(</span><span class=\"mtk12\">error</span><span class=\"mtk1\">.</span><span class=\"mtk12\">message</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk12\">error</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">h2</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">오류가</span><span class=\"mtk1\"> </span><span class=\"mtk12\">발생했습니다</span><span class=\"mtk1\">.&lt;/</span><span class=\"mtk12\">h2</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span><span class=\"mtk3\">/* &lt;button onClick={() =&gt; reset()}&gt;다시 시도 &lt;/button&gt; */</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span><span class=\"mtk3\">/* &lt;button onClick={() =&gt; window.location.reload()}&gt;다시 시도 &lt;/button&gt; */</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk12\">button</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">onClick</span><span class=\"mtk1\">={() =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk11\">startTransition</span><span class=\"mtk1\">(() =&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">router</span><span class=\"mtk1\">.</span><span class=\"mtk11\">refresh</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk11\">reset</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">다시</span><span class=\"mtk1\"> </span><span class=\"mtk12\">시도</span><span class=\"mtk1\">{</span><span class=\"mtk8\">&#39; &#39;</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">button</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"7-서버-액션\" style=\"position:relative;\"><a href=\"#7-%EC%84%9C%EB%B2%84-%EC%95%A1%EC%85%98\" aria-label=\"7 서버 액션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 서버 액션</h1>\n<h4 id=\"71-서버-액션이란\" style=\"position:relative;\"><a href=\"#71-%EC%84%9C%EB%B2%84-%EC%95%A1%EC%85%98%EC%9D%B4%EB%9E%80\" aria-label=\"71 서버 액션이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.1) 서버 액션이란</h4>\n<ul>\n<li>브라우저에서 호출할 수 있는 서버에서 실행되는 비동기 함수\n<ul>\n<li><strong>함수 내부에 “use server”를 붙여서 서버측에서만 실행</strong>되게 한다.</li>\n</ul>\n</li>\n<li>브라우저에서 form에 제출 이벤트가 발생했을 때 서버에서만 실행하는 함수를 브라우저가 직접 호출하면서 데이터까지 form데이터 형식으로 전달할 수 있게 해주는 기능</li>\n<li>서버액션에서는 매개변수로 formData를 인수로 받는다.</li>\n<li>FormData는 자바스크립트 내장 타입</li>\n<li>코드상에 서버 액션을 만들게 되면 자동으로 이러한 코드를 실행하는 API가 자동으로 생성된다.\n<ul>\n<li>이런 API는 브라우저에서 이러한 폼 태그를 제출했을 때 자동으로 호출된다.</li>\n</ul>\n</li>\n<li>서버 액션을 사용하는 이유\n<ul>\n<li>client component로 만들던가 별도의 API를 만들어서 호출할 수도 있는데 굳이 사용하는 이유\n<ul>\n<li><strong>코드가 매우 간결하다</strong></li>\n<li>이 서버 액션은 오직 서버측에서만 실행되는 코드</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"11548628982764564000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`function ReviewEditor() {\r\n  async function createReviewAction(formData: FormData) {\r\n    'use server'\r\n\r\n    const content = formData.get('content')?.toString()\r\n    const author = formData.get('author')?.toString()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <section>\r\n        <form action={createReviewAction}>\r\n          <input name=&quot;content&quot; placeholder=&quot;리뷰 내용&quot; />\r\n          <input name=&quot;author&quot; placeholder=&quot;작성자&quot; />\r\n          <button type=&quot;submit&quot;>작성하기</button>\r\n        </form>\r\n      </section>\r\n    </div>\r\n  )\r\n}`, `11548628982764564000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReviewEditor</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">createReviewAction</span><span class=\"mtk1\">(</span><span class=\"mtk12\">formData</span><span class=\"mtk1\">: </span><span class=\"mtk10\">FormData</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&#39;use server&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;content&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">author</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;author&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">form</span><span class=\"mtk1\"> </span><span class=\"mtk12\">action</span><span class=\"mtk1\">={</span><span class=\"mtk12\">createReviewAction</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">input</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;content&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">placeholder</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;리뷰 내용&quot;</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">input</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;author&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">placeholder</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;작성자&quot;</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">type</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;submit&quot;</span><span class=\"mtk1\">&gt;</span><span class=\"mtk12\">작성하기</span><span class=\"mtk1\">&lt;/</span><span class=\"mtk12\">button</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk12\">form</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"72-리뷰-추가-기능-구현하기\" style=\"position:relative;\"><a href=\"#72-%EB%A6%AC%EB%B7%B0-%EC%B6%94%EA%B0%80-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"72 리뷰 추가 기능 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.2) 리뷰 추가 기능 구현하기</h4>\n<ul>\n<li>action구현 후 분리</li>\n<li><code>&#x3C;input name=\"bookId\" value={bookId} hidden readOnly/></code> readOnly가 없으면 문제 hidden값에는 붙여주는게 좋다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"63568546960479265000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`'use server'\r\n\r\nasync function createReviewAction(formData: FormData) {\r\n  const content = formData.get('content')?.toString()\r\n  const author = formData.get('author')?.toString()\r\n\r\n  if (!content || !author) {\r\n    return\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(\r\n      \\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/review\\`,\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify({ bookId, content, author }),\r\n      },\r\n    )\r\n    console.log(response.status)\r\n  } catch (err) {\r\n    console.error(err)\r\n    return\r\n  }\r\n}`, `63568546960479265000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">&#39;use server&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">createReviewAction</span><span class=\"mtk1\">(</span><span class=\"mtk12\">formData</span><span class=\"mtk1\">: </span><span class=\"mtk10\">FormData</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;content&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">author</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;author&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">content</span><span class=\"mtk1\"> || !</span><span class=\"mtk12\">author</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/review`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">method:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;POST&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">body:</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stringify</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">bookId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">content</span><span class=\"mtk1\">, </span><span class=\"mtk12\">author</span><span class=\"mtk1\"> }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">status</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk15\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">err</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">error</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"73-리뷰-조회-기능-구현하기\" style=\"position:relative;\"><a href=\"#73-%EB%A6%AC%EB%B7%B0-%EC%A1%B0%ED%9A%8C-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"73 리뷰 조회 기능 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.3) 리뷰 조회 기능 구현하기</h4>\n<ul>\n<li>페이지를 리렌더링 하고싶을 때 <code>revalidatePath()</code> 사용\n<ul>\n<li>next서버가 자동으로 인수로 전달한 경로의 페이지를 재생성\n<ul>\n<li>server action의 결과를 화면에 바로 나타낼 수 있다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>revalidatePath 주의점\n<ul>\n<li>\n<ol>\n<li>revalidatePath는 오직 서버측에서만 호출할 수 있는 메서드이다.</li>\n</ol>\n<ul>\n<li>action내부에서 호출하거나 서버컴포넌트 내부에서만 호출 가능</li>\n<li>client Component에서는 호출 불가능</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>경로에 해당하는 페이지를 전부 재검증, 해당 페이지의 모든 캐시를 무효화 시킨다.</li>\n</ol>\n<ul>\n<li>데이터 캐시는 force-cache로 하더라도 전부 재검증하기 때문에 무효화, 삭제</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>풀라우트 캐시까지 함께 삭제(무효화)된다.</li>\n</ol>\n<ul>\n<li>새롭게 생성된 페이지를 캐시에 저장해주지 않음 -> 새로 접속해야 다이나믹 페이지처럼 생성이 된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"74309456399333640000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`revalidatePath(\\`/book/\\${bookId}\\`)`, `74309456399333640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidatePath</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`/book/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1273131d896981443018bd069adcc807/fa4fb/14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.263803680981596%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqklEQVR42kWR2Y6bQBBFicc2NmYzmKWhwW0MeBs78ViKFEUTRZHmNS/5/285UxBN8nCo6tuqW7eFZVkWH0wmE9JMkecFShVSc7Iso+972rYVTVEUxV/yklJpfM8fdWMMrusOPv8NrU9TzOmN/uUPev/gdrtyOBwoSxnWWqpG6wpdbnk0v/hx+k3uG2pTc7k84/s+lufYRIFHLASuI5u3MtCNCeoipdaKulRsdSE1R21C8jikzfZcqitZELFZeyShhy9eVp1GHNuGU9eyUxvqzQodO+x1QiN0puTL84n77cy537HLQ+rU4WYOkvANk65Fi8g8m40zw4qWU2IhdW0RF6TDhfuETkNMEVMlHlqoEl+MAlnmoqIFnaq4mztl7FGuXRKZjwfD4TOQitmwJQ8dVBxgJG1b5RybLS+fr3x93Lkee0kTU2cel23Ht8OrJIxGLfOXDOGsZDVnIBch9+bU8ueO5+/jk7sqpSnW0ou50EjipohkmcfV9Lwef7JXoil5sm+TDAmd+RMDK3uKa8/wlnPcETkvpqLLvT0ZGfoP3MWMYLmQ2cm/+aF/BxOHyblae2RcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1273131d896981443018bd069adcc807/a81b5/14.webp 163w,\n/static/1273131d896981443018bd069adcc807/da3ef/14.webp 325w,\n/static/1273131d896981443018bd069adcc807/309d5/14.webp 650w,\n/static/1273131d896981443018bd069adcc807/78344/14.webp 975w,\n/static/1273131d896981443018bd069adcc807/bdb72/14.webp 1300w,\n/static/1273131d896981443018bd069adcc807/e6edc/14.webp 2360w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1273131d896981443018bd069adcc807/5e043/14.png 163w,\n/static/1273131d896981443018bd069adcc807/e5cc6/14.png 325w,\n/static/1273131d896981443018bd069adcc807/663f3/14.png 650w,\n/static/1273131d896981443018bd069adcc807/d880f/14.png 975w,\n/static/1273131d896981443018bd069adcc807/4c573/14.png 1300w,\n/static/1273131d896981443018bd069adcc807/fa4fb/14.png 2360w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1273131d896981443018bd069adcc807/663f3/14.png\"\n            alt=\"14\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span>\r\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7ad1d7222bd9bafe7b658f3a44488d81/b1317/15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.533742331288344%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+0lEQVR42lVSy47TMBTNw05iJ84kTibPPtLSTh9TWlAlkJAQQrBigxAaiS07+Ai2SGzZseZDD9dOqTSLo+t77XvO9bEdx3Hgug5M9H0fXT+g7Qb0/Qxd16JpGqxWK2w2G6r1V0y7Oeb9ElXRoCgKrNd3aNvW8Ixkltjj2Dz7iP35AbPVCxyPR+z390TckwgRTaYWXT/Bcf4a755+waZ5CV1o7O/pHAk5SeBDMhcJd5FGHHVZoS4qNKTaVzcUUwxdie2yw6TOUeuEagq9LjDVNdqsgFYCZSpRUHSUCLGcTbBezIkoQxoL6CyDDEkoZIi4R7UQeSoQRwzCDBB4dl3nGkkUXGp0lgZzfJ9Bk5ouSkhJSu0dht1bMC5Gb113hDOuXdez6yTK8PzJGyihbe5d6o88HB9obBZCIM9zEtNYLBbYbreo6xp5ltNeBBWn2E/PyJS2eRiGIwdjzDZHUWSjlBKCYMgMwe1taV/PvKzJjYC0tpR4f3wgP6c2N712GPNVgiB4BM6ZFTBg7P8+JxsY7fHrORkl4IzD88x1L7aUZYnD4UD/aI1UKSQqQ1a0MHWDruuw2+1wOp0wDAOqqrIT5Teavs4regxlvf786QO+ff8Kx7CbaxsYBakqtMPZXtlAkUiaplckSWJtiWNJE8a2ZzFM8PfPT/z+9QP/AKIa8pgNzi+AAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7ad1d7222bd9bafe7b658f3a44488d81/a81b5/15.webp 163w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/da3ef/15.webp 325w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/309d5/15.webp 650w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/78344/15.webp 975w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/bdb72/15.webp 1300w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/f1645/15.webp 2256w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7ad1d7222bd9bafe7b658f3a44488d81/5e043/15.png 163w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/e5cc6/15.png 325w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/663f3/15.png 650w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/d880f/15.png 975w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/4c573/15.png 1300w,\n/static/7ad1d7222bd9bafe7b658f3a44488d81/b1317/15.png 2256w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7ad1d7222bd9bafe7b658f3a44488d81/663f3/15.png\"\n            alt=\"15\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"74-75-리뷰-재검증-구현하기-다양한-재검증\" style=\"position:relative;\"><a href=\"#74-75-%EB%A6%AC%EB%B7%B0-%EC%9E%AC%EA%B2%80%EC%A6%9D-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%9E%AC%EA%B2%80%EC%A6%9D\" aria-label=\"74 75 리뷰 재검증 구현하기 다양한 재검증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.4, 7.5) 리뷰 재검증 구현하기, 다양한 재검증</h4>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"20760192425645350000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`// 1. 특정 주소의 해당하는 페이지만 검증\r\nrevalidatePath(\\`/book/\\${bookId}\\`)\r\n\r\n// 2. 특정 경로의 모든 동적 페이지를 재검증\r\nrevalidatePath('/book/[id]', 'page')\r\n\r\n// 3. 특정 레이아웃을 갖는 모든 페이지 재검증\r\nrevalidatePath('/(with-searchbbar)', 'layout')\r\n\r\n// 4. 모든 데이터 재검증\r\nrevalidatePath('/', 'layout')\r\n\r\n// 5. 태그를 기준, 데이터 캐시 재검증\r\n// 태그값을 가지고있는 특정 패치들만 재검증된다.\r\nrevalidateTag(\\`review-\\${bookId}\\`)\r\n\r\nconst response = await fetch(\r\n  \\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/review/book/\\${bookId}\\`,\r\n  { next: { tags: [\\`review-\\${bookId}\\`] } },\r\n)`, `20760192425645350000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 1. 특정 주소의 해당하는 페이지만 검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidatePath</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`/book/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 2. 특정 경로의 모든 동적 페이지를 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidatePath</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/book/[id]&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;page&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 3. 특정 레이아웃을 갖는 모든 페이지 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidatePath</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/(with-searchbbar)&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;layout&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 4. 모든 데이터 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidatePath</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;/&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&#39;layout&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 5. 태그를 기준, 데이터 캐시 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk3\">// 태그값을 가지고있는 특정 패치들만 재검증된다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk11\">revalidateTag</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`review-</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/review/book/</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  { </span><span class=\"mtk12\">next:</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">tags:</span><span class=\"mtk1\"> [</span><span class=\"mtk8\">`review-</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">] } },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span></code></pre>\n<h4 id=\"76-클라이언트-컴포넌트에서의-서버-액션\" style=\"position:relative;\"><a href=\"#76-%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EC%97%90%EC%84%9C%EC%9D%98-%EC%84%9C%EB%B2%84-%EC%95%A1%EC%85%98\" aria-label=\"76 클라이언트 컴포넌트에서의 서버 액션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.6) 클라이언트 컴포넌트에서의 서버 액션</h4>\n<ul>\n<li>useActionState() : react19에서 추가된 react hooks\n<ul>\n<li>form 태그의 상태를 쉽게 핸들링할 수 있도록 도와주는 여러가지 기능이 있다.</li>\n<li>호출하면서 2개의 인수 전달, 첫번째는 핸들링하려는 폼의 액션함수, 두번쨰는 form상태 초기값\n<ul>\n<li>3개의 값을 반환한다.</li>\n<li>state, action, isPending (현재 실행중인지 아닌지)</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>input태그에 hidden으로 사용하고 onChange하지 않을 경우에는 readOnly로 작성해서 수정하지 않는다 명시해야한다\n<ul>\n<li>보통 input태그에는 onChange가 없으면, 사용자가 입력 필드를 편집할 수 없음</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"56579567295862800000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`'use server'\r\n\r\nimport { revalidatePath, revalidateTag } from 'next/cache'\r\nimport { delay } from '@/util/delay'\r\n\r\nexport async function createReviewAction(_: any, formData: FormData) {\r\n  const bookId = formData.get('bookId')?.toString()\r\n  const content = formData.get('content')?.toString()\r\n  const author = formData.get('author')?.toString()\r\n\r\n  if (!bookId || !content || !author) {\r\n    return {\r\n      status: false,\r\n      error: '리뷰 내용과 작성자를 입력해주세요.',\r\n    }\r\n  }\r\n\r\n  try {\r\n    await delay(2000)\r\n    const response = await fetch(\r\n      \\`\\${process.env.NEXT_PUBLIC_API_SERVER_URL}/review\\`,\r\n      {\r\n        method: 'POST',\r\n        body: JSON.stringify({ bookId, content, author }),\r\n      },\r\n    )\r\n    if (!response.ok) {\r\n      throw new Error(response.statusText)\r\n    }\r\n    console.log(response.status)\r\n\r\n    // // 1. 특정 주소의 해당하는 페이지만 검증\r\n    // revalidatePath(\\`/book/\\${bookId}\\`);\r\n\r\n    // // 2. 특정 경로의 모든 동적 페이지를 재검증\r\n    // revalidatePath(&quot;/book/[id]&quot;, &quot;page&quot;);\r\n\r\n    // // 3. 특정 레이아웃을 갖는 모든 페이지 재검증\r\n    // revalidatePath(&quot;/(with-searchbbar)&quot;, &quot;layout&quot;);\r\n\r\n    // // 4. 모든 데이터 재검증\r\n    // revalidatePath(&quot;/&quot;, &quot;layout&quot;);\r\n\r\n    // 5. 태그를 기준, 데이터 캐시 재검증\r\n    revalidateTag(\\`review-\\${bookId}\\`)\r\n    return {\r\n      status: true,\r\n      error: '',\r\n    }\r\n  } catch (err) {\r\n    console.error(err)\r\n    return {\r\n      status: false,\r\n      error: '리뷰 작성을 실패했습니다.',\r\n    }\r\n  }\r\n}\r\n\r\n;('use client')\r\n\r\nimport { useActionState, useEffect } from 'react'\r\nimport style from './review-editor.module.css'\r\nimport { createReviewAction } from '@/actions/create-review.action'\r\n\r\nexport default function ReviewEditor({ bookId }: { bookId: string }) {\r\n  const [state, formAction, isPending] = useActionState(\r\n    createReviewAction,\r\n    null,\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (state && !state.status) {\r\n      alert(state.error)\r\n    }\r\n  }, [state])\r\n\r\n  return (\r\n    <div>\r\n      <section>\r\n        <form className={style.form_container} action={formAction}>\r\n          <input name=&quot;bookId&quot; value={bookId} hidden readOnly />\r\n          <textarea\r\n            disabled={isPending}\r\n            required\r\n            name=&quot;content&quot;\r\n            placeholder=&quot;리뷰 내용&quot;\r\n          />\r\n          <div className={style.submit_container}>\r\n            <input\r\n              disabled={isPending}\r\n              required\r\n              name=&quot;author&quot;\r\n              placeholder=&quot;작성자&quot;\r\n            />\r\n            <button disabled={isPending} type=&quot;submit&quot;>\r\n              {isPending ? '...' : '작성하기'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </section>\r\n    </div>\r\n  )\r\n}`, `56579567295862800000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk8\">&#39;use server&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">revalidatePath</span><span class=\"mtk1\">, </span><span class=\"mtk12\">revalidateTag</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;next/cache&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">delay</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/util/delay&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">createReviewAction</span><span class=\"mtk1\">(</span><span class=\"mtk12\">_</span><span class=\"mtk1\">: </span><span class=\"mtk10\">any</span><span class=\"mtk1\">, </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">: </span><span class=\"mtk10\">FormData</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">bookId</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;bookId&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">content</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;content&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">author</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">formData</span><span class=\"mtk1\">.</span><span class=\"mtk11\">get</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&#39;author&#39;</span><span class=\"mtk1\">)?.</span><span class=\"mtk11\">toString</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">bookId</span><span class=\"mtk1\"> || !</span><span class=\"mtk12\">content</span><span class=\"mtk1\"> || !</span><span class=\"mtk12\">author</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">status:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">error:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;리뷰 내용과 작성자를 입력해주세요.&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">delay</span><span class=\"mtk1\">(</span><span class=\"mtk7\">2000</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">response</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">process</span><span class=\"mtk1\">.</span><span class=\"mtk12\">env</span><span class=\"mtk1\">.</span><span class=\"mtk12\">NEXT_PUBLIC_API_SERVER_URL</span><span class=\"mtk4\">}</span><span class=\"mtk8\">/review`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">method:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;POST&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">body:</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stringify</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">bookId</span><span class=\"mtk1\">, </span><span class=\"mtk12\">content</span><span class=\"mtk1\">, </span><span class=\"mtk12\">author</span><span class=\"mtk1\"> }),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (!</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ok</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk15\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk4\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Error</span><span class=\"mtk1\">(</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">statusText</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">log</span><span class=\"mtk1\">(</span><span class=\"mtk12\">response</span><span class=\"mtk1\">.</span><span class=\"mtk12\">status</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// // 1. 특정 주소의 해당하는 페이지만 검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// revalidatePath(`/book/${bookId}`);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// // 2. 특정 경로의 모든 동적 페이지를 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// revalidatePath(&quot;/book/[id]&quot;, &quot;page&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// // 3. 특정 레이아웃을 갖는 모든 페이지 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// revalidatePath(&quot;/(with-searchbbar)&quot;, &quot;layout&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// // 4. 모든 데이터 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// revalidatePath(&quot;/&quot;, &quot;layout&quot;);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 5. 태그를 기준, 데이터 캐시 재검증</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">revalidateTag</span><span class=\"mtk1\">(</span><span class=\"mtk8\">`review-</span><span class=\"mtk4\">${</span><span class=\"mtk12\">bookId</span><span class=\"mtk4\">}</span><span class=\"mtk8\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"47\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">status:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"48\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">error:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"49\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"50\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk15\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">err</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"51\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">console</span><span class=\"mtk1\">.</span><span class=\"mtk11\">error</span><span class=\"mtk1\">(</span><span class=\"mtk12\">err</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"52\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"53\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">status:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"54\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">error:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;리뷰 작성을 실패했습니다.&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"55\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"56\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"57\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"58\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"59\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">;(</span><span class=\"mtk8\">&#39;use client&#39;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"60\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"61\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">useActionState</span><span class=\"mtk1\">, </span><span class=\"mtk12\">useEffect</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;react&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"62\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> </span><span class=\"mtk12\">style</span><span class=\"mtk1\"> </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;./review-editor.module.css&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"63\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">import</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">createReviewAction</span><span class=\"mtk1\"> } </span><span class=\"mtk15\">from</span><span class=\"mtk1\"> </span><span class=\"mtk8\">&#39;@/actions/create-review.action&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"64\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"65\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk15\">default</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ReviewEditor</span><span class=\"mtk1\">({ </span><span class=\"mtk12\">bookId</span><span class=\"mtk1\"> }: { </span><span class=\"mtk12\">bookId</span><span class=\"mtk1\">: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> }) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"66\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> [</span><span class=\"mtk12\">state</span><span class=\"mtk1\">, </span><span class=\"mtk12\">formAction</span><span class=\"mtk1\">, </span><span class=\"mtk12\">isPending</span><span class=\"mtk1\">] = </span><span class=\"mtk11\">useActionState</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"67\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">createReviewAction</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"68\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">null</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"69\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"70\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"71\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk11\">useEffect</span><span class=\"mtk1\">(() </span><span class=\"mtk4\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"72\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">state</span><span class=\"mtk1\"> &amp;&amp; !</span><span class=\"mtk12\">state</span><span class=\"mtk1\">.</span><span class=\"mtk12\">status</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"73\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk11\">alert</span><span class=\"mtk1\">(</span><span class=\"mtk12\">state</span><span class=\"mtk1\">.</span><span class=\"mtk12\">error</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"74\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"75\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }, [</span><span class=\"mtk12\">state</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"76\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"77\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> (</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"78\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk10\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"79\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk10\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"80\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk12\">form</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">form_container</span><span class=\"mtk1\">} </span><span class=\"mtk12\">action</span><span class=\"mtk1\">={</span><span class=\"mtk12\">formAction</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"81\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">input</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;bookId&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">={</span><span class=\"mtk12\">bookId</span><span class=\"mtk1\">} </span><span class=\"mtk12\">hidden</span><span class=\"mtk1\"> </span><span class=\"mtk12\">readOnly</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"82\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">textarea</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"83\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">disabled</span><span class=\"mtk1\">={</span><span class=\"mtk12\">isPending</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"84\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">required</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"85\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;content&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"86\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">placeholder</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;리뷰 내용&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"87\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"88\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk12\">div</span><span class=\"mtk1\"> </span><span class=\"mtk12\">className</span><span class=\"mtk1\">={style.</span><span class=\"mtk12\">submit_container</span><span class=\"mtk1\">}&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"89\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;</span><span class=\"mtk12\">input</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"90\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">disabled</span><span class=\"mtk1\">={</span><span class=\"mtk12\">isPending</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"91\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">required</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"92\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;author&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"93\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">placeholder</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;작성자&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"94\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"95\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;</span><span class=\"mtk12\">button</span><span class=\"mtk1\"> </span><span class=\"mtk12\">disabled</span><span class=\"mtk1\">={</span><span class=\"mtk12\">isPending</span><span class=\"mtk1\">} </span><span class=\"mtk12\">type</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;submit&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"96\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              {</span><span class=\"mtk12\">isPending</span><span class=\"mtk1\"> ? </span><span class=\"mtk8\">&#39;...&#39;</span><span class=\"mtk1\"> : </span><span class=\"mtk8\">&#39;작성하기&#39;</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"97\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            &lt;/</span><span class=\"mtk12\">button</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"98\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"99\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk12\">form</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"100\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk12\">section</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"101\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk12\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"102\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"103\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h4 id=\"77-리뷰-삭제-기능-구현하기\" style=\"position:relative;\"><a href=\"#77-%EB%A6%AC%EB%B7%B0-%EC%82%AD%EC%A0%9C-%EA%B8%B0%EB%8A%A5-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0\" aria-label=\"77 리뷰 삭제 기능 구현하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.7) 리뷰 삭제 기능 구현하기</h4>\n<ul>\n<li>submit()메서드 보단 requestSubmit()을 추천\n<ul>\n<li>submit()메서드는 유효성 검사나 이벤트 핸들러들을 전부 다 무시하고 강제로 form제출을 발생시킨다. (주의해서 사용)</li>\n<li>requestSubmit()이라는 메서드는 실제로 사용자가 submit 버튼을 클릭한거와 동일하게 비교적 의도한대로 안전하게 동작</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"8-고급-라우팅-패턴\" style=\"position:relative;\"><a href=\"#8-%EA%B3%A0%EA%B8%89-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%8C%A8%ED%84%B4\" aria-label=\"8 고급 라우팅 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 고급 라우팅 패턴</h1>\n<h4 id=\"81-페러렐-라우트\" style=\"position:relative;\"><a href=\"#81-%ED%8E%98%EB%9F%AC%EB%A0%90-%EB%9D%BC%EC%9A%B0%ED%8A%B8\" aria-label=\"81 페러렐 라우트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.1) 페러렐 라우트</h4>\n<ul>\n<li>Parallel Route : 병렬 라우트\n<ul>\n<li>하나의 화면안에 여러개의 페이지(Page.tsx)를 병렬로 함께 렌더링\n<ul>\n<li>ex) sns, 관리자 페이지</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>이름앞에 골뱅이 표시가 붙은 폴더를 <code>슬롯</code>이라 한다.\n<ul>\n<li>슬롯이 하는 역할은 병렬로 렌더링 될 하나의 페이지 컴포넌트를 보관하는 폴더</li>\n<li>슬롯안에 보관된 페이지 컴포넌트는 부모 레이아웃 컴포넌트의 props로 자동으로 전달된다.</li>\n<li>Slot(슬롯)은 URL 경로에는 아무런 영향을 미치지 않는다.</li>\n<li>Slot은 몇개가 되도 상관이 없다.</li>\n<li>하위 폴더에 폴더를 만들고 페이지를 만들면 layout에 속해 하위 페이지로 생성된다.\n<ul>\n<li>해당 컴포넌트만 교체되는 형식</li>\n<li>이렇게 이전의 페이지가 유지가 되는 건 <code>Link컴포넌트</code>를 이용해서 브라우저측에서 클라이언트 렌더링 방식으로 이동할 때만 한정(새로고침하면 404에러)\n<ul>\n<li>방지하기 위해선 슬롯별로 현재 렌더링 하는 페이지가 없을 때 대신 렌더링 할 디폴트 페이지를 만들면 된다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>Layout에 제공되는 Children페이지 또한 @Children안에 있는 페이지 컴포넌트라 봐도 똑같다.\n<ul>\n<li>매번 만들면 귀찮을 수도 있기 때문에 슬롯을 만들지 않고 일반적인 페이지 봐도 무방</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"82-인터셉팅-라우트\" style=\"position:relative;\"><a href=\"#82-%EC%9D%B8%ED%84%B0%EC%85%89%ED%8C%85-%EB%9D%BC%EC%9A%B0%ED%8A%B8\" aria-label=\"82 인터셉팅 라우트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.2) 인터셉팅 라우트</h4>\n<ul>\n<li>사용자 요청을 가로채서 원래 렌더링 되야하는 페이지가 아닌 원하는 어떤 페이지를 대신 렌더링하도록 설정하는 라우팅 패턴</li>\n<li>초기설정이 아닐 경우에만 인터셉팅 라우트가 동작\n<ul>\n<li>Link컴포넌트나 Router에서 제공하는 push같은 클라이언트 사이드 방식으로 페이지를 이동할 때만 인터셉팅이 일어난다.</li>\n</ul>\n</li>\n<li>ex) 인스타그램 - 상세 페이지 누르면 모달형태(client rendering / 인터셉팅 라우트), 새로고침 시 해당 페이지로 이동</li>\n<li><code>(.)book[id]</code> 같은 형태로 작성\n<ul>\n<li>(.)동일한 레벨 의 세그먼트를 일치시키려면</li>\n<li>(..)한 단계 위의 세그먼트와 일치시키려면</li>\n<li>(..)(..)두 레벨 위의 세그먼트와 일치시키려면</li>\n<li>(…)루트 app 디렉토리 의 세그먼트와 일치시키려면</li>\n</ul>\n</li>\n<li>modal구현\n<ul>\n<li>createPortal() 사용\n<ul>\n<li>브라우저에 존재하는 DOM요소 아래에 고정적으로 Modal요소를 렌더링 하도록 설정</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"83-패럴랠--인터셉팅-라우트\" style=\"position:relative;\"><a href=\"#83-%ED%8C%A8%EB%9F%B4%EB%9E%A0--%EC%9D%B8%ED%84%B0%EC%85%89%ED%8C%85-%EB%9D%BC%EC%9A%B0%ED%8A%B8\" aria-label=\"83 패럴랠  인터셉팅 라우트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.3) 패럴랠 &#x26; 인터셉팅 라우트</h4>\n<ul>\n<li>모달 뒷부분에 index페이지를 노출하고 싶은 경우\n<ul>\n<li>slot활용</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"9-최적화와-배포\" style=\"position:relative;\"><a href=\"#9-%EC%B5%9C%EC%A0%81%ED%99%94%EC%99%80-%EB%B0%B0%ED%8F%AC\" aria-label=\"9 최적화와 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 최적화와 배포</h1>\n<h4 id=\"91-이미지-최적화\" style=\"position:relative;\"><a href=\"#91-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%B5%9C%EC%A0%81%ED%99%94\" aria-label=\"91 이미지 최적화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.1) 이미지 최적화</h4>\n<ul>\n<li>Next에서는 자체적으로 이미지 최적화가 적용되어 있다.\n<ul>\n<li>webp, AVIF등의 차세대 형식으로 변환하기 (jpeg같은 포맷 대신)</li>\n<li>디바이스 사이즈에 맞는 이미지 불러오기\n<ul>\n<li>image의 width와 height를 명시해줘야 하는데 이유는 필요이상으로 큰 이미지를 불러오지 않을 수 있도록 설정</li>\n</ul>\n</li>\n<li>레이지 로딩 적용</li>\n<li>블러 이미지 활용</li>\n<li>기타 등등</li>\n</ul>\n</li>\n<li>설정을 해주면 에러가 나는데 <code>next.config.js</code>에 특정 경로들은 안전하다고 선언해줘야 한다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"81761401367463070000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`import type { NextConfig } from &quot;next&quot;;\r\n\r\nconst nextConfig: NextConfig = {\r\n  /* config options here */\r\n  experimental: {\r\n    typedRoutes: false,  // ← 이걸 통해 타입 충돌 완화 가능\r\n    // fetch instrumentation은 아직 공식 도큐먼트엔 없음\r\n  },\r\n  logging: {\r\n    fetches: {\r\n      fullUrl: true,\r\n    }\r\n  },\r\n  images: {\r\n    domains: [&quot;shopping-phinf.pstatic.net&quot;]\r\n  }\r\n};\r\n\r\nexport default nextConfig;`, `81761401367463070000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">import type { </span><span class=\"mtk14\">NextConfig</span><span class=\"mtk1\"> } from </span><span class=\"mtk8\">&quot;next&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">const nextConfig: NextConfig = {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">/* config options here */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk14\">experimental</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk14\">typedRoutes</span><span class=\"mtk1\">: </span><span class=\"mtk4\">false</span><span class=\"mtk1\">,  </span><span class=\"mtk3\">// ← 이걸 통해 타입 충돌 완화 가능</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// fetch instrumentation은 아직 공식 도큐먼트엔 없음</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk14\">logging</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk14\">fetches</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk14\">fullUrl</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk14\">images</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk14\">domains</span><span class=\"mtk1\">: [</span><span class=\"mtk8\">&quot;shopping-phinf.pstatic.net&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">export default nextConfig;</span></span></span></code></pre>\n<h4 id=\"92-검색-엔진-최적화seo\" style=\"position:relative;\"><a href=\"#92-%EA%B2%80%EC%83%89-%EC%97%94%EC%A7%84-%EC%B5%9C%EC%A0%81%ED%99%94seo\" aria-label=\"92 검색 엔진 최적화seo permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9.2) 검색 엔진 최적화(SEO)</h4>\n<ul>\n<li>검색엔진 최적화(SEO)\n<ul>\n<li>sitemap설정하기</li>\n<li>rss발행하기</li>\n<li>시멘틱 태그 설정하기</li>\n<li>메타 데이터 설정하기</li>\n</ul>\n</li>\n<li>index페이지에서 metadata라는 변수를 선언해서 export로 내보내주면 metadata로 설정된 값이 자동으로 index페이지의 metadata로 설정된다.\n<ul>\n<li>slash뒤에 정적인 image file을 적어주면 public directory아래를 가르키게 된다.</li>\n</ul>\n</li>\n<li>동적인 값을 활용해서 메타데이터를 설정하는 경우엔 generateMetadata()로 메타데이터를 내보낸다.\n<ul>\n<li>매개변수를 전달받을 수 있어서 페이지 컴포넌트와 동일하게 값을 받아온다.</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"24447375491796808000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`export const metadata: Metadata = {}\r\n\r\nexport async function generateMetadata({\r\n  searchParams,\r\n}: {\r\n  searchParams: Promise<{ q?: string }>\r\n}): Promise<Metadata> {\r\n  const { q } = await searchParams\r\n\r\n  return {\r\n    title: \\`\\${q} : 한입북스 검색\\`,\r\n  }\r\n}`, `24447375491796808000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"typescript\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> </span><span class=\"mtk12\">metadata</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Metadata</span><span class=\"mtk1\"> = {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk15\">export</span><span class=\"mtk1\"> </span><span class=\"mtk4\">async</span><span class=\"mtk1\"> </span><span class=\"mtk4\">function</span><span class=\"mtk1\"> </span><span class=\"mtk11\">generateMetadata</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">searchParams</span><span class=\"mtk1\">: </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;{ </span><span class=\"mtk12\">q</span><span class=\"mtk1\">?: </span><span class=\"mtk10\">string</span><span class=\"mtk1\"> }&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}): </span><span class=\"mtk10\">Promise</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Metadata</span><span class=\"mtk1\">&gt; {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">const</span><span class=\"mtk1\"> { </span><span class=\"mtk12\">q</span><span class=\"mtk1\"> } = </span><span class=\"mtk15\">await</span><span class=\"mtk1\"> </span><span class=\"mtk12\">searchParams</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">title:</span><span class=\"mtk1\"> </span><span class=\"mtk8\">`</span><span class=\"mtk4\">${</span><span class=\"mtk12\">q</span><span class=\"mtk4\">}</span><span class=\"mtk8\"> : 한입북스 검색`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>Tip!!</p>\n<ul>\n<li>react에서 일반 변수와 state 사용 차이점\n<ul>\n<li>일반 변수는 값만 저장됨</li>\n<li>useState로 만든 state는 값 + 자동 리렌더링이 같이 작동</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://www.inflearn.com/course/%ED%95%9C%EC%9E%85-%ED%81%AC%EA%B8%B0-nextjs/dashboard\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">한 입 크기로 잘라먹는 Next.js(v15)</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk14 { color: #F44747; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li><a href=\"#1-nextjs-%EC%86%8C%EA%B0%9C\">1. Next.js 소개</a></li>\n<li><a href=\"#2-page-router-%ED%95%B5%EC%8B%AC-%EC%A0%95%EB%A6%AC\">2. Page Router 핵심 정리</a></li>\n<li><a href=\"#3-app-router-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">3. App Router 시작하기</a></li>\n<li><a href=\"#4-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8E%98%EC%B9%AD\">4. 데이터 페칭</a></li>\n<li><a href=\"#5-%ED%8E%98%EC%9D%B4%EC%A7%80-%EC%BA%90%EC%8B%B1\">5. 페이지 캐싱</a></li>\n<li><a href=\"#6-%EC%8A%A4%ED%8A%B8%EB%A6%AC%EB%B0%8D%EA%B3%BC-%EC%97%90%EB%9F%AC-%ED%95%B8%EB%93%A4%EB%A7%81\">6. 스트리밍과 에러 핸들링</a></li>\n<li><a href=\"#7-%EC%84%9C%EB%B2%84-%EC%95%A1%EC%85%98\">7. 서버 액션</a></li>\n<li><a href=\"#8-%EA%B3%A0%EA%B8%89-%EB%9D%BC%EC%9A%B0%ED%8C%85-%ED%8C%A8%ED%84%B4\">8. 고급 라우팅 패턴</a></li>\n<li><a href=\"#9-%EC%B5%9C%EC%A0%81%ED%99%94%EC%99%80-%EB%B0%B0%ED%8F%AC\">9. 최적화와 배포</a></li>\n<li><a href=\"#reference\">Reference</a></li>\n</ul>","frontmatter":{"title":"한입 크기로 잘라먹는 Next.js","summary":["한입 크기로 잘라먹는 Next.js"],"date":"2025.04.17.","update":"2025.04.17.","category":["React"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC8UlEQVR42n2Uy2tTURCHo/VVa1vX1Z0Ldedj4R9QRNB1FtKSe+5JmoBSW1eFtpilr4WPoktBRISACF3ZRZGG+ioBu2ib3EeSmmofFBSR0tx7z+04v5PWJj56YbhzZ76Ze86cmROJbD5pot14m65KmlbwXhT8F6YdTJi26t5ioAu2aR8zYOtjtx+iXXgZZTogS+Fkskwn8C3mvDNmwcsaVnUIYtpeFjb4wIBFTH2OhoQJe+2o6ajxZI4O9tob+2GTk6utqUVVSi2FxSszdAg2+MCATVXoyH8Tyjx18DYmrleoeXubfj9v/WFN/P4tOxiwMr/W0ZiQlfQb2gM1OkP7+K9jwgkuGIX1Tmmrvp7F8Kd0gicQrbNNuuudYMAiRtcROZA0na4VVM56p4Xl3ZNFtWK6Qc60/OeJSvhdumrAtNRliHT9gcTCxjf4wIDVMRyrkyIXTkhYwW3e0seY7ZnS9tPxz+EtwSth2wjAmE3HILUSBCPwgYm76gZiEIsc+rSlowaF5b/qnl5q0Sf9iQ7zn3O8stlojtpjlheLl4kg0LtsaoMPDFjEIBY5kCuSXAxfmwt0bvNQWvVpz6uXvN1n0FPLNNrzhQgCXfvZB6Y+Jsk5kCsiXDVsWP5o9zTpFSaL1K5XWFRzcpVauUZGYp4IAh02WWIfM2BrK6QWruuosNRwJJqhJt7/Ta7DlHBUwnT8oXg5vGsU/KumE9yvraJ6HKJryDb4wIA1LK9Hx3KOaCbT9Hts2HFKFLw7XIcVbocp7rFM8mv4Qzr+oLA9CYEOG3xgwCIGsdsj2NCHM9yH/phwg4s8s+e5FL2JBYU+fACBDlvNV70EFjENffjXpDhBtn5SRN7v49o9Zvsj7sVrDZPCLGJ2nGUu9nj0XaWZZ3UvbF0fNtpSy2EJAl0fHPvAgN1xlnFzxMvqbbxcPal/4PpneXuT3GPDWliHDT4wYP9929TdaRyY4lPLikLwlO+/cZn3urYY6LDxffhUM8z+eR/+AiOWr7cCI79XAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/776fd8269417774ef8b29304781e5277/58965/thumbnail.png","srcSet":"/static/776fd8269417774ef8b29304781e5277/f2b36/thumbnail.png 300w,\n/static/776fd8269417774ef8b29304781e5277/593fb/thumbnail.png 600w,\n/static/776fd8269417774ef8b29304781e5277/58965/thumbnail.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/776fd8269417774ef8b29304781e5277/245d6/thumbnail.webp 300w,\n/static/776fd8269417774ef8b29304781e5277/0691f/thumbnail.webp 600w,\n/static/776fd8269417774ef8b29304781e5277/54513/thumbnail.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":1043}},"publicURL":"/static/776fd8269417774ef8b29304781e5277/thumbnail.png"}}}}]}},"pageContext":{"slug":"/next/","series":[],"lastmod":"2025.04.17.","prev":{"fields":{"slug":"/react/"},"frontmatter":{"title":"한입 크기로 잘라먹는 리액트","date":"2025.04.15.","update":"2025.04.15.","category":["React"],"tags":["React"],"summary":["한입 크기로 잘라먹는 리액트 정리"]}},"next":{"fields":{"slug":"/Typescript/"},"frontmatter":{"title":"Typescript 톺아보기","date":"2025.04.30.","update":"2025.04.30.","category":["Front"],"tags":["Front"],"summary":["Typescript 공식문서, 한 입 크기로 잘라먹는 타입스크립트 강의 정리"]}}}},"staticQueryHashes":["427104293"],"slicesMap":{}}