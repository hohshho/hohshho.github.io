{"componentChunkName":"component---src-templates-post-tsx","path":"/Docker_1/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"75138e4f-96fb-504a-b2c5-a9a794d24eb2","html":"<p>여러 기업들은 자사에서 데이터센터나 기계실을 보유하여 온프레미스 환경에서 가동시키던 부분을</p>\n<p>효율적인 자원 활용을 위해 클라우드 상의 가상 인스턴스로 옮기고 시스템을 구축한다</p>\n<p>또한 확장성을 고려해 MSA(Micro Service Architecture) 아키텍처를 적용하며</p>\n<p>여러개의 나뉘어진 App을 하나의 Application 처럼 동작할 수 있게 시스템을 구축한다.</p>\n<p>이와같은 분산환경을 적용하면 아래와 같은 장점이 있다.</p>\n<ol>\n<li>\n<p>개별 서비스가 다른 서비스에 영향을 주지 않으면서 작동 (높은 가용성)</p>\n</li>\n<li>\n<p>향후 확장 및 새로운 기능 추가 용이 (높은 확장성)</p>\n</li>\n<li>\n<p>개발자들이 각각의 서비스를 파악하고 개선하기에 용이해짐 (편리한 엑세스)</p>\n</li>\n<li>\n<p>기존 모놀로식 방법에 비해 배포에 따른 우려사항들이 적어짐</p>\n</li>\n</ol>\n<p>기존 <a href=\"https://www.redhat.com/en/topics/virtualization/what-is-a-virtual-machine\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">VM (Virtual Machine)</a>으로도 MSA환경을 구축할 수 있지만</p>\n<p>컴퓨터를 가상화하는 기술이 발전하고 점점 가벼워지면서 컨테이어 기술은 더욱더 인기가 많아지고 있다.</p>\n<p>VM은 <a href=\"https://www.redhat.com/ko/topics/virtualization/what-is-a-hypervisor\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">하이퍼바이저</a>를 사용해 각 머신별로 독립적인 하드웨어 자원을 제공하고</p>\n<p>그 자원위에 별도의 OS를 띄운다.</p>\n<p>컨테이너는 동일한 OS커널(호스트)을 사용하여 운영된다.</p>\n<p>그럼 효율적인 인프라 구성을 위해 컨테이너의 대표 기술인 도커에 대해 알아보자</p>\n<h1 id=\"container\" style=\"position:relative;\"><a href=\"#container\" aria-label=\"container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Container</h1>\n<blockquote>\n<p>소프트웨어 서비스를 실행하는 데 필요한 1. 특정 버전의 프로그래밍 언어 런타임 및 2. 라이브러리와 같은 종속 항목과 3. 애플리케이션 코드를 함께 포함하는 <strong>경량 패키지</strong></p>\n</blockquote>\n<ul>\n<li>이미지를 기반으로 하는 격리된 소프트웨어 유닛, 이미지를 실행중인 인스턴스</li>\n<li>중요한 특징으로 컨테이너는 서로 분리되어 있으며, 디폴트로 공유 데이터나 상태가 없다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1880890c4d14ce4cfba0cfa70b5aeb1b/46d5f/VMvsDocker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.05521472392638%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACRElEQVR42oWS7U/SURTH/d9qqxfNtWo6W9qTTBqCkBAKv0RISmQ+MhXJ0uZ6UVs6q1ctrbWVgvKYbeEbaRMMSAFdCE79tHsdtRZbZ7v33HvuvZ/zPXenBqBUKhGLRohGwnxZixEOrkofCQWJx7/yfWsL//ISa7EYoeAK4dAqa5+j+Jc+kUomBYLj42Ppa8SUy+UwG/UY9VqUThM6TQtK5x3aNGoG3L3MvnhO7dnTaNUqrtRfpKmhjla1inNnTjE/NytBxeLPP8B8PodG3UzLjSba9VqaLtdJ+PXGBhw2hZfzczRcOo/RoEN1rZGWm1cxGrTUX6jl9at5WWGhUDgBCqk7OzvYrB2Yb7fRrXRiMmixKxbadRo8g/0svn2D7pYKR5cVi6kdq9mIvctKq7qZ94sLEnR0dHQCLJXL/Mhm8Y166H/Qg9czzPTkBOOeIVw9dp49nWHVv0xfj50hdy9TPi+PJ8YYdrtw3esmGg79DRTTbqGAs/sutg4T9+1dDLicOG0KFqMB39gIH94tYNZrZcztdEi4Q7HIWGDpYxXg7i6+MY/MPuUbZ2ZqksnxUbwjg1JhcMXPSH8fTx75mH7olUOoHOzrra5QbLLZLJubm+TzeQ4ODuRHi+8Qtre3J8+KxSLlcvn3EPcq7VIxCTw8PCQajRIIBNjYSJDOZEgmkyQSCflAJIlEIsTjcRlPpVKk02lZWVWgCFayVi4IXylD9On6+jrfEgkJymQysqLt7W0p5h/g/2x/f1+qFIpEi4m1SFJN4S/6q9m0Agde1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1880890c4d14ce4cfba0cfa70b5aeb1b/a81b5/VMvsDocker.webp 163w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/da3ef/VMvsDocker.webp 325w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/309d5/VMvsDocker.webp 650w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/78344/VMvsDocker.webp 975w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/bdb72/VMvsDocker.webp 1300w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/09a89/VMvsDocker.webp 1364w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1880890c4d14ce4cfba0cfa70b5aeb1b/5e043/VMvsDocker.png 163w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/e5cc6/VMvsDocker.png 325w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/663f3/VMvsDocker.png 650w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/d880f/VMvsDocker.png 975w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/4c573/VMvsDocker.png 1300w,\n/static/1880890c4d14ce4cfba0cfa70b5aeb1b/46d5f/VMvsDocker.png 1364w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1880890c4d14ce4cfba0cfa70b5aeb1b/663f3/VMvsDocker.png\"\n            alt=\"VMvsDocker\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Container와 VM을 비교해보면 다음과 같은 특성이 있다.</p>\n<ul>\n<li>컨테이너는 VM보다 경량화 되어있다.</li>\n<li>컨테이너는 OS수준에서 가상화 되고, VM은 하드웨어 수준에서 가상화 된다.<br>\n-> 메모리, CPU 등 효율적인 자원 사용</li>\n<li><strong>Linux커널과 Cgroups 및 네임스페이스 등 커널의 기능</strong>을 사용해 프로세스를<br>\n분리함으로써 <strong>독립적으로 실행</strong>할 수 있다.</li>\n<li>컨테이너는 OS커널을 공유하며 VM에 필요한 것보다 적은 메모리 사용</li>\n<li>컨테이너는 무상태 (Volume에 할당되어 있으면 로컬 호스트 머신의 폴더로 미러링 하거나 복사 가능)</li>\n</ul>\n<p>이러한 컨테이너의 장점 때문에 Linux Container기술이 발전 했지만</p>\n<p>Linux Container 컨테이너 기술은 사용하기 어렵고 대중화하기에는 한계가 있었다.</p>\n<p>이러한 기술을 도입하기 편리하게 개발된 기술이 <strong>Docker</strong>이다.</p>\n<h1 id=\"lxc-vs-docker\" style=\"position:relative;\"><a href=\"#lxc-vs-docker\" aria-label=\"lxc vs docker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>LXC vs Docker</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ed53fa7cfb5516e1a2def4ffa45321d6/161f7/LXCvsDocker.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.331288343558285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACI0lEQVR42jWPW0jTcRTHR0Qg9Fb0WmQYRGr5kHnNLJUEQafE2Erpoj0UPYSVJprShaTHoNKHPUUPXbS8lKZjYstKG0Le6mHepq7//v/Nbbr2t/7/fWI/14ED53zP93zP+RqIhx6NooTWWJQV5iQvbsXHkuJDDgYJrIeRVgO4PL/EXA6GUEIhPP5VMYvt/g9DjGi12ekZc/LC8ZmHnd1Mu5cIqyrBcJjnww7a+gexDtpZ8MqsRyLiUFv/AE/eD/Bq5IsQ+qtpQtjgmP7BlgoLGXWN5DfdYWuFBfvElCBpepSuUSfpdY2k1dbz4PVbgUdUldaOLlKv3SSzvol3zvFNvqZtCm63nCenoYWC5vskmKqwfZ8UhFBEhSh0jzk53nyPlOsNPOq38UfT0HSd1jfdpN+6TXpDC4OTM5uWJ+YXxJXqx+1cbrdytK6Jcddc/EMddWND1F2TM9zoHaC25wOj84sC+62qPB0ZE9hd2zDyehiDzfGJ7FIjBSYzhSYzmSWl9NmHxEJwbQ3zlaucOG2i+GwVxWcqMV6oobz6EsaLNaI/ZamkpOocOWXlfPw6iuFlTy8JiUnsTD7EjoOpbNuTyLOOTiHoDwTIKi1j95EM9mXlkpRzjLSiYpJPFpJSUMSBvHz2ZmazPzePXamH6RsawhCzpPj8uNxLuNzLyD4/kbhNXdfxKgoeScLj9SLJMvPLK3yb+cnU7CxeWRZ4LFckCVVV+Qc57u7jPY0GVAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/ed53fa7cfb5516e1a2def4ffa45321d6/a81b5/LXCvsDocker.webp 163w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/da3ef/LXCvsDocker.webp 325w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/309d5/LXCvsDocker.webp 650w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/78344/LXCvsDocker.webp 975w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/74e35/LXCvsDocker.webp 1250w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/ed53fa7cfb5516e1a2def4ffa45321d6/5e043/LXCvsDocker.png 163w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/e5cc6/LXCvsDocker.png 325w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/663f3/LXCvsDocker.png 650w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/d880f/LXCvsDocker.png 975w,\n/static/ed53fa7cfb5516e1a2def4ffa45321d6/161f7/LXCvsDocker.png 1250w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/ed53fa7cfb5516e1a2def4ffa45321d6/663f3/LXCvsDocker.png\"\n            alt=\"LXCvsDocker\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Linux Container(LXC)는 단일 컨트롤 호스트 상에서 여러개의 고립된 리눅스 시스템 (컨테이너)들을 실행하기 위한 OS 레벨 가상화 기술이다.</p>\n<p>Docker는 단일 애플리케이션을 실행하는데 중점을 둔 컨테이너 기술이다.</p>\n<p>세분화된 접근 방식에 의해 크게 2가지 차이점이 나타난다.</p>\n<ul>\n<li>Docker는 네트워크, 스토리지, 로깅 등 머신별 설정에 대한 추상화 제공한다.</li>\n<li>Docker 컨테이너는 컨테이너당 단일 프로세스를 실행하도록 만들어 졌다.</li>\n</ul>\n<p>추가로 더 자세히 정리된 링크 남긴다.</p>\n<p><a href=\"https://www.redhat.com/ko/topics/containers/whats-a-linux-container\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Linex컨테이너란? - Red Hat</a><br>\n<a href=\"https://earthly.dev/blog/lxc-vs-docker/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Table of contents LXC vs Docker: Which Container Platform Is Right for You?</a><br>\n<a href=\"http://www.opennaru.com/openshift/container/what-is-the-difference-between-docker-lxd-and-lxc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker 그리고 Linux 컨테이너 기술들</a></p>\n<h1 id=\"docker\" style=\"position:relative;\"><a href=\"#docker\" aria-label=\"docker permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker</h1>\n<p>그럼 이제부터 Docker에 대해 자세히 알아보자</p>\n<blockquote>\n<p>Docker Inc.에 의해 개발 된 Go 언어로 작성된 소프트웨어로 컨테이너를 생성하고 관리하기 위한 도구이다.</p>\n</blockquote>\n<p>Docker를 실행 하면 Docker Engine이라는</p>\n<p>컨테이너를 구축 및 실행하는 오픈 소스 호스트 소프트웨어가 실행되며</p>\n<p>이 위에 Libraries, Dependencies, Tools, App이 실행 된다.</p>\n<p>도커를 사용하면 아래와 같은 장점을 가진다.</p>\n<ul>\n<li>Docker Engine을 이용하기 때문에 <strong>호스트 운영체제의 영향을 받지 않음</strong></li>\n<li>설정 파일(Dockerfile)로 동일한 환경을 가지기 때문에 <strong>공유, 재구축 및 배포가 매우 쉬움</strong></li>\n<li>설정 파일을 통한 <strong>이미지 버전 관리</strong></li>\n<li>이미지가 레이어 구조를 가지기 때문에 <strong>차분 빌드가 가능</strong></li>\n<li>다양한 기능의 API (Docker API를 이용하여 관리 App 개발 가능)</li>\n<li>Docker registry를 사용해 이미지 관리(저장, 배포) 가능 (public, private)</li>\n</ul>\n<h2 id=\"images--containers\" style=\"position:relative;\"><a href=\"#images--containers\" aria-label=\"images  containers permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Images &#x26; Containers</h2>\n<p>Docker의 핵심 요소인 Image와 Container에 대해 정리해보자</p>\n<h4 id=\"image\" style=\"position:relative;\"><a href=\"#image\" aria-label=\"image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Image</h4>\n<blockquote>\n<ol>\n<li>모든 설정 명령과 2. 모든 코드가 포함된 공유 가능한 패키지</li>\n</ol>\n</blockquote>\n<p>docker의 이미지를 registry를 통해 검색할 수 있는데 default 주소는 dockerhub이다.<br>\n(docker search 명령어를 통해 검색)</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"70544333138808570000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker search {검색 할 레지스트리 명} --filter=stars=10\n\n# --filter=stars=n : star 수가 n개 이상인 결과만 표시`, `70544333138808570000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker search {검색 할 레지스트리 명} --filter=stars=10</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># --filter=stars=n : star 수가 n개 이상인 결과만 표시</span></span></span></code></pre>\n<p>Image는 name : tag로 나뉘어 있는데</p>\n<p>name 부분은 image의 이름을 나타내고</p>\n<p>tag는 이미지의 버전을 기록한다.</p>\n<h4 id=\"container-1\" style=\"position:relative;\"><a href=\"#container-1\" aria-label=\"container 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Container</h4>\n<blockquote>\n<p>이미지의 구체적인 실행 인스턴스</p>\n</blockquote>\n<p>Container에서 구동시킬 Image는 Container Repository에서 docker pull로 다운로드 되거나</p>\n<p>DockerFile을 참조해 <em>docker build</em> 명령어로 커스텀 이미지를 생성한다.</p>\n<p>DockerFile엔 자체 이미지를 빌드할 때 실행하려는 도커에 대한 명령이 포함한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"30062335794418217000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`FROM {image name} # 이름 지정\n\nWORKDIR # 명령어를 수행 할 디렉토리 지정\n\nCOPY {이미지의 외부 경로} {이미지 내부 경로} # 어떤 파일이 이미지에 들어가는지 설정 (절대 경로가 좋다)\n\nEXPOSE # 로컬 시스템에 노출 시킬 포트 설정\n\nRUN # 실행 할 명령어\n`, `30062335794418217000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> {image name} # 이름 지정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">WORKDIR</span><span class=\"mtk1\"> # 명령어를 수행 할 디렉토리 지정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">COPY</span><span class=\"mtk1\"> {이미지의 외부 경로} {이미지 내부 경로} # 어떤 파일이 이미지에 들어가는지 설정 (절대 경로가 좋다)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">EXPOSE</span><span class=\"mtk1\"> # 로컬 시스템에 노출 시킬 포트 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> # 실행 할 명령어</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"></span></span></code></pre>\n<p>DockerFile에서 RUN, CMD, ENTRYPOINT 3가지 명령어가 비슷한 역할을 해 헷갈릴 수 있는데</p>\n<p>RUN 명령어는 <strong>새로운 layer를 생성하거나, 생성된 layer 위에서 command를 실행</strong> 하고</p>\n<p>주로 라이브러리 설치 하는데 사용</p>\n<p>CMD 명령어는 <strong>docker가 실행될때 실행되는 명령어 정의</strong>한다.</p>\n<p>만약 docker run 으로 실행될 때 사용자가 직접 실행할 명령어를 입력하면 CMD의 명령어는 실행되지 않는다.</p>\n<p>여러번 사용 가능하지만 가장 마지막 CMD만 남는다 (오버라이딩)</p>\n<p><a href=\"https://blog.naver.com/freepsw/220982529575\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[docker] RUN vs CMD vs ENTRYPOINT - freepsw</a></p>\n<p>위의 글을 참고해서 한줄 요약헤보면</p>\n<p>docker run 명령어로 실행시</p>\n<p>Docker는 모든 명령어를 기반으로 하는 이미지 레이어 생성 -> 모든 명령 결과를 캐시</p>\n<p>다시 빌드할 때 변경사항이 없으면 캐시 된 내용을 사용해 실행한다.<br>\n-> <strong>레이어 기반 아키텍처</strong> 라 한다.</p>\n<hr>\n<p>레이어 기반 아키텍처를 자세히 이해하기 전에 UFS에 대해 잠깐 알아보고 가자</p>\n<h4 id=\"union-file-system\" style=\"position:relative;\"><a href=\"#union-file-system\" aria-label=\"union file system permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Union File System</h4>\n<p>Docker의 이미지는 Union File System기반으로 동작하는</p>\n<p><strong>Storage Driver</strong>에 의해 파일 시스템으로 복수의 <em>Layer</em>가 구현된다.<br>\n(Storage Driver가 파일 I/O 수행)</p>\n<p><strong>UFS란, 여러 개의 파일 시스템을 merge된 하나의 파일 시스템에 마운트 하는 기능</strong>이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/00a327d9af70e21f4f36ad3f67700cb3/13727/OverlayDriver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.153374233128833%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABIUlEQVR42jWQ6UrDUBBG8/7PIAiVFmMXY9VnEMQXSJrkZrlLk5ulTdpaq3gkUX988DFwZjjjGGPI8xzf94miEJEkqKImlYZm36O2Fl1UNLueJNfYZkdZt+S6oO2ORCIdWa01VVXhhGFIWZZjrLWU1lK1PUXT0fVHVFGRmYrucMTUHbv+SFnvxlnb9Wz/uGGhUgonjmOKoiCKIoQQpFnG/vTB5RtypZm5c6buAmkMF6A/nVmsPK6uJ7y8vqHMlnCzGS0HWycIAipr+VcfrkSZJkgUIlP4UUIQp79dKOLcUDb7MbbtUNogpRzZLMtwhtK2LTKX4y+ESJjfPzKZ3rLy1rjzJXfLe7yHJ25mLt76mdP5wvnzi8P7hThJCcMNUqpR/QcJx2oaJhSZvgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/00a327d9af70e21f4f36ad3f67700cb3/a81b5/OverlayDriver.webp 163w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/da3ef/OverlayDriver.webp 325w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/309d5/OverlayDriver.webp 650w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/78344/OverlayDriver.webp 975w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/bdb72/OverlayDriver.webp 1300w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/27be8/OverlayDriver.webp 1848w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/00a327d9af70e21f4f36ad3f67700cb3/5e043/OverlayDriver.png 163w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/e5cc6/OverlayDriver.png 325w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/663f3/OverlayDriver.png 650w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/d880f/OverlayDriver.png 975w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/4c573/OverlayDriver.png 1300w,\n/static/00a327d9af70e21f4f36ad3f67700cb3/13727/OverlayDriver.png 1848w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/00a327d9af70e21f4f36ad3f67700cb3/663f3/OverlayDriver.png\"\n            alt=\"OverlayDriver\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>각 layer 간의 파일들을 취합해서 하나의 파일시스템으로 만들고 중복되는 파일의 경우, “상위” layer 가 “하위” layer 의 있는 파일을 대체하는 방식이다</p>\n<p>UFS 를 통해, Dockerfile 명령어를 실행한 결과 파일 시스템을 하나의 docker layer 로 만들고, 이 layer 들을 겹겹이 쌓아서 merge 된 최종 결과물이 docker 이미지가 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1a0b616b2f9197a4071ca1eef0bdb32c/47ca2/inspectGraphDriver.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 17.791411042944784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAsUlEQVR42l3K3U6DQBBAYR5CiRcwu7M7y4JSS2rSYrW1Yt//lY6pxYRw8SVnfoond6Ksv2g2A29HR952tENDvx94PY5025b4EvHZ4VuH72a3Xuz0+d5F/qnIU0X6dsQpkq5KugZs8thFSJNiJ8U+A+kcSJeF82L3Hoh7pdBdRHcNNkaaD/073NhBsVEJvSIiiJv5Vf/PcleU5YHHh5GgPZu+JlkmWUIqQeqZLNSrXv38ArIicuIm6sL7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1a0b616b2f9197a4071ca1eef0bdb32c/a81b5/inspectGraphDriver.webp 163w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/da3ef/inspectGraphDriver.webp 325w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/309d5/inspectGraphDriver.webp 650w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/78344/inspectGraphDriver.webp 975w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/bdb72/inspectGraphDriver.webp 1300w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/fc844/inspectGraphDriver.webp 3448w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1a0b616b2f9197a4071ca1eef0bdb32c/5e043/inspectGraphDriver.png 163w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/e5cc6/inspectGraphDriver.png 325w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/663f3/inspectGraphDriver.png 650w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/d880f/inspectGraphDriver.png 975w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/4c573/inspectGraphDriver.png 1300w,\n/static/1a0b616b2f9197a4071ca1eef0bdb32c/47ca2/inspectGraphDriver.png 3448w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1a0b616b2f9197a4071ca1eef0bdb32c/663f3/inspectGraphDriver.png\"\n            alt=\"inspectGraphDriver\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>추가로 <code>inspect</code>명령어로 GraphDriver부분을 살펴보면 위 그림처럼 각 레이어에 매칭되는 디렉토리 경로를 확인할 수 있다.<br>\n(jq 명령어는 JSON포맷 데이터를 다루는 커맨드라인 유틸리티)</p>\n<p><code>docker diff</code> 명령어를 통해 <code>lowerdir</code>을 기준으로 <code>upperdir</code>에서 변경된 사항을 확인 가능<br>\n(C : 변경, A : 추가, D : 삭제)</p>\n<hr>\n<p>Docker는 UFS의 CoW(Copy on Write)전략을 활용해 레이어의 역할을 나눠</p>\n<p>동일한 파일 시스템을 공유하며 독립적으로 실행한다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/687ee/DockerLayer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.93865030674846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACs0lEQVR42n2U6U8TURTF+9+pMTExbh9M3HDfVzRumLgLRqEFWkqhZWlRCkZFLZVg3GI0McaoDdEUiALTzgxd7HSZzrQ/8160URFvcnLvzJycu7x3xzGrpkjOZ0joadRUlm9KkncfPvHuQ4y37z8yPaPI94IjMKelUDUdXdeZmpoiHo8zOTlJIpHANE0cdqVCoVyhWgHLrlI0bSqWxXejhGWamGUb06oirGBWEPyyZVERvlyWIsLbti05jsibt7hGRvFFx/FGxvA8eizR/jCKJzJG+4MobQ+iuB8+xjUSYfjFK4zcd/KFAr9btVqVcFwN32XF1WY2Ob2sb/aw8loLS843suxCE0t/QsTLLjax/NINTvbdplwskjMM/mWOgacvOOoPcSY4yKn+QU73D3ImGF6As8Eh6gMDdETGKBXyGHnjj8pqFTrvP2J9s5sDvj72dfayocXDqmstrG501rCmycVOj5+Nzg4aQsOYxRLGYhUOPnspM58bGKIhNMRZWc1CNITCnOgL4743jB67QzabkXPMZDJSXPhsNoujbWRUzm6Pt4c9HT1ylmsanaxtctWw7noruzx+Nrl8nA70kP76mkwmTTqdQVHm0DQNVVWlqCP45Dl7O3s53nuLY4GQnOfh7uAC1PcMsN/Xy837oxSL5uItd0XH2drm47A/yMGufna6u9ns8lLX2kldq48tLi/b27s4JL55/FwO36Vo5DDy+QUHIg+lOzrODnc3R/xBjgRC7O4IsK3NJ5MIsa2tnTKJqFK0fWXoHsV8fvEKVU0jqeskNV36uUSCj7EYE18+E5uYYFZR0FMpEoKnaWjz83L4hb8udk3QsiwExPqUTZOKbaOpKpPxOHOzs3K1JEes10+eeBbt/VPwV1AqlZieniaZTDIzMyNj4RVFkT+BXC5Xu8j/sx/OVrRz6IyCNQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/a81b5/DockerLayer.webp 163w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/da3ef/DockerLayer.webp 325w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/309d5/DockerLayer.webp 650w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/78344/DockerLayer.webp 975w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/bdb72/DockerLayer.webp 1300w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/c6318/DockerLayer.webp 1838w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/5e043/DockerLayer.png 163w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/e5cc6/DockerLayer.png 325w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/663f3/DockerLayer.png 650w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/d880f/DockerLayer.png 975w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/4c573/DockerLayer.png 1300w,\n/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/687ee/DockerLayer.png 1838w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/fe11c17f2fa1b502f2a5b0fbf7f91efe/663f3/DockerLayer.png\"\n            alt=\"DockerLayer\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>도커의 컨테이너 레이어 구조는 <strong>컨테이너 레이어</strong>와 <strong>이미지 레이어</strong>로 분류한다.</p>\n<p>각각의 특징을 살펴보면 아래와 같다.</p>\n<p>컨테이너 레이어</p>\n<ul>\n<li>쓰기 가능한 레이어</li>\n<li>컨테이너가 생성된 후 변경작업은 이 레이어에서 이루어 진다.</li>\n<li>각 컨테이너마다 최상단 레이어에 생성되어 컨테이너마다 고유한 상태를 가진다.</li>\n</ul>\n<p>이미지 레이어</p>\n<ul>\n<li>읽기 전용 레이어</li>\n<li>다른 컨테이너와 공유</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7e7612c4ccf71fd10dd864028818017d/b88a2/DockerImageLayer.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.963190184049076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACNUlEQVR42oWRWU8TURiG58pf4K0/wR/jtV5AUFmUsnjjcmmiiYlXKls7XWgrAU2MuGAwRosxGKgoSES22KHQZWZopwU7lM6cx8xpwSAmvMmbLzmZ85z3e0dxheD2qzWa32S5t1jBFjD2Oc2FZxo35nZJVeC7VqR5bBXftMXbrIMnV8iBmkhx/nmau0s15jQTpbz7m7O3PqDcWeTM0wIZG9oGp1Guz3IqkmMiB0+mVlA6Eyh9KXpmqxLkuALh1jh3/yPKzSSnR4uMLhoojuPw7tsvgp/WWNAMhOsyv55FnVrm/XKOarXKlmExPPWT8YUMhrWDEAJvM4RgZmkDf2KZ5EaBbDaLQkOitkdlp8RetZ7A3d/Dqdr1NI6DbVc4IiHkY7V9G+HU75imWQd6fRx0Ui6X2dINsttF0nkds1Qiv12QZ4ZVxrAs9GIRLZOhYJUQjfWPACXUdeVM5fJ0BiL0huP4glFa+gN/3VefF/sDND3yM/nla2MD9zjQ68XTRl6nJxTjWmSEnnCcDn/kmDvVKG1DISbnFho/6ASgT41KYFcwxuWB4BFfGghyxR+mPRDnZWICasXDuv4L3NQNuoMxeiMjdIfiMsm/vhqI0KHGeSGB1glAw6RLjdIdiskOPUC7l6hhCVSHaR0MMZGcP3nltG7gU4fpDT+WwOaHQzQ9GDx0S59fJmwdCvN6Jnkc6IEOYJ4qFZt0Ls9mXiejG6xrGj9WVllaXZPeapx73+jmthfl8L4H/AMDhjcPVxyIwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7e7612c4ccf71fd10dd864028818017d/a81b5/DockerImageLayer.webp 163w,\n/static/7e7612c4ccf71fd10dd864028818017d/da3ef/DockerImageLayer.webp 325w,\n/static/7e7612c4ccf71fd10dd864028818017d/309d5/DockerImageLayer.webp 650w,\n/static/7e7612c4ccf71fd10dd864028818017d/78344/DockerImageLayer.webp 975w,\n/static/7e7612c4ccf71fd10dd864028818017d/bdb72/DockerImageLayer.webp 1300w,\n/static/7e7612c4ccf71fd10dd864028818017d/6a1cb/DockerImageLayer.webp 1844w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7e7612c4ccf71fd10dd864028818017d/5e043/DockerImageLayer.png 163w,\n/static/7e7612c4ccf71fd10dd864028818017d/e5cc6/DockerImageLayer.png 325w,\n/static/7e7612c4ccf71fd10dd864028818017d/663f3/DockerImageLayer.png 650w,\n/static/7e7612c4ccf71fd10dd864028818017d/d880f/DockerImageLayer.png 975w,\n/static/7e7612c4ccf71fd10dd864028818017d/4c573/DockerImageLayer.png 1300w,\n/static/7e7612c4ccf71fd10dd864028818017d/b88a2/DockerImageLayer.png 1844w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7e7612c4ccf71fd10dd864028818017d/663f3/DockerImageLayer.png\"\n            alt=\"DockerImageLayer\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>다시 Docker의 레이어 동작방식을 정리해보면</p>\n<p>하위 레이어(base layer) 위에 새로운 Layer가 쌓일 경우, 하위 layer는 READ ONLY 상태로 변경되고</p>\n<p>상위 layer에서 하위 layer를 복사하여 사용(CoW)하기 때문에, 상위 layer는 하위 layer에 아무런 영향을 주지 않는다.</p>\n<p>이미지 레이어를 통해 동일한 이미지가 생성되고</p>\n<p>컨테이너 레이어를 통해 이미지에 대한 생성을 공유 하면서도 고유한 데이터 상태를 가질 수 있다.</p>\n<hr>\n<p>Docker에서 특정 iamge를 이용해 container를 기동하는 것은</p>\n<p><strong>모든 Layer를 결합하여 사용자에게 하나의 File system으로 제공하는 것이다</strong></p>\n<p>추가로</p>\n<p>도커에서 관리되는 모든 레이어와 관련된 정보는 호스트 파일 시스템의 <em>/var/lib/docker</em> 폴더에 저장되며</p>\n<p>이 영역을 Docker Area 또는 Backing Filesystem이라 부른다.</p>\n<p>이러한 레이어 기반 아키텍처 덕분에 크게 2가지 이점이 생긴다.</p>\n<hr>\n<p>첫번째는 빌드 시간 단축이다.</p>\n<p>Dockerfile에 정의된 명령어 중</p>\n<p>RUN, ADD, COPY 3단계가 레이어로 저장이 된다.<br>\n(CMD, LABEL, ENV, EXPOSE 등 메타 정보를 다루는 부분은 임시 레이어로 생성되지만 저장되지 않는다.)</p>\n<p>레이어 기반 아키텍처를 이해하면 다음과 같은 최적화가 가능하다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"643205353063036700\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`# node가 설치된 docker 이미지를 가져온다.\nFrom node\n\n# /app 폴더 내부에서 실행될 것임을 설정\nWORKDIR /app\n\n# 현재 Dockerfile 경로에 있는 파일들 전부를 도커 이미지 내부 /app 경로에 복사\nCOPY . /app\n\n# package.json 파일을 설치\nRUN npm install\n\n# 만약 node 앱에 80포트로 서버를 열어놨다면 container의 외부 포트를 설정\nEXPOSE 80\n\n# 마지막 server.js 파일을 실행\nRUN node server.js\n\n# CMD의 경우 이미지 기반으로 컨테이너가 실행 될 때 실행\n# CMD [&quot;node&quot;, &quot;server.js&quot;]`, `643205353063036700`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># node가 설치된 docker 이미지를 가져온다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">From</span><span class=\"mtk1\"> node</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># /app 폴더 내부에서 실행될 것임을 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">WORKDIR</span><span class=\"mtk1\"> /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 현재 Dockerfile 경로에 있는 파일들 전부를 도커 이미지 내부 /app 경로에 복사</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">COPY</span><span class=\"mtk1\"> . /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># package.json 파일을 설치</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> npm install</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 만약 node 앱에 80포트로 서버를 열어놨다면 container의 외부 포트를 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">EXPOSE</span><span class=\"mtk1\"> 80</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 마지막 server.js 파일을 실행</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> node server.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># CMD의 경우 이미지 기반으로 컨테이너가 실행 될 때 실행</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># CMD [&quot;node&quot;, &quot;server.js&quot;]</span></span></span></code></pre>\n<p>위의 설정파일의 경우엔 소스를 수정해 파일을 하나라도 변경 할 경우</p>\n<p>npm install이 실행되어 종속된 파일을 전부 다시 받게되는데</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"73397898241465280000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`# node가 설치된 docker 이미지를 가져온다.\nFrom node\n\n# /app 폴더 내부에서 실행될 것임을 설정\nWORKDIR /app\n\n# 현재 package.json 파일만 /app 경로에 복사\nCOPY package.json /app\n\n# package.json 파일을 설치\nRUN npm install\n\n# 현재 Dockerfile 경로에 있는 파일들 전부를 도커 이미지 내부 /app 경로에 복사\nCOPY . /app\n\n# 만약 node 앱에 80포트로 서버를 열어놨다면 container의 외부 포트를 설정\nEXPOSE 80\n\n# 마지막 server.js 파일을 실행\nRUN node server.js`, `73397898241465280000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># node가 설치된 docker 이미지를 가져온다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">From</span><span class=\"mtk1\"> node</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># /app 폴더 내부에서 실행될 것임을 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">WORKDIR</span><span class=\"mtk1\"> /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 현재 package.json 파일만 /app 경로에 복사</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">COPY</span><span class=\"mtk1\"> package.json /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># package.json 파일을 설치</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> npm install</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 현재 Dockerfile 경로에 있는 파일들 전부를 도커 이미지 내부 /app 경로에 복사</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">COPY</span><span class=\"mtk1\"> . /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 만약 node 앱에 80포트로 서버를 열어놨다면 container의 외부 포트를 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">EXPOSE</span><span class=\"mtk1\"> 80</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># 마지막 server.js 파일을 실행</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> node server.js</span></span></span></code></pre>\n<p>package.json을 app경로에 복사 한 후 나머지 실행파일을 /app경로로 복사한다면</p>\n<p>package.json파일이 바뀌지 않아서 package를 다시 받지 않고 실행된다.</p>\n<p><strong>즉, 이미지를 빌드할 때 필요한 부분만 다시 실행하여 이미지 생성 속도를 높일 수 있다</strong><br>\n(빌드 시간 단축)</p>\n<hr>\n<p>두번째는 이러한 레이어 기반 아키텍처 덕분에 롤백 기능을 활용할 수 있고</p>\n<p>Layer를 활용해 **지속적 통합 및 배포(CI/CD)**를 수행하는 데 도움을 준다.</p>\n<hr>\n<p>추가로 base가 되는 image layer(read-only layer)에 있는 내용을 변경하고 싶을 땐</p>\n<p>해당 data 를 Writable layer 로 먼저 Copy 한 후 이를 변경하는 기법을 사용해야 한다.</p>\n<p>CoW기법은 동작 구조 상 다음과 같은 단점을 가질 수 있다는 부분을 알고있어야 한다.</p>\n<ul>\n<li>data 를 먼저 복제(Copy)한 후 변경을 수행해야 하므로 성능 하락(Performance Overhead)이 존재한다.</li>\n<li>하위 layer 에 있는 원본 data와 상위 layer 에 변경된 data 도 유지해야 하므로 disk space를 많이 사용할 수 있다.</li>\n</ul>\n<h2 id=\"docker-command\" style=\"position:relative;\"><a href=\"#docker-command\" aria-label=\"docker command permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker Command</h2>\n<p>Docker의 동작방식을 살펴봤으니 다시 돌아와 사용하기 위한 명령어를 살펴보자</p>\n<p>리눅스에서 도커 엔진을 제어하기 위한 명령어는 아래와 같다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"57442345158548320000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`# Docker 데몬 상태 확인\n\\$ sudo systemctl status docker\n\n# Docker demon 시작/중지\n\\$ sudo systemctl start/stop docker\n\n# Docker 데몬 사용/미사용 설정\n\\$ sudo systemctl enabloe/disable docker`, `57442345158548320000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># Docker 데몬 상태 확인</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ sudo systemctl status docker</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># Docker demon 시작/중지</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ sudo systemctl start/stop docker</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># Docker 데몬 사용/미사용 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ sudo systemctl enabloe/disable docker</span></span></span></code></pre>\n<p>Docker 명령어의 기본적인 형태는 아래와 같다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"81264626648567230000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker [command] (option) [target] (arguments)`, `81264626648567230000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker [command] (option) [target] (arguments)</span></span></span></code></pre>\n<ul>\n<li>target : container (생략 가능), image, volume, network 등</li>\n<li>command : ls, inspect, start, run 등</li>\n</ul>\n<p>start vs run -> attached 모드 vs Detached 모드</p>\n<h4 id=\"1-build\" style=\"position:relative;\"><a href=\"#1-build\" aria-label=\"1 build permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. build</h4>\n<blockquote>\n<p>Dockerfile로 부터 image 생성</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"11780468987976645000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker build [options] . -t &quot;app/container_name&quot;    # name`, `11780468987976645000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker build [options] </span><span class=\"mtk11\">.</span><span class=\"mtk1\"> -t </span><span class=\"mtk8\">&quot;app/container_name&quot;</span><span class=\"mtk1\">    </span><span class=\"mtk3\"># name</span></span></span></code></pre>\n<h4 id=\"2-run\" style=\"position:relative;\"><a href=\"#2-run\" aria-label=\"2 run permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. run</h4>\n<blockquote>\n<p>image를 기반으로 컨테이너를 만들어 실행 (생성, 실행)</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"3580984801253217300\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker run {options} {이미지 명}\n\n  # -a, --attach               # attach stdout/err\n  # -i, --interactive          # attach stdin (interactive)\n  # -t, --tty                  # pseudo-tty\n  #     --name NAME            # name your image\n  # -p, --publish 5000:5000    # port map\n  #     --expose 5432          # expose a port to linked containers\n  # -P, --publish-all          # publish all ports\n  #     --link container:alias # linking\n  # -v, --volume \\`pwd\\`:/app    # mount (absolute paths needed)\n  # -e, --env NAME=hello       # env vars`, `3580984801253217300`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run {options} {이미지 명}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -a, --attach               # attach stdout/err</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -i, --interactive          # attach stdin (interactive)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -t, --tty                  # pseudo-tty</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">#     --name NAME            # name your image</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -p, --publish 5000:5000    # port map</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">#     --expose 5432          # expose a port to linked containers</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -P, --publish-all          # publish all ports</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">#     --link container:alias # linking</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -v, --volume `pwd`:/app    # mount (absolute paths needed)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -e, --env NAME=hello       # env vars</span></span></span></code></pre>\n<h4 id=\"3-start\" style=\"position:relative;\"><a href=\"#3-start\" aria-label=\"3 start permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. start</h4>\n<blockquote>\n<p>컨테이너 실행</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"25390068813622755000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker start [options] CONTAINER\n  # -a, --attach        # attach stdout/err\n  # -i, --interactive   # attach stdin`, `25390068813622755000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker start [options] CONTAINER</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -a, --attach        # attach stdout/err</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># -i, --interactive   # attach stdin</span></span></span></code></pre>\n<h4 id=\"4-create\" style=\"position:relative;\"><a href=\"#4-create\" aria-label=\"4 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. create</h4>\n<blockquote>\n<p>컨테이너 생성</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"1936784997833207600\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker create [options] IMAGE\n\n# ex\n\\$ docker create --name app_redis_1 \\\n  --expose 6379 \\\n  redis:3.0.2\n\n# -d : detached mode (백그라운드 모드)\n# -p : 포트 연결\n# -v : volume 설정\n# -e : 컨테이너 내에서 사용할 환경변수 설정\n# --name : 컨테이너 이름 설정\n# --it : 터미널 입력 옵션 (컨테이너의 표준 입력과 로컬 컴퓨터 입력 연결)\n# --rm : 프로세스 종료 시 컨테이너 자동 제거\n# --restart : docker desktop 실행 시 container 자동 실행 여부 (default : no)\n`, `1936784997833207600`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker create [options] IMAGE</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># ex</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker create --name app_redis_1 \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  --expose 6379 \\</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  redis:3.0.2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -d : detached mode (백그라운드 모드)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -p : 포트 연결</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -v : volume 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -e : 컨테이너 내에서 사용할 환경변수 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># --name : 컨테이너 이름 설정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># --it : 터미널 입력 옵션 (컨테이너의 표준 입력과 로컬 컴퓨터 입력 연결)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># --rm : 프로세스 종료 시 컨테이너 자동 제거</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># --restart : docker desktop 실행 시 container 자동 실행 여부 (default : no)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"></span></span></code></pre>\n<h4 id=\"5-attach\" style=\"position:relative;\"><a href=\"#5-attach\" aria-label=\"5 attach permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. attach</h4>\n<blockquote>\n<p>이미 실행 중인 컨테이너에 연결</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"39786864901624906000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker attach {이미지}:{태그}`, `39786864901624906000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker attach {이미지}:{태그}</span></span></span></code></pre>\n<h4 id=\"6-ps--kill\" style=\"position:relative;\"><a href=\"#6-ps--kill\" aria-label=\"6 ps  kill permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. ps / kill</h4>\n<blockquote>\n<p>실행중인 모든 container 노출</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"72644303405816320000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker ps -a\n\\$ docker kill \\$ID\n\n# -a : 현재 존재하는 모든 컨테이너의 목록 출력`, `72644303405816320000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker ps -a</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker </span><span class=\"mtk11\">kill</span><span class=\"mtk1\"> </span><span class=\"mtk12\">$ID</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -a : 현재 존재하는 모든 컨테이너의 목록 출력</span></span></span></code></pre>\n<h4 id=\"7-cp\" style=\"position:relative;\"><a href=\"#7-cp\" aria-label=\"7 cp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. cp</h4>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"91420843739511520000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker cp\n`, `91420843739511520000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker cp</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span></code></pre>\n<blockquote>\n<p>복사 명령어, 도커 내부의 로그 파일을 꺼내올 때 유용</p>\n</blockquote>\n<h4 id=\"8-stop\" style=\"position:relative;\"><a href=\"#8-stop\" aria-label=\"8 stop permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. stop</h4>\n<blockquote>\n<p>컨테이너 종료</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"56007979650338505000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker stop {Container ID}`, `56007979650338505000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker stop {Container ID}</span></span></span></code></pre>\n<h4 id=\"9-rm\" style=\"position:relative;\"><a href=\"#9-rm\" aria-label=\"9 rm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. rm</h4>\n<blockquote>\n<p>도커 컨테이너 삭제</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"64649018687601340000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker rm {컨테이너 명}`, `64649018687601340000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker rm {컨테이너 명}</span></span></span></code></pre>\n<h4 id=\"10-rmi\" style=\"position:relative;\"><a href=\"#10-rmi\" aria-label=\"10 rmi permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. rmi</h4>\n<blockquote>\n<p>도커 이미지 삭제</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"7748904508347510000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker rmi {이미지 명}\n# -f : 컨테이너도 강제 삭제`, `7748904508347510000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker rmi {이미지 명}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># -f : 컨테이너도 강제 삭제</span></span></span></code></pre>\n<h4 id=\"10-push--pull\" style=\"position:relative;\"><a href=\"#10-push--pull\" aria-label=\"10 push  pull permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. push / pull</h4>\n<blockquote>\n<p>레지스트리에 push / pull</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"59662153521339080000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker pull {이미지 이름}:{태그}\n\\$ docker`, `59662153521339080000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker pull {이미지 이름}:{태그}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker</span></span></span></code></pre>\n<h4 id=\"11-rename\" style=\"position:relative;\"><a href=\"#11-rename\" aria-label=\"11 rename permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. rename</h4>\n<blockquote>\n<p>컨테이너 이름 변경</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"3623312812979917300\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker rename {기존 이름} {변경하고자 하는 이름}`, `3623312812979917300`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker rename {기존 이름} {변경하고자 하는 이름}</span></span></span></code></pre>\n<h4 id=\"12-log\" style=\"position:relative;\"><a href=\"#12-log\" aria-label=\"12 log permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. log</h4>\n<blockquote>\n<p>컨테이너 로그 조회</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"73200966912207790000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker container logs -t {컨테이너 식별자}`, `73200966912207790000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker container logs -t {컨테이너 식별자}</span></span></span></code></pre>\n<h4 id=\"13-prune\" style=\"position:relative;\"><a href=\"#13-prune\" aria-label=\"13 prune permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. prune</h4>\n<blockquote>\n<p>사용하지 않는 Docker 오브젝트 삭제</p>\n</blockquote>\n<p><a href=\"https://docs.docker.com/config/pruning/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Prune unused Docker objects</a></p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"19309336100678398000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker container prune # 사용하지 않는 컨테이너 삭제\n\\$ docker image prune # 사용하지 않는 이미지 삭제\n\\$ docker volume prune # 컨테이너와 연결되어 있지 않은 모든 볼륨 삭제\n\\$ docker system prune # 컨테이너, 이미지, 볼륨, 네트워크 전부 삭제`, `19309336100678398000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker container prune </span><span class=\"mtk3\"># 사용하지 않는 컨테이너 삭제</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker image prune </span><span class=\"mtk3\"># 사용하지 않는 이미지 삭제</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume prune </span><span class=\"mtk3\"># 컨테이너와 연결되어 있지 않은 모든 볼륨 삭제</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker system prune </span><span class=\"mtk3\"># 컨테이너, 이미지, 볼륨, 네트워크 전부 삭제</span></span></span></code></pre>\n<h4 id=\"14-image--container\" style=\"position:relative;\"><a href=\"#14-image--container\" aria-label=\"14 image  container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. image / container</h4>\n<p>image 관련</p>\n<table>\n<thead>\n<tr>\n<th>command</th>\n<th>descriptioin</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>docker image build</td>\n<td>Dockerfile에서 이미지 빌드</td>\n</tr>\n<tr>\n<td>docker image history</td>\n<td>이미지의 history 표시</td>\n</tr>\n<tr>\n<td>docker image ls</td>\n<td>이미지 나열</td>\n</tr>\n<tr>\n<td>docker image prune</td>\n<td>사용하지 않는 이미지 제거</td>\n</tr>\n<tr>\n<td>docker image pull</td>\n<td>레지스트리에서 이미지 또는 저장소 가져오기</td>\n</tr>\n<tr>\n<td>docker image push</td>\n<td>이미지 또는 저장소를 레지스트리에 푸시</td>\n</tr>\n<tr>\n<td>docker image rm</td>\n<td>하나 이상의 이미지 제거</td>\n</tr>\n<tr>\n<td>docker image tag</td>\n<td>SOURCE_IMAGE를 참조하는 TARGET_IMAGE 태그 생성</td>\n</tr>\n</tbody>\n</table>\n<p>command 관련</p>\n<table>\n<thead>\n<tr>\n<th>Command</th>\n<th>description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>docker container attach</td>\n<td>실행 중인 컨테이너에 로컬 표준 입력, 출력 및 오류 스트림 연결</td>\n</tr>\n<tr>\n<td>docker container commit</td>\n<td>컨테이너의 변경 사항에서 새 이미지 만들기</td>\n</tr>\n<tr>\n<td>docker container cp</td>\n<td>컨테이너와 로컬 파일 시스템 간에 파일/폴더 복사</td>\n</tr>\n<tr>\n<td>docker container create</td>\n<td>새 컨테이너 만들기</td>\n</tr>\n<tr>\n<td>docker container exec</td>\n<td>실행 중인 컨테이너에서 명령 실행</td>\n</tr>\n<tr>\n<td>docker container inspect</td>\n<td>하나 이상의 컨테이너에 대한 자세한 정보 표시</td>\n</tr>\n<tr>\n<td>docker container kill</td>\n<td>하나 이상의 실행 중인 컨테이너 종료</td>\n</tr>\n<tr>\n<td>docker container logs</td>\n<td>컨테이너의 로그 가져오기</td>\n</tr>\n<tr>\n<td>docker container ls</td>\n<td>컨테이너 나열</td>\n</tr>\n<tr>\n<td>docker container pause</td>\n<td>하나 이상의 컨테이너 내 모든 프로세스 일시 중지</td>\n</tr>\n<tr>\n<td>docker container port</td>\n<td>컨테이너에 대한 포트 매핑 또는 특정 매핑 나열</td>\n</tr>\n<tr>\n<td>docker container prune</td>\n<td>중지된 모든 컨테이너 제거</td>\n</tr>\n<tr>\n<td>docker container rename</td>\n<td>컨테이너 이름 바꾸기</td>\n</tr>\n<tr>\n<td>docker container restart</td>\n<td>하나 이상의 컨테이너 다시 시작</td>\n</tr>\n<tr>\n<td>docker container rm</td>\n<td>하나 이상의 컨테이너 제거</td>\n</tr>\n<tr>\n<td>docker container run</td>\n<td>새 컨테이너에서 명령 실행</td>\n</tr>\n<tr>\n<td>docker container start</td>\n<td>하나 이상의 중지된 컨테이너 시작</td>\n</tr>\n<tr>\n<td>docker container stop</td>\n<td>하나 이상의 실행 중인 컨테이너 중지</td>\n</tr>\n<tr>\n<td>docker container top</td>\n<td>컨테이너의 실행 중인 프로세스 표시</td>\n</tr>\n<tr>\n<td>docker container unpause</td>\n<td>하나 이상의 컨테이너 내의 모든 프로세스 일시 중지 해제</td>\n</tr>\n</tbody>\n</table>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0aee8084d067f0df813df7aecc23f6e7/55091/dockerCheet.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.6441717791411%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/UlEQVR42l1Tx67qUAzM/y8RvXwD97GCAAkCUZYIISF6b0lI6B3maowSPe6RRj5x7PHYcZRIJIKfn3/QNB3pdBqZTAaqqiKbzSKfzwtUNSN+TdOg6xrK5TJqtdoXqtWqWCWVSiGXy0FVs2ILhQJ0XfdIaT9Eurynj3eSFotFececSqUifqXT6WA+n2O1WmG32+FwOIgdj8dYr9cwTROO42C/34tvMplgOp1KjGVZ6Pf7XiytMhgMsN1uJel8PuP5fOL1emG9NsR/vV7BQ79hGJJIosfjgcvlKkIYd7/fxa8Mh0PsdntRYts2jsejEC+XSxjGx/d+v4WACbbtSAwP49gd/SzsETrORyGTqI6WaujbbDaeaiYQFMBzuVywWCxgWRu5M0dadhNvt5uoIQFbYXtUSTL6LMuUZNO0JI4ks9lMSMnBeCHkgMnOWZxOpy9CFiLhZ65rbzQszjYZx2eSS8uj0UiIGPiZkS2zcYfvWiqg2v+/Ov3u3nJ1aBWuAdmp0gVVsjKT+XHYEonpI5bLlShnu+FwGMFgEIFAQKzCReVSckmJUqkkS9vr9UQtR0Hw7rZL8MPRJhIJxONxD0ooFILf75cKBO8+nw/NZlOW3J0PZ9hut1Gv1wW8NxoNxGKxLyh/K7jgv9ntdtFqteTPIHEymZSC0WhUWqWYv4S/9hqZre/VPG4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0aee8084d067f0df813df7aecc23f6e7/a81b5/dockerCheet.webp 163w,\n/static/0aee8084d067f0df813df7aecc23f6e7/da3ef/dockerCheet.webp 325w,\n/static/0aee8084d067f0df813df7aecc23f6e7/309d5/dockerCheet.webp 650w,\n/static/0aee8084d067f0df813df7aecc23f6e7/78344/dockerCheet.webp 975w,\n/static/0aee8084d067f0df813df7aecc23f6e7/bdb72/dockerCheet.webp 1300w,\n/static/0aee8084d067f0df813df7aecc23f6e7/8546d/dockerCheet.webp 1662w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0aee8084d067f0df813df7aecc23f6e7/5e043/dockerCheet.png 163w,\n/static/0aee8084d067f0df813df7aecc23f6e7/e5cc6/dockerCheet.png 325w,\n/static/0aee8084d067f0df813df7aecc23f6e7/663f3/dockerCheet.png 650w,\n/static/0aee8084d067f0df813df7aecc23f6e7/d880f/dockerCheet.png 975w,\n/static/0aee8084d067f0df813df7aecc23f6e7/4c573/dockerCheet.png 1300w,\n/static/0aee8084d067f0df813df7aecc23f6e7/55091/dockerCheet.png 1662w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0aee8084d067f0df813df7aecc23f6e7/663f3/dockerCheet.png\"\n            alt=\"dockerCheet\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<hr>\n<p>Docker의 컨테이너에 쓰여진 데이터는 기본적으로 컨테이너가 삭제될 때 함께 사라진다.</p>\n<p>그렇기 때문에 호스트 컴퓨터와 연결하기 위해 Docker는 3가지 마운트 방법을 제공한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e62a7d78fb8098f29609b87cd05adea/703e3/dockerMount.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.920245398773%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACPUlEQVR42kWSuW6TQRSF/SS0vAAvQkWFlArxBDTQUCAqOkSBaGiQKIiAkMSOkzjYjk3i7Y/Xf9/m3zcnRNQf+odIFEdz52h07jn3TuPBk5fcf/yce4+e8fDFW2w/wHB9TNdnZdisTYeN5UrUdc2ZnpBvdMdHu4PhCpSNQWPn1XuevvnIzusPvNs94vZmS5hmLHWLy+kVw9GU/nBEd3DBxURhNFugWi7bqqQsC6qyYFujKtEdj4bpePy5vZFCSZajmB4LO+Bc2dAdjmmd/OTgqMPeYVuKDscKw7nK1PBxg4gr06czN7FFjG57NK5Ug6Is2DiC5lTjfGVRFDlxHLHWDAzb4XJloKiWjDRZacRJQpikjDSXwdqhNdWZW+Kfw6VuEtURbSHJ/Ykuu2d5TllVXG9L1k7A3AoYGz4TU8iR1BHdMJYO0ywjyTK02uFSM2XUXxsHxw+wfYEjQkQY4fiCMIqYWz5eUHOhvAdhhAgCvCCSRsoiJ89z1Fpwrhr8vq5k1MP+mNOzHl/3W3w7OJLL6I8UFk7AaqNz3B3SPDmjfdan/2vMp9MRhojJ8+y/4EIzKcuSJE0YKUtOe0N+tE5od7p0BhM+d8aIOGWlGvTultTu9BhczpitNTn/JE3JizvBpWZRVRVRknB+OeP74TG7e032msd8aXZoDmdURU4Yx1iuhycCibquhbKiIM1yiqKQ/7FRd4mzFBFFrHWThWqw0i15LlQd03YIolgKxmkqG9eo65oL4hgRx0RpIv/uXwO3vaPFvT/KAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2e62a7d78fb8098f29609b87cd05adea/a81b5/dockerMount.webp 163w,\n/static/2e62a7d78fb8098f29609b87cd05adea/da3ef/dockerMount.webp 325w,\n/static/2e62a7d78fb8098f29609b87cd05adea/309d5/dockerMount.webp 650w,\n/static/2e62a7d78fb8098f29609b87cd05adea/78344/dockerMount.webp 975w,\n/static/2e62a7d78fb8098f29609b87cd05adea/09c9b/dockerMount.webp 1002w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2e62a7d78fb8098f29609b87cd05adea/5e043/dockerMount.png 163w,\n/static/2e62a7d78fb8098f29609b87cd05adea/e5cc6/dockerMount.png 325w,\n/static/2e62a7d78fb8098f29609b87cd05adea/663f3/dockerMount.png 650w,\n/static/2e62a7d78fb8098f29609b87cd05adea/d880f/dockerMount.png 975w,\n/static/2e62a7d78fb8098f29609b87cd05adea/703e3/dockerMount.png 1002w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2e62a7d78fb8098f29609b87cd05adea/663f3/dockerMount.png\"\n            alt=\"dockerMount\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p><strong>Volume</strong>, <strong>Bind Mount</strong>, <strong>thmpfs</strong> Mount</p>\n<p>마운트 방식을 항목별로 살펴보자</p>\n<h2 id=\"volumes\" style=\"position:relative;\"><a href=\"#volumes\" aria-label=\"volumes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Volumes</h2>\n<p>Volume은 Docker에서 관리하는 호스트 파일 시스템과 컨테이너와 매핑해 데이터를 <strong>영구적으로 사용</strong>하는 방법이다.<br>\n-> 볼륨은 Docker에 의해 생성되고 관리되며, 호스트 컴퓨터에서 편집은 불가능하다.</p>\n<p>Volume은 <strong>Named Volume, Anonymous Volume</strong> 두가지 방법으로 지정 가능 하다.</p>\n<p><code>-v &#x3C;volumeName>:&#x3C;mount dir>[:rw | ro]</code></p>\n<p>명령어는 다음과 같이 <code>-v</code> or <code>--volume</code>으로 사용하고 <code>:</code>로 3개의 필드를 구분한다.</p>\n<ul>\n<li>마지막 rw, ro는 선택사항이며 read only옵션을 설정할 수 있다.</li>\n</ul>\n<h3 id=\"named-volume\" style=\"position:relative;\"><a href=\"#named-volume\" aria-label=\"named volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Named Volume</h3>\n<p>Volume에 이름을 지정해 사용하는 방법은 DockerFile에 명시하거나 명령어를 통해 지정해주는 방식이 있다.</p>\n<p>Named Volume은 제거되지 않기 때문에 수동으로 제거시켜 줘야한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"65475632882626660000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`# DockerFile 내부\n\nVOLUME [ &quot;/app/log&quot; ]`, `65475632882626660000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># DockerFile 내부</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">VOLUME</span><span class=\"mtk1\"> [ </span><span class=\"mtk8\">&quot;/app/log&quot;</span><span class=\"mtk1\"> ]</span></span></span></code></pre>\n<p>명령어를 통해 Volume을 생성하고 확인하기 위해선 아래 명령어들을 사용한다</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"40261971293298800000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker volume create app_vol\n\\$ docker volume ls`, `40261971293298800000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume create app_vol</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume ls</span></span></span></code></pre>\n<p>상세한 Volume 정보를 확인하기 위해선 inspect명령어를 사용하는데</p>\n<p>Mountpoint 항목을 보면 해당 볼륨이 컴퓨터의 어느 경로에 생성 하였는지 확인 가능하다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"47486433066089660000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker volume inspect app_log`, `47486433066089660000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume inspect app_log</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/83c6b7a34520bbb3a8ae85e5505d8f24/600ec/volumeInspect.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.46625766871166%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABHUlEQVR42pWSa26DMBCEeRiMcHjZODwDUVOkSD1Pr9D732CqcWWEqqZNf3zatYXGs7ME8zyj7yyMvUCeP2DOd1SlwulUoGkapGmKIAiep+97CJHg9XbDy9pD6wZCCCRJ4mAfx/F+xweklA7/De/4jRPsug5VWWBZN9jrO8bLHcsyY5omrOvqKhmGAZymbVuHtRZ1XTt4zrLsSzDPcyiVI44lAvEGkZQQcbQ7YiXeVRiGv49Mq1Jm0FrDmgJSptDauPz4snfhs6TgEX93EA1QFAWYJRdBsbIs99xYyZ/OjoLGGGzbBubJbPgAqarKwZ6OCc++RlH0WHAcRzc2RTmiz+645WO/b/UnQaWUE+SC6JD1X//e96Ww8fYfjPE0nznq2mpUiMzdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/83c6b7a34520bbb3a8ae85e5505d8f24/a81b5/volumeInspect.webp 163w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/da3ef/volumeInspect.webp 325w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/309d5/volumeInspect.webp 650w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/78344/volumeInspect.webp 975w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/b6885/volumeInspect.webp 1126w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/83c6b7a34520bbb3a8ae85e5505d8f24/5e043/volumeInspect.png 163w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/e5cc6/volumeInspect.png 325w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/663f3/volumeInspect.png 650w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/d880f/volumeInspect.png 975w,\n/static/83c6b7a34520bbb3a8ae85e5505d8f24/600ec/volumeInspect.png 1126w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/83c6b7a34520bbb3a8ae85e5505d8f24/663f3/volumeInspect.png\"\n            alt=\"volumeInspect\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>Docker 실행 시 volume지정은 -v 옵션으로 volume의 이름과 경로를 지정한다</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"79037890808270370000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker run -d -p 3000:80 --rm --name exampleApp -v app_log:/app/log first:latest`, `79037890808270370000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run -d -p 3000:80 --rm --name exampleApp -v app_log:/app/log first:latest</span></span></span></code></pre>\n<p>위의 명령어로 container를 실행 후 inspect 명령어를 통해 container정보를 확인해보면 아래와 같이<br>\nmount된 정보를 확인할 수 있다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"37296425399151760000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker inspect exampleApp | grep -A 12 &quot;Mounts&quot;`, `37296425399151760000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker inspect exampleApp | grep -A 12 </span><span class=\"mtk8\">&quot;Mounts&quot;</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2e9f786cbe55f17a013ae9124c2a4e09/4b293/containerVolumeMount.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.67484662576687%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAxUlEQVR42o2OS2rEMBAFW7+xJLecyDbjMWOyTQ6RxRhy/ytVkIdAFiF4UdD04xVPuhC4TZX7vGLLjvSPA6M7kr/I8yf7Hvh4d4SQ6ftMzplSCjHGg5TSgYg0BCuGLniGkijaMWjEtL95ImIxpiE/pf94Ht55tu2N23pnXTeWZUX1hdwrpWRUe0K4nBc677leF1QLXYw4549VLWvLjDFnZL8XOubplbEOOHu6/Lcwdhe0TLgwY/2I8RVxFbEjKUdqFbx3p4TfL/WAK2IuB2wAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2e9f786cbe55f17a013ae9124c2a4e09/a81b5/containerVolumeMount.webp 163w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/da3ef/containerVolumeMount.webp 325w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/309d5/containerVolumeMount.webp 650w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/78344/containerVolumeMount.webp 975w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/bdb72/containerVolumeMount.webp 1300w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/5dc86/containerVolumeMount.webp 1606w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2e9f786cbe55f17a013ae9124c2a4e09/5e043/containerVolumeMount.png 163w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/e5cc6/containerVolumeMount.png 325w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/663f3/containerVolumeMount.png 650w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/d880f/containerVolumeMount.png 975w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/4c573/containerVolumeMount.png 1300w,\n/static/2e9f786cbe55f17a013ae9124c2a4e09/4b293/containerVolumeMount.png 1606w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2e9f786cbe55f17a013ae9124c2a4e09/663f3/containerVolumeMount.png\"\n            alt=\"containerVolumeMount\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h3 id=\"anonymous-volume\" style=\"position:relative;\"><a href=\"#anonymous-volume\" aria-label=\"anonymous volume permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Anonymous Volume</h3>\n<p>아무 설정없이 컨테이너를 시작하면 자동으로 Anonymous Volume이 생성되는데</p>\n<p>–rm 옵션을 넣어 컨테이너 시작하면 종료 시 자동으로 익명 Volume 제거 된다.<br>\n(옵션 없이 시작하면 제거되지 않는다.)</p>\n<p>–rm 옵션 없이 컨테이너를 재시작 할 경우 <strong>새로운 익명 볼륨이 계속 생성된다.</strong></p>\n<p>아래 두 명령어를 통해 볼륨 삭제 가능하다</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"75957695738037750000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker volume rm VOL_NAME\n\\$ docker volume prune`, `75957695738037750000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume rm VOL_NAME</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker volume prune</span></span></span></code></pre>\n<p>주의할 점으로 Volume을 삭제 시 Volume이 마운트 되어있으면 삭제가 되지 않으니<br>\n연결된 container를 모두 삭제 하고 제거해야 한다.</p>\n<p><code>docker volume prune</code> 커맨드는 마운트되어 있지 않은 모든 볼륨을 한번에 제거한다.</p>\n<hr>\n<h3 id=\"bind-mount\" style=\"position:relative;\"><a href=\"#bind-mount\" aria-label=\"bind mount permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bind Mount</h3>\n<p>Volume은 도커에 의해 지정된 위치와 마운트하는 방법이지만</p>\n<p><strong>Bind Mount</strong>는 <strong>호스트 머신상에 디렉토리를 선언해</strong> 매핑할 컨테이너 경로를 마운트한다.<br>\n-> 호스트 머신의 어떤 폴더에 연결<br>\n-> <strong>항상 최신 코드에 액세스 가능</strong><br>\n-> 즉, 바인드 마운트는 컨테이너가 실행되는 동안 변경될 수 있는 데이터를 컨테이너와 공유하는데 사용한다.</p>\n<p>Bind Mount는 개발 중에는 유용한 옵션이지만 프로덕션에서는 사용x<br>\n(컨테이너는 호스트시스템에서 격리되어 실행하는게 좋은 방향)</p>\n<p>바인드 마운트를 사용하는 방법은 docker run 커맨드를 실행할 때</p>\n<ul>\n<li><code>-v</code> 옵션의 콜론(:) 앞 부분에 마운트명 대신에 호스트의 경로를 지정한다</li>\n<li><code>-v</code> 옵션으로 사용이 가능하지만 <code>--mount</code>도 동일한 기능을 하기 때문에 직관적인 <code>--mount</code> 사용이 좋음.</li>\n<li><code>-v</code>와 <code>--mount</code>의 차이점은 <code>-v</code>옵션은 존재하지 않는 파일 또는 디렉토리를 실행시 파일 존재여부와 상관 없이 생성되는데 <code>--mount</code>는 오류 생성</li>\n<li>경로는 절대 경로로 지정해 줘야 한다.</li>\n<li>폴더간 마운트를 주로 사용하지만 파일 간 마운트도 가능</li>\n<li>bind mount는 <code>docker volume ls</code>로 노출되지 않는다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"42473184396340090000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ docker run -d -p 3000:80 --rm --name exampleApp --mount {절대 경로}:/app/log first:latest`, `42473184396340090000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">$ docker run -d -p 3000:80 --rm --name exampleApp --mount {절대 경로}:/app/log first:latest</span></span></span></code></pre>\n<p><code>-v $(pwd):/app</code> 명령어로 현재 위치에 Bind 가능</p>\n<p><code>docker inspect</code> 커맨드로 컨테이너의 상세 정보를 확인해보면</p>\n<p>현재 경로(/root)가 bind 타입으로 마운트되어 있는 것을 확인할 수 있다.</p>\n<hr>\n<p>실제로 Node환경 Application의 소스를 bind mount를 활용해 받아올 수 있는데</p>\n<p>실행 시 npm install을 받아오게 dockerfile을 구성했으면 에러가 난다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1d92a2f5d1d0b9daae74316b0abf2fb8/e3e42/bind_1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.380368098159508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAApklEQVR42pWPOw7CMBBE/V0jr5PYDjgJaZBA3AJRcA0qCu5/g0ExgoKKFE+7M8WTRowlIU8X8PzEptxhtw9cb2ecjgaWAogsjDHQWsPa979ARDV/WDqlFETsWnRpD/IHaLeH0BPaziOwgjEEKSWEEP9TSsEw7OCcqYWUYp3gl3meMY4TmqYFcwCHBt57aK3qzDpjjbDve6SUEGOsN+cMZv7inFslfQEDlmvutT/ANAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/1d92a2f5d1d0b9daae74316b0abf2fb8/a81b5/bind_1.webp 163w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/da3ef/bind_1.webp 325w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/309d5/bind_1.webp 650w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/78344/bind_1.webp 975w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/bdb72/bind_1.webp 1300w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/09bcd/bind_1.webp 2952w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/1d92a2f5d1d0b9daae74316b0abf2fb8/5e043/bind_1.png 163w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/e5cc6/bind_1.png 325w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/663f3/bind_1.png 650w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/d880f/bind_1.png 975w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/4c573/bind_1.png 1300w,\n/static/1d92a2f5d1d0b9daae74316b0abf2fb8/e3e42/bind_1.png 2952w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/1d92a2f5d1d0b9daae74316b0abf2fb8/663f3/bind_1.png\"\n            alt=\"bind 1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>해당 원인은 컨테이너에서 <code>npm install</code> 시 호스트 컴퓨터 파일에 <code>node_modules</code>이 없기 때문인데</p>\n<p>이와 같은 상황에선 volume을 추가로 생성해야 한다.<br>\n(Bind Mount된 볼륨의 내용을 덮어쓴다.)</p>\n<p>volume을 설정하면 도커는 호스트 파일(원본)에 덮어쓰지 않고, 충돌이 있는 경우 긴 경로를 우선시 한다.</p>\n<p>이렇게 재 생성하는 경우 <code>Anonymous Volume</code>를 사용하는 것이 유용</p>\n<h3 id=\"volume-vs-bind-mount\" style=\"position:relative;\"><a href=\"#volume-vs-bind-mount\" aria-label=\"volume vs bind mount permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Volume vs Bind Mount</h3>\n<p>한줄정리 해보면</p>\n<p><strong>Volumes</strong>은 Docker에서 관리하는 호스트 파일 시스템과 컨테이너와 매핑해 데이터를 <strong>영구적으로 사용</strong>하는 방법</p>\n<p><strong>Bind Mount</strong>은 <strong>심볼릭 링크처럼 호스트 데이터를 읽을 때 사용 (호스트 폴더를 복사)</strong></p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>example</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Volume</td>\n<td>- 호스트 컴퓨터와 Docker 구성을 분리 할 경우 <br> - 컨테이너의 데이터를 로컬이 아닌 원격 호스트 또는 클라우드에 저장하는 경우 <br> - Docker 컨테이너 간 데이터를 백업, 복원, 마이그레이션 해야 하는 경우 (중지 후 백업 가능) <br> - 고성능 I/O가 필요한 경우 <br> - Docker에서 App이 완전한 기본 파일 시스템 동작을 요구하는 경우 (ex - DB)</td>\n</tr>\n<tr>\n<td>Bind Mount</td>\n<td>- 호스트 머신의 구성파일을 컨테이너로 공유 할 경우 (ex - DNS확인 시 /etc/resolv.conf 설정) <br> - 소스 코드 또는 빌드 아티팩트 공유 시 <br> - Docker의 호스트 파일 or 디렉토리 구조를 일치시킬 때</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"tmpfs-mount\" style=\"position:relative;\"><a href=\"#tmpfs-mount\" aria-label=\"tmpfs mount permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>tmpfs Mount</h3>\n<p>Volume과 bind Mount와 달리 일시적이며 호스트 <strong>메모리</strong>에 저장된다.</p>\n<p>호스트나 컨테이너 쓰기 가능 계층에 유지하고 싶지 않은 <strong>민감한 파일을 임시로 저장하는데 유용</strong></p>\n<ul>\n<li>Linux에서 Docker를 실행하는 경우에만 사용 가능</li>\n</ul>\n<h2 id=\"docker-setting\" style=\"position:relative;\"><a href=\"#docker-setting\" aria-label=\"docker setting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker Setting</h2>\n<h3 id=\"dockerignore\" style=\"position:relative;\"><a href=\"#dockerignore\" aria-label=\"dockerignore permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.dockerignore</h3>\n<p><code>.dockerignore</code>은 Docker CLI가 Docker demon으로 보내기 전에 지정된 파일 및 디렉토리를 제외하도록 컨텍스트를 수정</p>\n<p><code>gitignore</code>와 같이 <code>COPY</code>명령으로 복사하면 안되는 폴더와 파일 지정가능</p>\n<p><a href=\"https://docs.docker.com/engine/reference/builder/#dockerignore-file\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">.dockerignore 파일 - Docker document</a></p>\n<h3 id=\"env-설정\" style=\"position:relative;\"><a href=\"#env-%EC%84%A4%EC%A0%95\" aria-label=\"env 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.env 설정</h3>\n<p><code>Dockerfile</code> 내부의 <code>ENV</code>옵션으로 설정하여 환경변수가 존재함을 Docker에 알린다음<br>\n<code>docker run</code>에서 <code>--env</code>옵션을 사용해 구체적인 값 제공</p>\n<ul>\n<li>key-value 형태로 환경변수 지정 가능</li>\n<li><code>${VAR+}</code> 표현식을 지원하여 매개변수 확장 가능</li>\n<li>docker run 시에 –e 옵션을 활용하여 오버라이딩 가능</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"26678656531444654000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`ENV abc=hello\n\nENV FOO=/bar\nWORKDIR \\${FOO}`, `26678656531444654000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">ENV abc=hello</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">ENV FOO=/bar</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">WORKDIR </span><span class=\"mtk12\">${FOO}</span></span></span></code></pre>\n<p>환경 변수가 포함된 파일 지정 가능 (실행 위치로 부터 상대경로)</p>\n<p><code>--env-file</code>옵션을 사용해 환경 변수가 포함된 파일을 지정</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"51845487035148350000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -d --rm -p 3000:8000 --env-file ./.env`, `51845487035148350000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -d --rm -p 3000:8000 --env-file ./.env</span></span></span></code></pre>\n<h3 id=\"arg-설정\" style=\"position:relative;\"><a href=\"#arg-%EC%84%A4%EC%A0%95\" aria-label=\"arg 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARG 설정</h3>\n<blockquote>\n<p>Build시에만 사용 인수 지정</p>\n</blockquote>\n<ul>\n<li>key-value 형태로 환경변수 지정 가능</li>\n<li><code>${VAR+}</code> 표현식을 지원하여 매개변수 확장 가능</li>\n<li>빌드 시 특정값 잠금, 변경하지 않고 유연하게 빌드</li>\n<li>ARG명령어는 FROM는 에서 앞에 올 수 있는 유일한 명령</li>\n<li>docker build 시에 –build-arg 옵션을 활용하여 오버라이딩 가능</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"28247100517375934000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`ARG  CODE_VERSION=latest\nFROM base:\\${CODE_VERSION}`, `28247100517375934000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">ARG  CODE_VERSION=latest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">FROM base:</span><span class=\"mtk12\">${CODE_VERSION}</span></span></span></code></pre>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/53e054c24fe3f5ca15ded7e2c11ba39e/e4ddf/argEnv.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.86503067484662%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEJUlEQVR42oWU22+TZRzHX4oXxr/AO280ghijBi+80RDAeCDeeLgwXplIVKLGiLARDI4gh2RzAcZprd2JdRtlHVvXHbrRnRrGeljb9y1bj3RbaQd0HT1sXddu78e0ZTKJxl/yyfeb5/fm+7zv78nzCiv5NK7564hRFWL0yj+Zbyr2ph9pi9xZeKzxJ96TKPhrJFYeUCjBv2Cm1iZw2fUpF6QfuCh9x0X3gaJXOnbQMClwWLmFQ1cETukEylQCx1sFTrYL/HKpgIIjTQL2SFMpMBAzcEX8krKeGb5RD7JfNcBXF7rYrxqlyuGiTXqOcwaBs4atXBpUUNmhoKZXQU2/gkqdgsrrz1DdIzAZadgINKJ0vs2JsTEOd/Vw6EYXZfpuygxDnHOoaXMr0PkEdL4ttHu30BEo6YbvvLsVzZ3CGzaWAr0xc/GzWtzPo5l+hSZpGw3O7TRPb0PjepYWl0CzQ0DjKGmBwloBjVOg1aWgzi5gnVOXAsPxcczu7dg9rzLpexmz4yWGLS8i+V/A4d2GOLMT99xOxNCbSLNvIYZ2Yve+hs3zehG75w1uT+0gNHsacnGEh4sWvIHdBGc+IjizD2nqA5ziXm76q7g8aaZCq6S8rprj7fX8dk1Jha4FjVtHoPj8+wRnPsQXeo8HkdPImSBC7JGdSc+7SP49TAX3YBV3MW5/h37PUS7Y9FRcr+bo1ZP83nmecvWvlDecoFlUIfr3Ivl3I/n34vTt4n6kEnklhLCaCbP0UE061kgyrmEmUEvQe5nM4p/k45dYW6pnbbmRfLqe9ceaWVCSijVuooncoo78shdBXo0QXxiixRNA6fSgcnlRS35qpRCmkBtSJkiaSrpBegjSpk0MIScN5Jc9COTCTIRGKbc94OvmfvZVnOfjEzX8POrnlC3IymIfJA2sJ3qQEwbkRA+kepFTfZvoR07oS4Hr2QjL8T6MAQftXje6aQdayUKnX2QqNgmrw8iro5ArYEbOjrCeNEKqfxPGJ4H5bLS4M0u9kOkls3CDVFTL9Pw4R9p0HGzT81NTOwdqG/n2opofNXpap6X/CUx2I6cHkJdNPIrqic11EImPo71l4Np4H61mAy0jnWhM7bTd6sM6N/HfgXI2wuKCkTqXyB+3XZyziJy97eS8xcnwnAirA5AbhPxgSbNG5FRhpn1F5GSBTTNkNcyd6C2+73HxRU0Ln1XV88kZJZ+fbaVi4i6JeOGU+8mnBpAzpuJM/yb3WLMbp+xFWMveIxvvZCw0QafHisFno9tnpctnR7xnhoSebu0xDNpjWIeq0V09wrDhFOODlbTVHaJZdZCR3jOQ6CC3NIWwvpYhn7bBsgWWrE9hKfbi0dEisXsjhAMDzIducn92qOjDfiOx8Ai5lIW1wl0u/CFkYE2G9X9B5klt9k/XRu8v+9fWa9OlykMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/53e054c24fe3f5ca15ded7e2c11ba39e/a81b5/argEnv.webp 163w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/da3ef/argEnv.webp 325w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/309d5/argEnv.webp 650w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/78344/argEnv.webp 975w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/89e1d/argEnv.webp 1082w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/53e054c24fe3f5ca15ded7e2c11ba39e/5e043/argEnv.png 163w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/e5cc6/argEnv.png 325w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/663f3/argEnv.png 650w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/d880f/argEnv.png 975w,\n/static/53e054c24fe3f5ca15ded7e2c11ba39e/e4ddf/argEnv.png 1082w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/53e054c24fe3f5ca15ded7e2c11ba39e/663f3/argEnv.png\"\n            alt=\"argEnv\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>보안이 중요한 경우 데이터 종류에 따라 <code>Dockerfile</code>에 포함시키지 않을 수도 있다.</p>\n<p>그럴경우에 별도의 환경 변수 파일을 만들어 사용한다.</p>\n<h2 id=\"networking\" style=\"position:relative;\"><a href=\"#networking\" aria-label=\"networking permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Networking</h2>\n<p>통신은 3가지가 이루어지게 된다.</p>\n<p>컨테이너 &#x3C;-> www, 컨테이너 &#x3C;-> 호스트 컴퓨터, 컨테이너 &#x3C;->컨테이너</p>\n<p>www의 경우 아무 설정 없이도 연결된다.</p>\n<p>host Computer와 연결하기 위해선 <code>host.docker.internal</code>도메인을 사용해 http통신한다</p>\n<p>도커 컨테이너 내부에서 <strong>호스트 머신의 IP주소</strong>로 변환된다.</p>\n<p>내부 Container간 통신하기 위해서는 IP 주소를 수동으로 찾거나 network를 사용해 통신한다.</p>\n<p><code>docker run</code> 명령에 <code>--netrork</code> 옵션을 추가하면 모든 컨테이너를 하나의 동일한 네트워크에 넣을 수 있다.<br>\n-> IP조회 및 해결 작업을 자동으로 수행<br>\n-> 컨테이너 격리에 용이</p>\n<p>docker는 network경우 자동으로 생성하지 않기 때문에 사용하기 전 <code>docker network create</code>명령어로 생성이 필요</p>\n<p><code>docker network ls</code>를 사용해 네트워크 확인</p>\n<p>**동일한 네트워크로 연결 시 **url을 <strong>컨테이너 이름으로 지정 가능</strong></p>\n<p>ex) <code>mongodb://mongodb:27017/sw</code></p>\n<p>도커 컨테이너 이름또한 도커에 의해 IP주소로 변환된다.</p>\n<p>컨테이너 간 통신을 위해선 포트 게시 필요x<br>\n-> 로컬 호스트 머신이나 컨테이너 네트워크 외부에서 연결 할 경우만 필요</p>\n<h3 id=\"ip-resolving\" style=\"position:relative;\"><a href=\"#ip-resolving\" aria-label=\"ip resolving permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>IP Resolving</h3>\n<p><strong>컨테이너에서 요청을 전송할 때만 자동 IP 변환</strong></p>\n<p>즉, 사용자가 웹 앱 방문하여 Javascript 코드가 브라우저에서 실행 중이고 브라우저에서 요청이 전송되면 도커는 아무 작업도 수행하지 않는다.<br>\n(소스 코드 대체x)</p>\n<h2 id=\"docker-compose\" style=\"position:relative;\"><a href=\"#docker-compose\" aria-label=\"docker compose permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker-Compose</h2>\n<p>다중 컨테이너 설정을 더 쉽게 관리할 수 있게 해주고 설정 프로세스를 자동화하는데 도움</p>\n<p>다수의 <code>docker build</code>명령과 다수의 <code>docker run</code>을 하나의 구성파일로 가진다.</p>\n<p>docker compose가 Dockerfile과 함께 작동한다.</p>\n<p>하나의 동일한 호스트에서 다중 컨테이너를 관리하는데 좋다.</p>\n<p>컴포즈 파일에서 정의할 수 있고, 정의해야 하는 핵심이자 가장 중요한 항목은 <strong>서비스</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d677545157509445560b5dba9e08ce75/b7708/service.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.717791411042946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB9UlEQVR42l2Rv08TcRiH7y+QHi1GBhLjoAElcUBMi7270t7d93v9YYtATCxuJroY+SHBgbQkJA0OhER6IeHPcFDagAVpcDAuUkNcHBxclEpMlBLNY+40BB2ed3mfz2d4X0VTo5xEVzWuqv087iuxlahRkc+oijWqco2KeE7NXGdlwGVAjfB/1kPxRjRw7Rg9oNHfdoWFvhLb9ibruQq17DqbuQ02clW25Au/MBII/5Pz8AujqoYejKEHDfSgfowWMtBCOpG2CEa7jhlMEDkVJurv9L++cSIXw+tS7vVZ7BUljVlJo5ihUUyzW0zxbtbi9Yxg6JzFoBpHhgR25yCb40n25hx2C2kahaTvvy2k+TAveKQLlImIzcGSzZdFQdMdpemOsF++wcGiyacFydiFDKJdcr0jQ7bL4f1cim/lNPue5w7TdIf5XB7lyLWZtyVK/LTBrUsOeY8ei3y3Sb7HZqzX4Wa39I/vPSoRjBMOhBk5Lxjrlb7zx7XIX/T8JFbnIMp01OanG+fHkkarLGit5jhcNjl6ovF10eR2dwarXZDqSJHtknwsOfxa1jhctny3tZLk+5IBqwYLjkS5c9lk56GgPm5Sn5TUpzNsTwp2Jk027guGztroAYOYaiDPJHh6N8mrKZPtCc9NU59yePnA4s2MhXe+3xSvUZiyAPztAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d677545157509445560b5dba9e08ce75/a81b5/service.webp 163w,\n/static/d677545157509445560b5dba9e08ce75/da3ef/service.webp 325w,\n/static/d677545157509445560b5dba9e08ce75/309d5/service.webp 650w,\n/static/d677545157509445560b5dba9e08ce75/78344/service.webp 975w,\n/static/d677545157509445560b5dba9e08ce75/bdb72/service.webp 1300w,\n/static/d677545157509445560b5dba9e08ce75/e3f3a/service.webp 1854w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d677545157509445560b5dba9e08ce75/5e043/service.png 163w,\n/static/d677545157509445560b5dba9e08ce75/e5cc6/service.png 325w,\n/static/d677545157509445560b5dba9e08ce75/663f3/service.png 650w,\n/static/d677545157509445560b5dba9e08ce75/d880f/service.png 975w,\n/static/d677545157509445560b5dba9e08ce75/4c573/service.png 1300w,\n/static/d677545157509445560b5dba9e08ce75/b7708/service.png 1854w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d677545157509445560b5dba9e08ce75/663f3/service.png\"\n            alt=\"service\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>시작하기 위해 docker-compose.yml 생성</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"1144919452647519200\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`version: '3.8'\nservices:\n  mongodb:\n    image: 'mongo'\n    volumes:\n      - data:/data/db\n    # enviroment:\n    #   MONGO_INITDB_ROOT_USERNAME: max\n    #   MONGO_INITDB_ROOT_PASSWORD: secret\n    env_file:\n      - ./env/mongo.env\n    # networks:\n    #   - goals-net\n  backend:\n    # build: ./backend\n    build:\n      context: ./backend\n      dockerfile: Dockerfile\n      # args:\n      #   some-arg: 1\n    ports:\n      - '80:80'\n    volumes:\n      - logs:/app/logs\n      - ./backend:/app\n      - /app/node_modules\n    env_file:\n      - ./env/backend.env\n    dopends_on:\n      - mongodb\n  frontend:\n    build: ./frontend\n    ports:\n      - '3000:3000'\n    volumes:\n      - ./frontend/src:/app/src\n    stdin_open: true\n    tty: true\n    depends_on:\n      - backend\n\nvolumes:\n  data:\n  logs:`, `1144919452647519200`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"yaml\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">version</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&#39;3.8&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">services</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">mongodb</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">image</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&#39;mongo&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">volumes</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">data:/data/db</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># enviroment:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   MONGO_INITDB_ROOT_USERNAME: max</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   MONGO_INITDB_ROOT_PASSWORD: secret</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">env_file</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">./env/mongo.env</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># networks:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   - goals-net</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">backend</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># build: ./backend</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">build</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">context</span><span class=\"mtk1\">: </span><span class=\"mtk8\">./backend</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">dockerfile</span><span class=\"mtk1\">: </span><span class=\"mtk8\">Dockerfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\"># args:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">#   some-arg: 1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">ports</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">&#39;80:80&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">volumes</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">logs:/app/logs</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">./backend:/app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">/app/node_modules</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">env_file</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">./env/backend.env</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">dopends_on</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">mongodb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">frontend</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">build</span><span class=\"mtk1\">: </span><span class=\"mtk8\">./frontend</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">ports</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">&#39;3000:3000&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">volumes</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">./frontend/src:/app/src</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">stdin_open</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">tty</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">depends_on</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">backend</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">volumes</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">data</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">logs</span><span class=\"mtk1\">:</span></span></span></code></pre>\n<ul>\n<li>도커 컴포즈를 사용하면 도커가 이 컴포즈 파일에 특정된 모든 서비스에 대해 새 환경을 자동으로 생성하고 <strong>모든 서비스를 그 즉시 네트워크에 추가</strong>한다.</li>\n<li>networks 를 통해 지정도 가능하다.</li>\n<li>volumes엔 services에서 사용중인 명명된 볼륨이 나열되야 한다.</li>\n<li>다른 서비스에서 동일한 볼륨 이름을 사용하면 그 볼륨이 공유된다.\n<ul>\n<li>따라서 다른 컨테이너가 호스팅 머신 상의 동일한 볼륨, 동일한 폴더를 사용할 수 있다.</li>\n</ul>\n</li>\n<li><code>docker-compose up -d</code> 와 <code>docker-compose down</code>으로 모든 이미지를 가져온 다음 컨테이너를 시작하고 종료할 수 있다.</li>\n<li><code>build</code>를 통해 Dockerfile을 찾고 사용한다.\n<ul>\n<li>dockerfile로 다른 이름을 가진 <code>Dockerfile</code>도 지정이 가능하다.</li>\n</ul>\n</li>\n<li>volume을 지정할 떄 docker-compose.yaml의 상대경로를 이용할 수 있어 편리하다.</li>\n<li>익명 볼륨도 지정 가능 (/app/node_modules)</li>\n<li><strong>depends_on</strong>은 의존성을 표기(위의 yaml에서는 backend전에 mongodb를 먼저 불러와야 한다.)</li>\n<li>stdin_open, tty\n<ul>\n<li>이 두가지 옵션을 추가하면 frontend 컨테이너가 인터렉티브 모드에서 시작한다.</li>\n</ul>\n</li>\n<li><code>--build</code>옵션을 up명령어에 추가하면 이미지 리빌드를 강제할 수 있다.</li>\n</ul>\n<h2 id=\"utility-container\" style=\"position:relative;\"><a href=\"#utility-container\" aria-label=\"utility container permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Utility Container</h2>\n<p>유틸리티 컨테이너란 특정 환경만 포함하는 컨테이너를 의미한다.</p>\n<p>도커를 이용하면 시스템에 노드를 설치하지 않고 노드 어플리케이션을 사용할 수 있는데</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"59657714610365840000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -it node`, `59657714610365840000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -it node</span></span></span></code></pre>\n<p>이렇게 입력하면 interactive 모드로 node를 실행할 수 있다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"15704795084289680000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker exec`, `15704795084289680000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"32\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker </span><span class=\"mtk11\">exec</span></span></span></code></pre>\n<p>컨테이너 안에서 dockerfile에서 명시한 명령어들 외에 추가로 execute할 수 있다.</p>\n<hr>\n<p>잠깐 정리</p>\n<ol>\n<li>Interactive mode</li>\n</ol>\n<ul>\n<li>Docker를 사용하면 대화형 모드에서 컨테이너를 실행</li>\n<li>컨테이너를 대화식으로 사용하면 실행 중인 컨테이너 내부의 명령 프롬프트에 액세스할 수 있습니다.</li>\n<li><code>-it</code>명령어로 모드 설정</li>\n</ul>\n<ol start=\"2\">\n<li>Attached mode</li>\n</ol>\n<ul>\n<li>Attached mode에서 Docker는 컨테이너에서 프로세스를 시작하고 콘솔을 프로세스의 표준 입력, 표준 출력 및 표준 오류에 연결</li>\n</ul>\n<ol start=\"3\">\n<li>Detached mode</li>\n</ol>\n<ul>\n<li>컨테이너가 입력 또는 출력 스트림에 연결되지 않고 백그라운드에서 실행</li>\n</ul>\n<hr>\n<p>docker exec</p>\n<ul>\n<li>‘docker exec’ 명령을 사용하면 이 컨테이너가 실행하는 기본 명령 외에 실행 중인 컨테이너 내에서 특정 명령을 실행 가능</li>\n<li>Interactive 모드여야 한다.</li>\n</ul>\n<hr>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"87042003049018260000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`FROM node:14-alpine\n\nWORKDIR /app\n\nCMD npm init`, `87042003049018260000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"33\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> node:14-alpine</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">WORKDIR</span><span class=\"mtk1\"> /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">CMD</span><span class=\"mtk1\"> npm init</span></span></span></code></pre>\n<p>이제 어떤 프로젝트를 빌드한다고 가정</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"50995569881999400000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker build -t node-util .`, `50995569881999400000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"34\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker build -t node-util </span><span class=\"mtk11\">.</span></span></span></code></pre>\n<p>기본 설정이 다음과 같을 때 사용자에게 init을 강요하지 않고 더 자유로운 사용성을 주기 위해서 npm init을 제거하고 이미지를 빌드</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"29805863651938650000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -it node-util npm init`, `29805863651938650000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"35\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -it node-util npm init</span></span></span></code></pre>\n<p>이제 컨테이너를 시작한다.</p>\n<p>이렇게 시작해주면 npm init 명령어는 위에서 설정한 /app 디렉토리 내부에서 실행되게 된다. 그걸 바인드 마운트로 로컬 폴더에 미러링해보자.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"32287318836882050000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -it -v /Users/hshoon/Desktop/git_local/docker-study/utility_setup:/app node-util npm init`, `32287318836882050000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"36\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -it -v /Users/hshoon/Desktop/git_local/docker-study/utility_setup:/app node-util npm init</span></span></span></code></pre>\n<p>이렇게 사용하면 로컬 머신에 어떤 프로그램을 설치할 일 없이 도커를 이용해 간단하게 어플리케이션을 제작할 수 있다.</p>\n<p>여기 Dockerfile에 ENTRYPOINT라는 속성을 사용할 수 있는데</p>\n<p>Dockerfile을 다음과 같이 작성하고</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"31781247989855556000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`FROM node:14-alpine\n\nWORKDIR /app\n\nENTRYPOINT [ &quot;npm&quot; ]`, `31781247989855556000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"37\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> node:14-alpine</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">WORKDIR</span><span class=\"mtk1\"> /app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">ENTRYPOINT</span><span class=\"mtk1\"> [ </span><span class=\"mtk8\">&quot;npm&quot;</span><span class=\"mtk1\"> ]</span></span></span></code></pre>\n<p>이미지를 생성해주면 뒤에 적은 npm init 대신 init만 적어줘도 실행 가능하다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"36944357930067140000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -it -v /Users/hshoon/Desktop/git_local/docker-study/utility_setup:/app mynpm init`, `36944357930067140000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"38\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -it -v /Users/hshoon/Desktop/git_local/docker-study/utility_setup:/app mynpm init</span></span></span></code></pre>\n<p>이제 이걸 이용해서 해당 node 프로젝트에 express를 추가해보면</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"98306261952899530000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker run -it -v /Users/hshoon/docker:/app mynpm install express --save`, `98306261952899530000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"39\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker run -it -v /Users/hshoon/docker:/app mynpm install express --save</span></span></span></code></pre>\n<p>바인드 마운트를 실행한 폴더에 모듈들이 들어온다.</p>\n<p>이제 docker run 뒤에 들어가는 귀찮은 명령어들을 dockerCompose로 이식해보자.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"86792546279713880000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`version: '3.8'\nservices:\n  npm:\n    build: ./\n    stdin_open: true\n    tty: true\n    volumes: - ./:/app`, `86792546279713880000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"40\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">version: </span><span class=\"mtk8\">&#39;3.8&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">services:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  npm:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    build: ./</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    stdin_open: true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    tty: true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    volumes: - ./:/app</span></span></span></code></pre>\n<p>명령어는 다음과 같이 적어주면 된다.</p>\n<p>단일 컨테이너를 docker compose로 실행해주는 경우</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"20681572771050406000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`docker-compose run npm init`, `20681572771050406000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"41\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">docker-compose run npm init</span></span></span></code></pre>\n<p>이렇게 npm에서 init을 해달라고 요청 가능하다</p>\n<hr>\n<p>요약하자면 Docker 에서는 Utility Container 기능을 통해 로컬에 환경구축 없이 개발, 실행이 가능해진다.</p>\n<h2 id=\"multi-container-project-example\" style=\"position:relative;\"><a href=\"#multi-container-project-example\" aria-label=\"multi container project example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-Container Project example</h2>\n<p>컴퓨터에 도커 외에 그 어떤 도구를 설치할 필요 없이 Larabel &#x26; PHP 프로젝트를 통해 학습한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0147968f30b7050a859ef86d33f12e46/a96be/laravel.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.21472392638037%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC7ElEQVR42nXS22+TdQDG8ffCRGFG1tMO4jCaDEYLjFPbtX3f33vouR0trrSjbI6tFVZKV+bYsXUT3MLFTJiLije6aFCzeEEWtAlGM2fVSTxdmgVMuPHexH/ga6yJiRdefO6+d88jnbcbnD0YQ1j9xNplNkbj1MaS1EoJapdPUcuL//gsp/wPQS0nkGJ7dS6IIRL7k8RavdQn+7m/kKM+PcA3s8PUiwZbBcFWQaV+SWe7FOS7UuBf26UA35cC1C/rbBZVJN9TMt2P9XDiCR+a2cC7W8f5uBfD4iPZGqLcOUP10BIVxyITB14hsCfJyV0CV5PW4Nyt4m7S8TT5Ob5LRvK3qFT0COM+A9XsQ2lWMGw+vpo9y4/XBtlK1ng08pBHuR22T31NtiND0GJgmDV0k4pqklGavYSsflSzjBRsU9koZPhhcob57lkq9jle7iqTaI8Sbwszsvciox1lRjvGyD9TIGyJEDSHKO0vUjk0S9VeYdoxQebpFxAmGcm7x0vIlOBefJOH2Z2GrdOb9NoSCItgeWCIdwo53h7NsToyTHyfTnpfiE8jd/gt84AH2V+5f/ones1Z3E/KSHKzj5g1ypRjkvnD81w/tsDc4Smilgj+VsHOR4v8ufkGf3y5yu8bNxhwhIjb/Fy1X2Hp2ALTXfN8kqny7cwgZVcISTHJpJ4Lku70c6ZTZcih8qLdz8WjES4cDXNVpKgGU1yP9jGlneGl7ij5IxHOOwKNtu95wYQc5oOhPs4dMJA0q498V4r3lTXu9d5teNfzHmXXAOPuc6w4b7Ee3GA9eIdbnjXKxwcZ92R50/0WnydrfJG+y23xMdln+5GbFaS/lxk+mOSGp8KK8horyiJLrjnK7gzFk2nWeqv8Un6dn8eWWU9do3iinyueNK86J1lVl7gpFln2LXDpSArdqiD9cxOB0dKDZnOi2lzoNg+RdoFmlim7NW7nY3yYjzIjNHSrINwm8Ld4Gr1mdaHZegi0CIRJ4S+hK8NU2GEZdwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0147968f30b7050a859ef86d33f12e46/a81b5/laravel.webp 163w,\n/static/0147968f30b7050a859ef86d33f12e46/da3ef/laravel.webp 325w,\n/static/0147968f30b7050a859ef86d33f12e46/309d5/laravel.webp 650w,\n/static/0147968f30b7050a859ef86d33f12e46/78344/laravel.webp 975w,\n/static/0147968f30b7050a859ef86d33f12e46/bdb72/laravel.webp 1300w,\n/static/0147968f30b7050a859ef86d33f12e46/e47e2/laravel.webp 2164w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0147968f30b7050a859ef86d33f12e46/5e043/laravel.png 163w,\n/static/0147968f30b7050a859ef86d33f12e46/e5cc6/laravel.png 325w,\n/static/0147968f30b7050a859ef86d33f12e46/663f3/laravel.png 650w,\n/static/0147968f30b7050a859ef86d33f12e46/d880f/laravel.png 975w,\n/static/0147968f30b7050a859ef86d33f12e46/4c573/laravel.png 1300w,\n/static/0147968f30b7050a859ef86d33f12e46/a96be/laravel.png 2164w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0147968f30b7050a859ef86d33f12e46/663f3/laravel.png\"\n            alt=\"laravel\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<ul>\n<li>로컬 머신에서는 코드를 작성한다.</li>\n<li>\n<ol>\n<li>소스코드 폴더는 PHP인터프리터 컨테이너라는 하나의 컨테이너에 노출된다</li>\n</ol>\n<ul>\n<li>이 컨테이너에는 PHP가 설치되어 있다.</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>Nginx 웹서버가 들어있는 컨테이너가 있다</li>\n</ol>\n<ul>\n<li>기본적으로 들어오는 요청을 받은 다음 PHP인터프리터로 이동</li>\n<li>PHP인터프리터가 응답을 생성해 요청을 전송한 클라이언트에게 요청을 돌려준다.</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>DB에 저장하기 위해 MySQL DB를 추가한다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"4\">\n<li>패키지 관리를 하기 위한 Composer</li>\n</ol>\n</li>\n<li>\n<ol start=\"5\">\n<li>Laravel Artisan</li>\n</ol>\n</li>\n<li>\n<ol start=\"6\">\n<li>프론트 로직을 위한 npm</li>\n</ol>\n</li>\n</ul>\n<p>총 6가지 컨테이너를 구축한다.</p>\n<hr>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"46743972479436380000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`version: &quot;3.8&quot;\n\nservices:\n  server:\n    #image: 'nginx:stable-alpine'\n    build:\n      context: .\n      dockerfile: dockerfiles/nginx.dockerfile\n    ports:\n      - '8000:80'\n    # volumes:\n    #   - ./src:/var/www/html\n    #   - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro\n    depends_on:\n      - php\n      - mysql\n  php:\n    build:\n      context: ./dockerfiles\n      dockerfile: php.dockerfile\n    # volumes:\n    #   - ./src:/var/www/html:delegated\n  mysql:\n    image: mysql:5.7\n    env_file:\n      - ./env/mysql.env\n  composer:\n    build:\n      context: ./dockerfiles\n      dockerfile: composer.dockerfile\n    volumes:\n      - ./src:/var/www/html\n  artisan:\n    build:\n      context: .\n      dockerfile: dockerfiles/php.dockerfile\n    volumes:\n      - ./src:/var/www/html\n    entrypoint: [&quot;php&quot;, &quot;/var/www/html/artisan&quot;]\n  npm:\n    image: node:14\n    working_dir: /var/www/html\n    entrypoint: [&quot;npm&quot;]\n    volumes:\n      - ./src:/var/www/html`, `46743972479436380000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"42\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">version: </span><span class=\"mtk8\">&quot;3.8&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">services:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  server:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#image: &#39;nginx:stable-alpine&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    build:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context: .</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      dockerfile: dockerfiles/nginx.dockerfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ports:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - </span><span class=\"mtk8\">&#39;8000:80&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># volumes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   - ./src:/var/www/html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    depends_on:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - php</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - mysql</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  php:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    build:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context: ./dockerfiles</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      dockerfile: php.dockerfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># volumes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">#   - ./src:/var/www/html:delegated</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  mysql:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    image: mysql:5.7</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    env_file:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - ./env/mysql.env</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  composer:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    build:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context: ./dockerfiles</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      dockerfile: composer.dockerfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    volumes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - ./src:/var/www/html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  artisan:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    build:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      context: .</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      dockerfile: dockerfiles/php.dockerfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    volumes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - ./src:/var/www/html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    entrypoint: [</span><span class=\"mtk8\">&quot;php&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;/var/www/html/artisan&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  npm:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    image: node:14</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    working_dir: /var/www/html</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    entrypoint: [</span><span class=\"mtk8\">&quot;npm&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    volumes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      - ./src:/var/www/html</span></span></span></code></pre>\n<ul>\n<li>추가적인 설정 파일이 많지만 Dockerfile만 정리</li>\n<li>delegated 옵션 사용 시 성능을 약간 상승\n<ul>\n<li>컨테이너가 일부 데이터를 기록해야하는 경우에 그에 대한 결과를 호스트 머신에 즉시 반영하지 않고 배치로 기본처리</li>\n</ul>\n</li>\n<li>설정을 할 때 내부통신을 이용하고, 외부 포트로 연결하지 않는다.</li>\n<li>필요한 경우 이미지에 리빌드 하도록 하려면 <code>--build</code>옵션 추가\n<ul>\n<li>docker-compose up -d –build server</li>\n</ul>\n</li>\n<li>npm부분은 docker-compose에 설정하였지만, Dockerfile로 분리 가능</li>\n<li>docker-compose에 bind mount를 하면 소스코드를 즉시 읽고 적용될 수 있지만, 배포시에는 해당하지 않으므로 <code>COPY</code>로 변경 (Dockerfile에 있음)</li>\n<li>COPY를 하면 도커 내부에서 권한 문제가 발생할 수 있다\n<ul>\n<li>Dockerfile내부에 <code>RUN chown -R www-data:www-data /var/www/html</code>로 설정</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"deploy\" style=\"position:relative;\"><a href=\"#deploy\" aria-label=\"deploy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deploy</h2>\n<p>도커로 배포 시 주의해야 할 사항</p>\n<ol>\n<li>바인드 마운트를 사용하지 않는다.</li>\n<li>컨테이너화 된 앱의 개발 및 최종 제품 생산을 위해 다른 설정이 필요하다.</li>\n</ol>\n<ul>\n<li>예를들어 React앱과 같은 Application은 코드가 변환되고 최적화 되는 빌드가 필요</li>\n</ul>\n<ol start=\"3\">\n<li>\n<p>여러 컨테이너로 구성된 복잡한 애플리케이션은 단일 머신의 리소스 한계를 넘어설 수 있어, 여러 호스트나 원격 머신에 분산 배포해야 할 수 있습니다.</p>\n</li>\n<li>\n<p>제어와 책임 사이의 균형</p>\n</li>\n</ol>\n<ul>\n<li>제어: Docker를 사용하면 애플리케이션과 그 환경을 세밀하게 제어할 수 있습니다. 개발자가 컨테이너의 구성, 리소스 할당, 네트워킹 등을 직접 관리할 수 있습니다.</li>\n<li>책임: 하지만 이러한 제어력은 더 많은 책임을 수반합니다. 개발자는 보안, 업데이트, 리소스 관리 등 시스템 관리 업무의 일부를 담당해야 합니다.</li>\n</ul>\n<hr>\n<p>배포시에는 bind-mount가 아닌 copy로 코드를 복사해서 컨테이너를 실행해야 한다.</p>\n<!-- TODO: 추가 -->\n<h2 id=\"docker--컨테이너-요약\" style=\"position:relative;\"><a href=\"#docker--%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9A%94%EC%95%BD\" aria-label=\"docker  컨테이너 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker &#x26; 컨테이너 요약</h2>\n<p>컨테이너</p>\n<ul>\n<li>코드와 그 코드를 실행하는데 필요한 환경을 포함하는 격리된 박스</li>\n<li>모든 컨테이너는 일반적으로 하나의 태스크에 집중한다.</li>\n<li>결국 그 컨테이너에 고정된 재현 가능한 환경을 가지게 된다.</li>\n<li>컨테이너는 일종의 무상태(Stateless) / 볼륨을 제외하고</li>\n</ul>\n<p>이미지</p>\n<ul>\n<li>Dockerfile로 만들거나, Docker Hub에서 가져온다.</li>\n<li>Dockerfile에는 코드와 환경이 포함되어 있다.</li>\n<li>컨테이너는 이미지 위의 얇은 부가 레이어이며, 하나의 동일 이미지에서 다중 컨테이너를 실행할 수 있다.</li>\n<li>이미지는 공유 가능하며, 이미지를 기반으로 다중 컨테이너를 만들 수 있다.</li>\n<li>이미지 기반으로 컨테이너를 실행하고, 그 컨테이너가 일부 데이터를 생성하는 경우 데이터는 이미지에 기록되지 않고 이미지 위의 얇은 레이어에 있는 컨테이너의 읽기/쓰기 파일 시스템에 기록된다</li>\n<li>즉, 이미지는 절대 변경되지 않으며 쉽게 빌드되어 다른 사람들과 공유 가능</li>\n</ul>\n<p>주요 명령어</p>\n<ul>\n<li>docker build : Dockerfile 기반으로 이미지 빌드</li>\n<li>docker run : 이미지를 컨테이너로 실행\n<ul>\n<li>–name : 컨테이너에 이름 지정</li>\n<li>–rm : 자동으로 제거</li>\n<li>-d : detached모드</li>\n</ul>\n</li>\n</ul>\n<p>볼륨 - 로컬 임시 저장소\n바인드 마운트 - 로컬 영구 저장소</p>\n<p>Docker-compose</p>\n<ul>\n<li>컨테이너 시작 구성을 구성 파일에 넣을 수 있다.</li>\n<li>이 구성 파일은 ‘docker-compose up’을 실행할 때 자동으로 선택되어 전송되며, 그 구성파일에 정의된 모든 컨테이너를 시작하고 초기화</li>\n</ul>\n<p>로컬 호스트, 리모트 호스트</p>\n<ul>\n<li>격리되고, 캡슐화되고, 재현 가능한 개발환경을 가지고 있기에 상호종속성이 없으며, 따라서 로컬 시스템 개발이 매우 편리</li>\n<li>리모트 호스트도 마찬가지로 동일</li>\n</ul>\n<h1 id=\"추가로-더-알아-볼-내용\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80%EB%A1%9C-%EB%8D%94-%EC%95%8C%EC%95%84-%EB%B3%BC-%EB%82%B4%EC%9A%A9\" aria-label=\"추가로 더 알아 볼 내용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가로 더 알아 볼 내용</h1>\n<ul>\n<li>Docker registry를 사용해 이미지 관리</li>\n</ul>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://www.udemy.com/course/docker-kubernetes-2022/learn/lecture/30290134#overview\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">【한글자막】 Docker &#x26; Kubernetes : 실전 가이드</a><br>\n<a href=\"https://docs.docker.com/storage/storagedriver/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Storage drivers - Docker docs</a><br>\n<a href=\"https://docs.docker.com/build/building/multi-stage/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Multi-stage builds - Docker docs</a><br>\n<a href=\"http://cloudrain21.com/examination-of-docker-protocol-registry\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">도커 컨테이너 까보기(1) - Protocol, Registry</a><br>\n<a href=\"http://cloudrain21.com/examination-of-docker-containersize-ufs\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">도커 컨테이너 까보기(2) – Container Size, UFS</a><br>\n<a href=\"https://cloud.google.com/learn/what-are-containers?hl=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">What are Containers? - Google Cloud</a><br>\n<a href=\"https://www.redhat.com/en/topics/containers/whats-a-linux-container\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">What’s a Linux container? - Red Hat</a><br>\n<a href=\"http://www.opennaru.com/openshift/container/what-is-the-difference-between-docker-lxd-and-lxc/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker 그리고 Linux 컨테이너 기술들</a><br>\n<a href=\"https://earthly.dev/blog/lxc-vs-docker/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Table of contents LXC vs Docker: Which Container Platform Is Right for You?</a><br>\n<a href=\"https://www.redhat.com/ko/topics/containers/what-is-docker\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker란? - Red Hat</a><br>\n<a href=\"https://www.oracle.com/kr/cloud/cloud-native/container-registry/what-is-docker/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker란 무엇인가? - OCI</a><br>\n<a href=\"https://www.redhat.com/ko/topics/virtualization/what-is-a-hypervisor\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">What is a hypervisor? - Red Hat</a><br>\n<a href=\"https://www.redhat.com/en/topics/virtualization/what-is-a-virtual-machine\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">What is a virtual machine (VM)? - Red Hat</a><br>\n<a href=\"https://www.redhat.com/en/topics/containers/containers-vs-vms\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Containers vs VMs</a><br>\n<a href=\"https://collabnix.com/docker-cheatsheet/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker Cheatsheet [2023 Updated] - Collabnix</a><br>\n<a href=\"https://vsupalov.com/docker-arg-vs-env/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Docker ARG vs ENV - vsupalov blog</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#container\">Container</a></p>\n</li>\n<li>\n<p><a href=\"#lxc-vs-docker\">LXC vs Docker</a></p>\n</li>\n<li>\n<p><a href=\"#docker\">Docker</a></p>\n<ul>\n<li>\n<p><a href=\"#images--containers\">Images &#x26; Containers</a></p>\n</li>\n<li>\n<p><a href=\"#docker-command\">Docker Command</a></p>\n</li>\n<li>\n<p><a href=\"#volumes\">Volumes</a></p>\n<ul>\n<li><a href=\"#named-volume\">Named Volume</a></li>\n<li><a href=\"#anonymous-volume\">Anonymous Volume</a></li>\n<li><a href=\"#bind-mount\">Bind Mount</a></li>\n<li><a href=\"#volume-vs-bind-mount\">Volume vs Bind Mount</a></li>\n<li><a href=\"#tmpfs-mount\">tmpfs Mount</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#docker-setting\">Docker Setting</a></p>\n<ul>\n<li><a href=\"#dockerignore\">.dockerignore</a></li>\n<li><a href=\"#env-%EC%84%A4%EC%A0%95\">.env 설정</a></li>\n<li><a href=\"#arg-%EC%84%A4%EC%A0%95\">ARG 설정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#networking\">Networking</a></p>\n<ul>\n<li><a href=\"#ip-resolving\">IP Resolving</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#docker-compose\">Docker-Compose</a></p>\n</li>\n<li>\n<p><a href=\"#utility-container\">Utility Container</a></p>\n</li>\n<li>\n<p><a href=\"#multi-container-project-example\">Multi-Container Project example</a></p>\n</li>\n<li>\n<p><a href=\"#deploy\">Deploy</a></p>\n</li>\n<li>\n<p><a href=\"#docker--%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88-%EC%9A%94%EC%95%BD\">Docker &#x26; 컨테이너 요약</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B6%94%EA%B0%80%EB%A1%9C-%EB%8D%94-%EC%95%8C%EC%95%84-%EB%B3%BC-%EB%82%B4%EC%9A%A9\">추가로 더 알아 볼 내용</a></p>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"Docker를 톺아보자","summary":["Docker 공식 문서 뜯어보며 학습하기"],"date":"2025.01.13.","category":["CI/CD"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABs0lEQVR42j2RwU5TURCGWaKmaUu0bTz3zJkzc05bWlraWqSlRBLx1lwj0EQ3gBYbgsSrLsAYq0kTI0bBGtuFrqoLlxg2PoAxGhduXLn2MYxbAxeY5SRf/n++GaJgmFmBNlY0VsnfEvMtMCkCh4wxWmlirtWNtww1D5lZIxET0dAhiYDZ4nBnN9T7UtzejfS/htsfqFRhJyEz+ZPeGjQ71dUn0OwMX/FVMhPwAWxYxGP3eqfe/RKlKiRiZ1NZ3nxT7O7FK7NRrxlyb4jRcUiccdhGl7dwbl2DID6AmciRsjT4mfRfynROzszBxAWdysCt9sTGjnUb0qahVpfTnsyfG728WLjbd5TmoDYTgZT27Q91ZwcBoHJRFSaF5kxjJe0/D68909k8FCuyekmOFUx9aWz9tUTko5uNEfHTracnPv6B2QUUCTXthvzt8EzDKZyPtgeR+z0nV0bpiFw51OqK+sq+y6D2frZGssmRV59Hvv0t7/2Off8XefEJEQ0InR2PLD22j95PPujTw0H42gYay1of2T4UrgiVnL9pNrtw/TYZw4hkLB3szZRrrjZ5ytWoj1/1HxGaaj/6QzkyAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/db7161d6dab6a687d031a8ad7a9323b6/029fa/thumbnail.png","srcSet":"/static/db7161d6dab6a687d031a8ad7a9323b6/d4985/thumbnail.png 150w,\n/static/db7161d6dab6a687d031a8ad7a9323b6/3aea9/thumbnail.png 300w,\n/static/db7161d6dab6a687d031a8ad7a9323b6/029fa/thumbnail.png 600w","sizes":"(min-width: 600px) 600px, 100vw"},"sources":[{"srcSet":"/static/db7161d6dab6a687d031a8ad7a9323b6/0d069/thumbnail.webp 150w,\n/static/db7161d6dab6a687d031a8ad7a9323b6/3242e/thumbnail.webp 300w,\n/static/db7161d6dab6a687d031a8ad7a9323b6/06e21/thumbnail.webp 600w","type":"image/webp","sizes":"(min-width: 600px) 600px, 100vw"}]},"width":600,"height":233}},"publicURL":"/static/db7161d6dab6a687d031a8ad7a9323b6/thumbnail.png"}}}}]}},"pageContext":{"slug":"/Docker_1/","series":[{"slug":"/Docker_1/","title":"Docker를 톺아보자","num":1}],"lastmod":"2025.01.13."}},"staticQueryHashes":["2383754777"],"slicesMap":{}}