{"componentChunkName":"component---src-templates-post-tsx","path":"/JPA_1/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"bb07f8b9-7467-5683-81e3-b17afe4fd1a1","html":"<h1 id=\"jpa-java-persistence-api\" style=\"position:relative;\"><a href=\"#jpa-java-persistence-api\" aria-label=\"jpa java persistence api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA (JAVA Persistence API)</h1>\n<blockquote>\n<p>자바 ORM 기술 표준</p>\n</blockquote>\n<h2 id=\"ormobject-relational-mapping\" style=\"position:relative;\"><a href=\"#ormobject-relational-mapping\" aria-label=\"ormobject relational mapping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ORM(Object-relational mapping)</h2>\n<blockquote>\n<p>프레임 워크가 중간에서 매핑</p>\n</blockquote>\n<ul>\n<li>JPA는 APP과 JDBC 사이에서 동작</li>\n<li>패러다임의 불일치 해결</li>\n</ul>\n<p>JPA는 인터페이스 모음 -> Hibernate (구현체)</p>\n<h2 id=\"jpa-설정persistencexml\" style=\"position:relative;\"><a href=\"#jpa-%EC%84%A4%EC%A0%95persistencexml\" aria-label=\"jpa 설정persistencexml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPA 설정(Persistence.xml)</h2>\n<blockquote>\n<p>JPA 설정하기 위해선 <strong>Persistence.xml</strong>필요</p>\n</blockquote>\n<ul>\n<li>/META_INF/persistence.xml위치</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"69403145398461596000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`<?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?>\n<persistence version=&quot;2.2&quot;\n             xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n             xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;>\n    <persistence-unit name=&quot;hello&quot;>\n        <properties>\n            <!-- 필수 속성 -->\n            <!-- 자바 접근 정보-->\n            <property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot;/>\n            <property name=&quot;javax.persistence.jdbc.user&quot; value=&quot;sa&quot;/>\n            <property name=&quot;javax.persistence.jdbc.password&quot; value=&quot;&quot;/>\n            <property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:tcp://localhost/~/test&quot;/>\n            <property name=&quot;hibernate.dialect&quot; value=&quot;org.hibernate.dialect.H2Dialect&quot;/>\n            <!-- 옵션 -->\n            <property name=&quot;hibernate.show_sql&quot; value=&quot;true&quot;/>\n            <property name=&quot;hibernate.format_sql&quot; value=&quot;true&quot;/>\n            <property name=&quot;hibernate.use_sql_comments&quot; value=&quot;true&quot;/>\n<!--            <property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; />-->\n        </properties>\n    </persistence-unit>\n</persistence>`, `69403145398461596000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"xml\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;?</span><span class=\"mtk4\">xml</span><span class=\"mtk12\"> version</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;1.0&quot;</span><span class=\"mtk12\"> encoding</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;UTF-8&quot;</span><span class=\"mtk17\">?&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">persistence</span><span class=\"mtk1\"> </span><span class=\"mtk12\">version</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;2.2&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             </span><span class=\"mtk12\">xmlns</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">xmlns:xsi</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             </span><span class=\"mtk12\">xsi:schemaLocation</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">persistence-unit</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;hello&quot;</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">properties</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">&lt;!-- 필수 속성 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">&lt;!-- 자바 접근 정보--&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;javax.persistence.jdbc.driver&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;org.h2.Driver&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;javax.persistence.jdbc.user&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;sa&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;javax.persistence.jdbc.password&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;javax.persistence.jdbc.url&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;jdbc:h2:tcp://localhost/~/test&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;hibernate.dialect&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;org.hibernate.dialect.H2Dialect&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk3\">&lt;!-- 옵션 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;hibernate.show_sql&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;hibernate.format_sql&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk17\">&lt;</span><span class=\"mtk4\">property</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;hibernate.use_sql_comments&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk12\">value</span><span class=\"mtk1\">=</span><span class=\"mtk8\">&quot;true&quot;</span><span class=\"mtk17\">/&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!--            &lt;property name=&quot;hibernate.hbm2ddl.auto&quot; value=&quot;create&quot; /&gt;--&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">properties</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">persistence-unit</span><span class=\"mtk17\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk17\">&lt;/</span><span class=\"mtk4\">persistence</span><span class=\"mtk17\">&gt;</span></span></span></code></pre>\n<ul>\n<li>persistence-unit name으로 이름 지정</li>\n<li>javax.persistence -> DB접근 정보</li>\n<li>hibernate -> 하이버네이트 전용 속성</li>\n<li>hibernate.dialect -> DB에 맞는 sql 문법 지정<br>\nex) MySQLDialect, OracleDialect, H2Dialect</li>\n</ul>\n<p><img src=\"jpa.png\" alt=\"\"></p>\n<h2 id=\"주의-사항\" style=\"position:relative;\"><a href=\"#%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD\" aria-label=\"주의 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>주의 사항</h2>\n<ul>\n<li>엔티티 매니저 팩토리는 애플리케이션 전체에서 공유</li>\n<li>엔티티 매니저는 쓰레드간에 공유X (사용하고 버려야 한다)</li>\n<li>JPA의 모든 데이터 변경은 트랜잭션 안에서 실행</li>\n</ul>\n<h2 id=\"jpql\" style=\"position:relative;\"><a href=\"#jpql\" aria-label=\"jpql permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPQL</h2>\n<blockquote>\n<p>SQL을 추상화한 객체 지향 쿼리 언어</p>\n</blockquote>\n<p>특징</p>\n<ul>\n<li>객체를 중심으로 개발</li>\n<li>검색시 테이블이 아닌 엔티티 객체를 대상으로 검색</li>\n<li>모든 DB 데이터를 객체로 변환해서 검색하는 것은 불가능</li>\n<li>필요한 데이터를 DB에서 불러오려면 결국 검색 조건이 포함된 SQL 필요</li>\n</ul>\n<h1 id=\"영속성\" style=\"position:relative;\"><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1\" aria-label=\"영속성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>영속성</h1>\n<ul>\n<li>객체와 관계형 데이터 베이스 매핑</li>\n<li>영속성 컨텍스트</li>\n</ul>\n<h2 id=\"영속성-컨텍스트란\" style=\"position:relative;\"><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%9E%80\" aria-label=\"영속성 컨텍스트란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>영속성 컨텍스트란?</h2>\n<p>-> 엔티티를 영구 저장하는 환경<br>\n-> <strong>DB와 App간에 중간 계층</strong></p>\n<p>장점</p>\n<ul>\n<li>1차 캐시</li>\n<li>동일성 보장</li>\n<li>트랜잭션을 지원하는 쓰기 지원</li>\n<li>변경 감지</li>\n<li><strong>지연 로딩</strong></li>\n</ul>\n<h2 id=\"플러시란\" style=\"position:relative;\"><a href=\"#%ED%94%8C%EB%9F%AC%EC%8B%9C%EB%9E%80\" aria-label=\"플러시란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>플러시란?</h2>\n<blockquote>\n<p>영속성 컨텍스트의 변경 내용을 DB에 반영 (영속성 컨텍스트를 비우지 않음)</p>\n</blockquote>\n<p><strong>플러시 과정</strong><br>\n변경 감지 -> 수정된 엔티티를 쓰기 지연 SQL 저장소에 등록<br>\n-> 쿼리를 데이터베이스에 전송</p>\n<h3 id=\"영속성-컨텍스트를-플러시-하는-방법\" style=\"position:relative;\"><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A5%BC-%ED%94%8C%EB%9F%AC%EC%8B%9C-%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"영속성 컨텍스트를 플러시 하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>영속성 컨텍스트를 플러시 하는 방법</h3>\n<ul>\n<li>em.flush() : 직접 호출</li>\n<li>트랜잭션 커밋 : 플러시 자동 호출</li>\n<li>JPQL 쿼리 : 플러시 자동 호출</li>\n</ul>\n<h2 id=\"준영속-상태\" style=\"position:relative;\"><a href=\"#%EC%A4%80%EC%98%81%EC%86%8D-%EC%83%81%ED%83%9C\" aria-label=\"준영속 상태 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>준영속 상태</h2>\n<blockquote>\n<p>영속 상태의 엔티티를 영속성 컨텍스트에서 분리</p>\n</blockquote>\n<ul>\n<li>em.detach(entity) : 특정 엔티티만 준영속 상태로 전환</li>\n<li>em.clear() : 초기화</li>\n<li>em.close() : 종료</li>\n</ul>\n<h1 id=\"entity-mapping\" style=\"position:relative;\"><a href=\"#entity-mapping\" aria-label=\"entity mapping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Entity Mapping</h1>\n<h2 id=\"기본-어노테이션\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98\" aria-label=\"기본 어노테이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 어노테이션</h2>\n<table>\n<thead>\n<tr>\n<th>어노테이션</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@Entity @Table</td>\n<td>entity와 매핑할 테이블 지정</td>\n</tr>\n<tr>\n<td>@Id</td>\n<td>데이터베이핑 PK와 매핑</td>\n</tr>\n<tr>\n<td>@Column</td>\n<td>필드와 컬럼 매핑</td>\n</tr>\n<tr>\n<td>@ManyToOne @JoinColum</td>\n<td>연관관계 매핑</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"column-어노테이션\" style=\"position:relative;\"><a href=\"#column-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98\" aria-label=\"column 어노테이션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Column 어노테이션</h2>\n<table>\n<thead>\n<tr>\n<th>어노테이션</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>@Column</td>\n<td>컬럼 매핑</td>\n</tr>\n<tr>\n<td>@Temporal</td>\n<td>날짜 타입 매핑</td>\n</tr>\n<tr>\n<td>@Enumerated</td>\n<td>JAVA enum 타입 매핑 (String사용)</td>\n</tr>\n<tr>\n<td>@Lob</td>\n<td>BLOB(byte[]), CLOB(String, char[]) 매핑</td>\n</tr>\n<tr>\n<td>@Transient</td>\n<td>특정 필드를 컬럼에 매핑하지 않음(메모리상에서만 임시로 값 보관하고 싶을 때)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"기본키-매핑\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8%ED%82%A4-%EB%A7%A4%ED%95%91\" aria-label=\"기본키 매핑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본키 매핑</h2>\n<h3 id=\"기본키-자동-생성-전략\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8%ED%82%A4-%EC%9E%90%EB%8F%99-%EC%83%9D%EC%84%B1-%EC%A0%84%EB%9E%B5\" aria-label=\"기본키 자동 생성 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본키 자동 생성 전략</h3>\n<ol>\n<li>IDENTITY - 데이터 베이스에 위임</li>\n<li>SEQUENCE - 데이터베이스 시퀀스 오브젝트 사용 (Oracle, PostgreSQL, H2)</li>\n<li>TABLE - 키 생성용 테이블 사용</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"11526935030781704000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@Id // 직접 할당\n\n// 자동 생성\n// AUTO : 사용하는 DB에 따라 자동 지정 (기본값)\n@GeneratedValue(strategy = GenerationType.AUTO)\n\n// SEQUENCE : 데이터베이스 시퀀스 오브젝트 사용\n@Entity\n@SequenceGenerator(\n  name = &quot;MEMBER_SEQ_GENERATOR&quot;,\n  equenceName = &quot;MEMBER_SEQ&quot;,    // 매핑할 데이터베이스 시퀀스 이름\n  initialValue = 1,\n  allocationSize = 1             // 시퀀스 한 번 호출에 증가하는 수(성능 최적화)\n)\npublic class Member {\n  @Id\n  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator= &quot;MEMBER_SEQ_GENERATOR&quot;)\n  private Long id;\n  ...\n\n// TABLE : 키 생성용 테이블 사용\n@TableGenerator(name = &quot;MEMBER_SEQ_GENERATOR&quot;,\n                table = &quot;MY_SEQUENCES&quot;,\n                pkColumnValue = &quot;MEMBER_SEQ&quot;,\n                allocationSize = 1)\npublic class CLASSNAME {\n    @Id\n    @GeneratedValue(strategy = GenerationType.TABLE, generator = &quot;MEMBER_SEQ_GENERATOR&quot;)\n    private Long id;\n    ...\n`, `11526935030781704000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Id</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 직접 할당</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 자동 생성</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// AUTO : 사용하는 DB에 따라 자동 지정 (기본값)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">GeneratedValue</span><span class=\"mtk1\">(strategy = </span><span class=\"mtk12\">GenerationType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">AUTO</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// SEQUENCE : 데이터베이스 시퀀스 오브젝트 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Entity</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">SequenceGenerator</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  name = </span><span class=\"mtk8\">&quot;MEMBER_SEQ_GENERATOR&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  equenceName = </span><span class=\"mtk8\">&quot;MEMBER_SEQ&quot;</span><span class=\"mtk1\">,    </span><span class=\"mtk3\">// 매핑할 데이터베이스 시퀀스 이름</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  initialValue = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  allocationSize = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">             </span><span class=\"mtk3\">// 시퀀스 한 번 호출에 증가하는 수(성능 최적화)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Member</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk10\">Id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk10\">GeneratedValue</span><span class=\"mtk1\">(strategy = </span><span class=\"mtk12\">GenerationType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">SEQUENCE</span><span class=\"mtk1\">, generator= </span><span class=\"mtk8\">&quot;MEMBER_SEQ_GENERATOR&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// TABLE : 키 생성용 테이블 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">TableGenerator</span><span class=\"mtk1\">(name = </span><span class=\"mtk8\">&quot;MEMBER_SEQ_GENERATOR&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                table = </span><span class=\"mtk8\">&quot;MY_SEQUENCES&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                pkColumnValue = </span><span class=\"mtk8\">&quot;MEMBER_SEQ&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                allocationSize = </span><span class=\"mtk7\">1</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">CLASSNAME</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">Id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">GeneratedValue</span><span class=\"mtk1\">(strategy = </span><span class=\"mtk12\">GenerationType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">TABLE</span><span class=\"mtk1\">, generator = </span><span class=\"mtk8\">&quot;MEMBER_SEQ_GENERATOR&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">id</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<details>\n<summary><b>SequenceGenerator 설정 값 (Toggle)</b></summary>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>식별자</td>\n<td>생성기 이름 필수</td>\n</tr>\n<tr>\n<td>sequenceName</td>\n<td>데이터베이스에 등록되어 있는 시퀀스 이름</td>\n<td>hibernate_sequenc</td>\n</tr>\n<tr>\n<td>initialValue</td>\n<td>DDL 생성 시에만 사용됨, 시퀀스 DDL 생성 시 시작하는 수를 지정</td>\n<td>1</td>\n</tr>\n<tr>\n<td>allocationSize</td>\n<td>시퀀스 한 번 호출에 증가하는 수</td>\n<td>50</td>\n</tr>\n<tr>\n<td>catalog, schema</td>\n<td>데이터베이스 catalog, schema 이름</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</details>\n<details>\n<summary><b>TableGenerator 설정 값 (Toggle)</b></summary>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>식별자 생성기 이름</td>\n<td>필수</td>\n</tr>\n<tr>\n<td>table</td>\n<td>키생성 테이블명</td>\n<td>hibernate_sequences</td>\n</tr>\n<tr>\n<td>pkColumnName</td>\n<td>시퀀스 컬럼명</td>\n<td>sequence_name</td>\n</tr>\n<tr>\n<td>valueColumnNa</td>\n<td>시퀀스 값 컬럼명</td>\n<td>next_val</td>\n</tr>\n<tr>\n<td>pkColumnValue</td>\n<td>키로 사용할 값 이름</td>\n<td>엔티티 이름</td>\n</tr>\n<tr>\n<td>initialValue</td>\n<td>초기 값, 마지막으로 생성된 값이 기준</td>\n<td>0</td>\n</tr>\n<tr>\n<td>allocationSize</td>\n<td>시퀀스 한 번 호출에 증가하는 수</td>\n<td>50</td>\n</tr>\n<tr>\n<td>catalog, schema</td>\n<td>데이터베이스 catalog, schema 이름</td>\n<td></td>\n</tr>\n<tr>\n<td>uniqueConstraints(DDL)</td>\n<td>유니크 제약 조건 지정</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</details>\n<p>권장하는 기본키 전략<br>\n-> Long형, 대체키, 기본 키 전략 // 비즈니스 로직 포함 x</p>\n<h1 id=\"연관-관계-매핑\" style=\"position:relative;\"><a href=\"#%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\" aria-label=\"연관 관계 매핑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>연관 관계 매핑</h1>\n<h2 id=\"고려-사항\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EB%A0%A4-%EC%82%AC%ED%95%AD\" aria-label=\"고려 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고려 사항</h2>\n<ul>\n<li>다중성</li>\n<li>단방향, 양방향</li>\n<li>연관관계 주인</li>\n</ul>\n<h2 id=\"단방향-양방향\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%96%91%EB%B0%A9%ED%96%A5\" aria-label=\"단방향 양방향 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단방향, 양방향</h2>\n<p>테이블 : <strong>외래키 하나</strong>로 연관관계를 관리\n객체 : 서로 다른 <strong>단뱡향 관계 2개</strong></p>\n<p>한쪽만 참조하면 단방향\n양쪽 서로 참조시 양방향</p>\n<p>양방향 매핑 규칙</p>\n<ul>\n<li><strong>외래키</strong>가 있는 곳을 <strong>연관관계 주인</strong>으로 지정</li>\n<li>연관관계 주인 값이 변경 시 외래키를 변경</li>\n<li>연관관계 주인 -> 외래키 관리(<strong>등록, 수정</strong>)</li>\n<li>주인이 아닌 쪽은 <strong>읽기</strong>만 가능 -> mappedBy 속성으로 주인 지정</li>\n</ul>\n<p>주의할 점</p>\n<ul>\n<li>값 추가 시 양쪽 모두 값 입력 -> <strong>연관관계 편의 메소드</strong> 사용</li>\n<li>무한루프 주의\n<ul>\n<li>lombok toString 사용 x</li>\n<li>Controller에서 Entity 직접 반환x -> DTO로 변환해 사용</li>\n</ul>\n</li>\n</ul>\n<p>연관관계 편의 메소스</p>\n<ul>\n<li>주인 setter + 반대쪽 객체에 값 넣어주는 부분 추가</li>\n<li>새로운 함수로 작성해 setter함수와 구분</li>\n<li>필요 시 제약조건 검사 구문 추가</li>\n<li>한쪽에만 작성</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"80331330073368790000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\n...\n\npublic void addMember(Member member) {\n  member.setTeam(this);\n  members.add(member);\n}\n\n...\n`, `80331330073368790000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">addMember</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Member</span><span class=\"mtk1\"> member) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setTeam</span><span class=\"mtk1\">(</span><span class=\"mtk4\">this</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">members</span><span class=\"mtk1\">.</span><span class=\"mtk11\">add</span><span class=\"mtk1\">(member);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<ul>\n<li>테이블 설계 -> 연관관계 매핑은 단방향 매핑으로 완성 되어야 함</li>\n<li>양방향 매핑은 반대 방향으로 조회 기능을 위해 추가</li>\n<li>JPQL에서 역방향 탐색할 일이 많음</li>\n</ul>\n<h2 id=\"다중성\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1\" aria-label=\"다중성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중성</h2>\n<p>연관관계 매핑을 위한 어노테이션</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"6580457137763785000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@ManyToOne @JoinColumn(name = &quot;TEAM_ID&quot;) // N : 1\n\n@OneToMany(mappedBy = &quot;team&quot;) // 1 : N\n\n@OneToOne // 1 : 1\n\n@ManyToMany // N : M 사용x\n`, `6580457137763785000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">ManyToOne</span><span class=\"mtk1\"> @</span><span class=\"mtk10\">JoinColumn</span><span class=\"mtk1\">(name = </span><span class=\"mtk8\">&quot;TEAM_ID&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk3\">// N : 1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">OneToMany</span><span class=\"mtk1\">(mappedBy = </span><span class=\"mtk8\">&quot;team&quot;</span><span class=\"mtk1\">) </span><span class=\"mtk3\">// 1 : N</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">OneToOne</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 1 : 1</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">ManyToMany</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// N : M 사용x</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<ul>\n<li>보통 다대일 관계 사용 - 외래키가 있는 쪽이 연관관계 주인</li>\n<li>일대일 관계 - 외래키에 유니크 제약조건 추가</li>\n</ul>\n<h3 id=\"일대일\" style=\"position:relative;\"><a href=\"#%EC%9D%BC%EB%8C%80%EC%9D%BC\" aria-label=\"일대일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>일대일</h3>\n<table>\n<thead>\n<tr>\n<th>위치</th>\n<th>특징</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>주(access가 많은) 테이블</td>\n<td>- 객체지향 개발자 선호 <br> - JPA 매핑 편리</td>\n<td>주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능</td>\n<td>값이 없으면 외래 키에 null 허용</td>\n</tr>\n<tr>\n<td>대상 테이블</td>\n<td>- 전통적인 데이터베이스 개발자 선호</td>\n<td>주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유지</td>\n<td>프록시 기능의 한계로 지연 로딩으로 설정해도 항상 즉시 로딩됨</td>\n</tr>\n</tbody>\n</table>\n<details>\n<summary><b>@ManyToOne, @OneToMany 설정 값 (Toggle)</b></summary>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본 값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>optional</td>\n<td>false로 설정하면 연관된 엔티티가 항상 있어야 한다.</td>\n<td>TRUE</td>\n</tr>\n<tr>\n<td>fetch</td>\n<td>글로벌 페치 전략을 설정한다.</td>\n<td>@ManyToOne=FetchType.EAGER <br> @OneToMany=FetchType.LAZY</td>\n</tr>\n<tr>\n<td>cascade</td>\n<td>영속성 전이 기능을 사용한다</td>\n<td>sequence_name</td>\n</tr>\n</tbody>\n</table>\n </details>\n<h1 id=\"상속-관계-매핑\" style=\"position:relative;\"><a href=\"#%EC%83%81%EC%86%8D-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\" aria-label=\"상속 관계 매핑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>상속 관계 매핑</h1>\n<p>객체는 상속을 지원하므로 모델링과 구현이 똑같지만, DB는 상속을 지원하지 않으므로 논리 모델을 물리 모델로 구현할 방법이 필요</p>\n<p>유사한 개념으로는 슈퍼타입 서브타입 관계 있어 JPA에서는 <strong>상속 구조</strong>를 <strong>슈퍼타입 - 서브타입 관계에 매핑</strong></p>\n<p>DB의 <strong>슈퍼타입 서브타입 논리 모델</strong>을 <strong>실제 물리 모델</strong>로 구현하는 방법 3가지</p>\n<ol>\n<li>각각의 테이블 -> 조인 전략</li>\n<li>통합 테이블 -> 단일 테이블 전략</li>\n<li>서브타입 테이블 -> 구현 클래스 마다 테이블 전략</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"14244508419193403000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// JOINED: 조인 전략\n// SINGLE_TABLE: 단일 테이블 전략\n// TABLE_PER_CLASS: 구현 클래스마다 테이블 전략\n// 부모 클래스에 어노테이션 추가 + 자식 클래스에서 부모 클래스 상속\n@Inheritance(strategy=InheritanceType.XXX)\n\n// 부모 클래스에 선언\n// 하위 클래스를 구분하는 용도 (Default = DTYPE)\n@DiscriminatorColumn(name=“DTYPE”)\n\n// 자식 클래스에 선언\n// 엔티티를 저장할 때 슈퍼타입 구분 컬럼에 저장할 값 지정 (Default : 클래스 명)\n@DiscriminatorValue(“XXX”)`, `14244508419193403000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// JOINED: 조인 전략</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// SINGLE_TABLE: 단일 테이블 전략</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// TABLE_PER_CLASS: 구현 클래스마다 테이블 전략</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 부모 클래스에 어노테이션 추가 + 자식 클래스에서 부모 클래스 상속</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Inheritance</span><span class=\"mtk1\">(strategy=</span><span class=\"mtk12\">InheritanceType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">XXX</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 부모 클래스에 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 하위 클래스를 구분하는 용도 (Default = DTYPE)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">DiscriminatorColumn</span><span class=\"mtk1\">(name=“DTYPE”)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 자식 클래스에 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 엔티티를 저장할 때 슈퍼타입 구분 컬럼에 저장할 값 지정 (Default : 클래스 명)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">DiscriminatorValue</span><span class=\"mtk1\">(“XXX”)</span></span></span></code></pre>\n<table>\n<thead>\n<tr>\n<th>전략</th>\n<th>장점</th>\n<th>단점</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>조인 전략</td>\n<td>- 테이블 정규화 <br> - 외래 키 참조 무결성 제약조건 활용가능 <br> - 저장공간 효율화</td>\n<td>- 조회시 조인을 많이 사용, 성능 저하 <br> - 조회 쿼리가 복잡함 <br> - 데이터 저장시 INSERT SQL 2번 호출</td>\n</tr>\n<tr>\n<td>단일 테이블 전략</td>\n<td>- 조인이 필요 없으므로 일반적으로 조회 성능이 빠름 <br> - 조회 쿼리가 단순함</td>\n<td>- 자식 엔티티가 매핑한 컬럼은 모두 null 허용 <br> - 단일 테이블에 모든 것을 저장하므로 테이블이 커질 수 있다. <br> - 상황에 따라서 조회 성능이 오히려 느려질 수 있다.</td>\n</tr>\n<tr>\n<td>구현 클래스 마다 테이블 전략</td>\n<td>- 서브 타입을 명확하게 구분해서 처리할 때 효과적 <br> - not null 제약조건 사용 가능</td>\n<td>- 여러 자식 테이블을 함께 조회할 때 성능이 느림(UNION SQL 필요) <br> - 자식 테이블을 통합해서 쿼리하기 어려움</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"정리-1\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC-1\" aria-label=\"정리 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<ul>\n<li>기본적으로는 <strong>조인 전략</strong> -> 중요, 복잡, 확장 가능성이 높은 경우</li>\n<li>심플하고 확장 가능성이 낮은 경우 -> <strong>단일 테이블 전략</strong></li>\n</ul>\n<h2 id=\"mappedsubperclass\" style=\"position:relative;\"><a href=\"#mappedsubperclass\" aria-label=\"mappedsubperclass permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@MappedSubperclass</h2>\n<blockquote>\n<p>객체의 입장에서 공통 매핑 정보가 필요할 때 사용</p>\n</blockquote>\n<ul>\n<li>상속 받는 자식 클래스에 <strong>매핑 정보만 제공</strong></li>\n<li>조회, 검색이 불가능</li>\n</ul>\n<h1 id=\"프록시\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9D%EC%8B%9C\" aria-label=\"프록시 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프록시</h1>\n<blockquote>\n<p>연관된 객체를 처음부터 DB에서 조회하는 것이 아닌 실제 사용하는 시점에 조회 가능 (가짜 객체)</p>\n</blockquote>\n<p>em.find() - DB를 통해서 실제 엔티티 객체를 조회하는 메서드\nem.getReference() - DB의 조회를 미루는 가짜(프록시) 엔티티 객체를 조회하는 메서드</p>\n<h2 id=\"특징\" style=\"position:relative;\"><a href=\"#%ED%8A%B9%EC%A7%95\" aria-label=\"특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>특징</h2>\n<ul>\n<li>실제 클래스의 상속을 받아 만들어짐</li>\n<li>프록시 객체는 실제 객체의 참조값(주소)를 가지고 있음</li>\n<li>사용 시 진짜 객체인지 프록시 객체인지 구분하지 않고 사용하면 된다<br>\n(JPA 내부에서 알아서 처리해준다.)</li>\n</ul>\n<details>\n<summary><b>@트랜잭션 범위 밖에서 프록시 객체를 조회 (준영속 상태) 문제</b></summary>\n<p>초기화 문제 발생</p>\n<p>(하이버네이트는 org.hibernate.LazyInitializationException 예외)\n-> 해결책으로 Spring Boot에서 open-in-view 설정 true\n(영속성 컨텍스트(하이버네이트 세션)를 뷰 렌더링하는 시점까지 유지시키는 방법)\n<a href=\"https://kingbbode.tistory.com/27\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://kingbbode.tistory.com/27</a></p>\n<p>실전 JPA강의에 해당 내용 강의 듣고 추가 정리</p>\n</details>\n<h2 id=\"즉시-로딩-지연-로딩\" style=\"position:relative;\"><a href=\"#%EC%A6%89%EC%8B%9C-%EB%A1%9C%EB%94%A9-%EC%A7%80%EC%97%B0-%EB%A1%9C%EB%94%A9\" aria-label=\"즉시 로딩 지연 로딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>즉시 로딩, 지연 로딩</h2>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"18664766634157170000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@ManyToOne(fetch = FetchType.LASY) // 지연 로딩\n@ManyToOne(fetch = FetchType.EAGER) // 즉시 로딩`, `18664766634157170000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">ManyToOne</span><span class=\"mtk1\">(fetch = </span><span class=\"mtk12\">FetchType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">LASY</span><span class=\"mtk1\">) </span><span class=\"mtk3\">// 지연 로딩</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">ManyToOne</span><span class=\"mtk1\">(fetch = </span><span class=\"mtk12\">FetchType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">EAGER</span><span class=\"mtk1\">) </span><span class=\"mtk3\">// 즉시 로딩</span></span></span></code></pre>\n<p>연관관계를 설정한 엔티티 조회 시 프록시 객체로 가져온다</p>\n<p>즉시 로딩 사용 시 <strong>N+1 문제</strong> 발생 가능<br>\n<a href=\"https://programmer93.tistory.com/83\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA N+1 문제 해결 방법 및 실무 적용 팁 - 삽질중인 개발자</a><br>\n<a href=\"https://xlffm3.github.io/spring%20data/jpa-pagination-nplusone/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[Tecoble] JPA Pagination, 그리고 N + 1 문제 - Chasing Yesterday</a>\n<a href=\"https://cheese10yun.github.io/jpa-nplus-1/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA N+1 발생원인과 해결방법 - Yun Blog</a></p>\n<ul>\n<li>모든 연관관계에서 <strong>지연 로딩 사용</strong></li>\n<li>@ManyToOne, @OneToOne, @XXXToOne 어노테이션들은 기본이 즉시 로딩(EAGER)<br>\n=> LAZY로 명시적으로 설정해서 사용</li>\n<li><strong>JPQL fetch 조인</strong>, 엔티티 그래프 기능, Batch Size 사용</li>\n</ul>\n<h2 id=\"영속성-전이cascade\" style=\"position:relative;\"><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%A0%84%EC%9D%B4cascade\" aria-label=\"영속성 전이cascade permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>영속성 전이(CASCADE)</h2>\n<blockquote>\n<p>특정 엔티티를 영속 상태로 만들 때 연관된 엔티티도 함께 영속상태로 만들 때</p>\n</blockquote>\n<p>연관관계 주인이 아닌 자식 객체에 설정</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"35594979702887520000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@OneToMany(mappedBy=&quot;parent&quot;, cascade=CascadeType.PERSIST)`, `35594979702887520000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">OneToMany</span><span class=\"mtk1\">(mappedBy=</span><span class=\"mtk8\">&quot;parent&quot;</span><span class=\"mtk1\">, cascade=</span><span class=\"mtk12\">CascadeType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">PERSIST</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>종류</p>\n<ul>\n<li>ALL: 모두 적용</li>\n<li>PERSIST: 영속</li>\n<li>REMOVE: 삭제</li>\n<li>MERGE: 병합</li>\n<li>REFRESH: REFRESH</li>\n<li>DETACH: DETACH</li>\n</ul>\n<h2 id=\"고아-객체\" style=\"position:relative;\"><a href=\"#%EA%B3%A0%EC%95%84-%EA%B0%9D%EC%B2%B4\" aria-label=\"고아 객체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>고아 객체</h2>\n<blockquote>\n<p>부모 엔티티와 연관관계가 끊어진 자식 엔티티를 자동으로 삭제</p>\n</blockquote>\n<ul>\n<li>** 참조하는 곳이 하나**일 때 사용</li>\n<li>특정 엔티티가 개인 소유할 때 사용<br>\n(@OneToOne, @OneToMany 일 경우)</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"43046726048580444000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@OneToMany(CascadeType.ALL + orphanRemovel=true)`, `43046726048580444000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">OneToMany</span><span class=\"mtk1\">(</span><span class=\"mtk12\">CascadeType</span><span class=\"mtk1\">.</span><span class=\"mtk12\">ALL</span><span class=\"mtk1\"> + orphanRemovel=</span><span class=\"mtk4\">true</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p>-> 두 옵션을 모두 활성화 하면 부모 엔티티를 통해서 자식의 생명 주기 관리 가능\n(도메인 주도 설계(DDD)의 Aggregate Root개념을 구현할 때 유용)</p>\n<h1 id=\"값-타입\" style=\"position:relative;\"><a href=\"#%EA%B0%92-%ED%83%80%EC%9E%85\" aria-label=\"값 타입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>값 타입</h1>\n<p>JPA는 크게 <strong>엔티티타입, 값 타입</strong>으로 분류</p>\n<p>엔티티 타입 : @Entity 정의, 데이터가 변해도 식별자로 추적 가능\n값 타입 : 자바 기본 타입이나 객체, 식별자가 없어 추적 불가</p>\n<h2 id=\"값-타입-종류\" style=\"position:relative;\"><a href=\"#%EA%B0%92-%ED%83%80%EC%9E%85-%EC%A2%85%EB%A5%98\" aria-label=\"값 타입 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>값 타입 종류</h2>\n<p>생명주기를 엔티티에 의존</p>\n<h3 id=\"1-기본-값-타입\" style=\"position:relative;\"><a href=\"#1-%EA%B8%B0%EB%B3%B8-%EA%B0%92-%ED%83%80%EC%9E%85\" aria-label=\"1 기본 값 타입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 기본 값 타입</h3>\n<ul>\n<li>값타입 공유 x -> 복사해 사용</li>\n<li>생명주기를 엔티티에 의존</li>\n<li>불변 객체로 만들어 사용</li>\n</ul>\n<h3 id=\"2-임베디드복합-값-타입\" style=\"position:relative;\"><a href=\"#2-%EC%9E%84%EB%B2%A0%EB%94%94%EB%93%9C%EB%B3%B5%ED%95%A9-%EA%B0%92-%ED%83%80%EC%9E%85\" aria-label=\"2 임베디드복합 값 타입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 임베디드(복합 값) 타입</h3>\n<ul>\n<li>새로운 값 타입을 정의할 수 있음</li>\n<li>재사용성, 높은 응집도</li>\n<li>해당 값 타입만 사용하는 메소드 만들 수 있음</li>\n<li>값이 null이면 매핑한 컬럼은 모두 null</li>\n<li>불변 객체로 만들어 사용해야 함\n<ul>\n<li>setter 만들지 않으면 된다</li>\n<li>값을 복사해 사용</li>\n<li>값을 공유해 사용하기 위해선 <strong>엔티티</strong>를 만들어 사용</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"52138908967986780000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@Embeddable // 값 타입을 정의하는 곳에 사용\n@Embedded // 값 타입을 사용하는 곳에 사용\n\n@AttributeOverrides // 한 엔티티에서 같은 값 타입을 사용하면 어노테이션 사용해서 재정의\n\n// 사용 예시\n@Embedded\n@AttributeOverrides({\n  @AttributeOverride(name=&quot;city&quot;, column=@Column(name=&quot;COMPANY_CITY&quot;)),\n  @AttributeOverride(name=&quot;street&quot;, column=@Column(name=&quot;COMPANY_STREET&quot;)),\n  @AttributeOverride(name=&quot;zipcode&quot;, column=@Column(name=&quot;COMPANY_ZIPCODE&quot;))\n})\nAddress companyAddress;`, `52138908967986780000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Embeddable</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 값 타입을 정의하는 곳에 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Embedded</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 값 타입을 사용하는 곳에 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">AttributeOverrides</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 한 엔티티에서 같은 값 타입을 사용하면 어노테이션 사용해서 재정의</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 사용 예시</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Embedded</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">AttributeOverrides</span><span class=\"mtk1\">({</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk10\">AttributeOverride</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;city&quot;</span><span class=\"mtk1\">, column=@</span><span class=\"mtk10\">Column</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;COMPANY_CITY&quot;</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk10\">AttributeOverride</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;street&quot;</span><span class=\"mtk1\">, column=@</span><span class=\"mtk10\">Column</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;COMPANY_STREET&quot;</span><span class=\"mtk1\">)),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  @</span><span class=\"mtk10\">AttributeOverride</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;zipcode&quot;</span><span class=\"mtk1\">, column=@</span><span class=\"mtk10\">Column</span><span class=\"mtk1\">(name=</span><span class=\"mtk8\">&quot;COMPANY_ZIPCODE&quot;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">})</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">Address</span><span class=\"mtk1\"> </span><span class=\"mtk12\">companyAddress</span><span class=\"mtk1\">;</span></span></span></code></pre>\n<h3 id=\"3-컬렉션-값-타입\" style=\"position:relative;\"><a href=\"#3-%EC%BB%AC%EB%A0%89%EC%85%98-%EA%B0%92-%ED%83%80%EC%9E%85\" aria-label=\"3 컬렉션 값 타입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 컬렉션 값 타입</h3>\n<ul>\n<li>컬렉션을 저장하기 위한 별도의 테이블 필요</li>\n<li>일반 엔티티와 동일하게 지연로딩 사용 가능</li>\n<li>값 타입 컬렉션은 <strong>영속성 전이 + 고아 객체 제거</strong> 기능을 필수로 가짐</li>\n</ul>\n<p><strong>제약 사항</strong></p>\n<ul>\n<li>식별자 개념 없다.</li>\n<li>변경 시 추적이 어려움</li>\n<li>변경사항 발생 시, 값 타입 컬렉션에 있는 모든 값을 다시 저장</li>\n<li>값 타입 컬렉션을 매핑하는 테이블은 모든 컬럼을 묶어서 기본키 구성 - null x, 중복 저장x</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"42174762521797370000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@ElementCollection // 컬렉션 값 타입 사용시 매핑\n\n@CollectionTable // 테이블 설정`, `42174762521797370000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">ElementCollection</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 컬렉션 값 타입 사용시 매핑</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">CollectionTable</span><span class=\"mtk1\"> </span><span class=\"mtk3\">// 테이블 설정</span></span></span></code></pre>\n<p>실무에 적용 시 상황에 따라 <strong>일대다 관계 고려</strong></p>\n<p>엔티티 vs 값 타입<br>\n-> <strong>식별자 필요, 지속해서 값 추적</strong> 필요 시 엔티티</p>\n<h1 id=\"쿼리\" style=\"position:relative;\"><a href=\"#%EC%BF%BC%EB%A6%AC\" aria-label=\"쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쿼리</h1>\n<h2 id=\"종류\" style=\"position:relative;\"><a href=\"#%EC%A2%85%EB%A5%98\" aria-label=\"종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>종류</h2>\n<ul>\n<li>JPQL</li>\n<li>JPA Criteria</li>\n<li>QueryDSL</li>\n<li>네이티브 SQL</li>\n<li>JDBC API 직접사용, MyBatis, SpringJdbcTemplate 함께 사용<br>\n-> 영속성 컨텍스트를 <strong>적절한 시점에 강제로 플러시 필요</strong></li>\n</ul>\n<h2 id=\"jpql문법\" style=\"position:relative;\"><a href=\"#jpql%EB%AC%B8%EB%B2%95\" aria-label=\"jpql문법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPQL문법</h2>\n<ul>\n<li>엔티티 이름 사용(테이블 아님)</li>\n<li>별칭 필수</li>\n</ul>\n<h3 id=\"반환-타입\" style=\"position:relative;\"><a href=\"#%EB%B0%98%ED%99%98-%ED%83%80%EC%9E%85\" aria-label=\"반환 타입 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>반환 타입</h3>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"84609729504627340000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// 반환 타입이 명확할 경우\nTypedQuery<Member> query = em.createQuery(&quot;SELECT m FROM Member m&quot;, Member.class);\n\n// 반환 타입이 명확하지 않을 경우\nQuery query = em.createQuery(&quot;SELECT m.username, m.age from Member m&quot;);`, `84609729504627340000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 반환 타입이 명확할 경우</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">TypedQuery</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">query</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">em</span><span class=\"mtk1\">.</span><span class=\"mtk11\">createQuery</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;SELECT m FROM Member m&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">Member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 반환 타입이 명확하지 않을 경우</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">Query</span><span class=\"mtk1\"> </span><span class=\"mtk12\">query</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">em</span><span class=\"mtk1\">.</span><span class=\"mtk11\">createQuery</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;SELECT m.username, m.age from Member m&quot;</span><span class=\"mtk1\">);</span></span></span></code></pre>\n<h3 id=\"결과-조회\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C\" aria-label=\"결과 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과 조회</h3>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"97531521263147730000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`query.getResultList()   // 결과가 하나 이상일 때 리스트 반환\nquery.getSingleResult() // 결과가 하나`, `97531521263147730000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">query</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getResultList</span><span class=\"mtk1\">()   </span><span class=\"mtk3\">// 결과가 하나 이상일 때 리스트 반환</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">query</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getSingleResult</span><span class=\"mtk1\">() </span><span class=\"mtk3\">// 결과가 하나</span></span></span></code></pre>\n<h3 id=\"파라미터-바인딩\" style=\"position:relative;\"><a href=\"#%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%B0%94%EC%9D%B8%EB%94%A9\" aria-label=\"파라미터 바인딩 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>파라미터 바인딩</h3>\n<blockquote>\n<p>이름 , 위치 기준</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"68430847586082640000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// SQL\nSELECT m FROM Member m where m.username=:username\n\nquery.setParameter(&quot;username&quot;, usernameParam);`, `68430847586082640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// SQL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">SELECT</span><span class=\"mtk1\"> m </span><span class=\"mtk10\">FROM</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Member</span><span class=\"mtk1\"> m where </span><span class=\"mtk12\">m</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">=</span><span class=\"mtk15\">:</span><span class=\"mtk1\">username</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">query</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setParameter</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;username&quot;</span><span class=\"mtk1\">, usernameParam);</span></span></span></code></pre>\n<h3 id=\"프로젝션\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98\" aria-label=\"프로젝션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝션</h3>\n<blockquote>\n<p>프로젝션 대상으로 엔티티, 임베디드 타입, 스칼라 타입 가능</p>\n</blockquote>\n<h3 id=\"페이징-api\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%95-api\" aria-label=\"페이징 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페이징 API</h3>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"41631355698925130000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`setFirstResult(int startPoint) // 조회 시작 위치\nsetMaxResults(int maxResult)   // 조회할 데이터 수`, `41631355698925130000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">setFirstResult</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> startPoint) </span><span class=\"mtk3\">// 조회 시작 위치</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk11\">setMaxResults</span><span class=\"mtk1\">(</span><span class=\"mtk10\">int</span><span class=\"mtk1\"> maxResult)   </span><span class=\"mtk3\">// 조회할 데이터 수</span></span></span></code></pre>\n<h3 id=\"서브-쿼리\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B8%8C-%EC%BF%BC%EB%A6%AC\" aria-label=\"서브 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서브 쿼리</h3>\n<ul>\n<li>SELECT, WHERE, HAVING 절에서 서브 쿼리 사용 가능</li>\n<li><strong>FROM 절 서브쿼리는 사용 불가</strong></li>\n</ul>\n<h3 id=\"경로-표현식\" style=\"position:relative;\"><a href=\"#%EA%B2%BD%EB%A1%9C-%ED%91%9C%ED%98%84%EC%8B%9D\" aria-label=\"경로 표현식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>경로 표현식</h3>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"14697669451823270000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`select m.username -> 상태 필드\nfrom Member m\n  join m.team t -> 단일 값 연관 필드\n  join m.orders o -> 컬렉션 값 연관 필드\nwhere t.name = '팀A'`, `14697669451823270000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"sql\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> m.username -&gt; 상태 필드</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">from</span><span class=\"mtk1\"> Member m</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">join</span><span class=\"mtk1\"> m.team t -&gt; 단일 값 연관 필드</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">join</span><span class=\"mtk1\"> m.orders o -&gt; 컬렉션 값 연관 필드</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">where</span><span class=\"mtk1\"> t.name = </span><span class=\"mtk8\">&#39;팀A&#39;</span></span></span></code></pre>\n<p>상태 필드(state field) : 단순히 값을 저장하기 위한 필드 (ex: m.username)<br>\n연관 필드(association field) : 연관관계를 위한 필드</p>\n<blockquote>\n<p><strong>묵시적 내부 조인</strong> 발생</p>\n</blockquote>\n<ul>\n<li>단일 값 연관 필드 : @ManyToOne, @OneToOne, 대상이 엔티티(ex: m.team)</li>\n<li>컬렉션 값 연관 필드 : @OneToMany, @ManyToMany, 대상이 컬렉션(ex: m.orders)</li>\n</ul>\n<p>주의 사항</p>\n<ul>\n<li>컬렉션은 탐색의 끝, 명시적 조인을 통해 별칭을 얻어야 함</li>\n<li>묵시적 조인 사용 x -> <strong>명시적 조인 사용</strong></li>\n</ul>\n<h3 id=\"페치-조인\" style=\"position:relative;\"><a href=\"#%ED%8E%98%EC%B9%98-%EC%A1%B0%EC%9D%B8\" aria-label=\"페치 조인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>페치 조인</h3>\n<blockquote>\n<p>SQL 조인 종류가 아닌 <strong>성능 최적화</strong>를 위해 제공하는 기능으로 연관된 엔티티나 컬렉션을 <strong>SQL 한 번에 함께 조회</strong> (N+1 문제 해결책)</p>\n</blockquote>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"74530290905347690000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`select m from Member m join fetch m.team\n\n->\nSELECT M.*, T.* FROM MEMBER M\nINNER JOIN TEAM T ON M.TEAM_ID=T.ID`, `74530290905347690000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"sql\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> m </span><span class=\"mtk4\">from</span><span class=\"mtk1\"> Member m </span><span class=\"mtk4\">join</span><span class=\"mtk1\"> </span><span class=\"mtk4\">fetch</span><span class=\"mtk1\"> m.team</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">-&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">SELECT</span><span class=\"mtk1\"> M.*, T.* </span><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> MEMBER M</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">INNER JOIN</span><span class=\"mtk1\"> TEAM T </span><span class=\"mtk4\">ON</span><span class=\"mtk1\"> M.TEAM_ID=T.ID</span></span></span></code></pre>\n<p><strong>DISTINCT</strong></p>\n<ol>\n<li>SQL에 DISTINCT를 추가</li>\n<li>애플리케이션에서 같은 식별자를 가진 엔티티 중복 제거</li>\n</ol>\n<p><strong>한계</strong></p>\n<ul>\n<li>패치 조인은 기본적으로 모든 연관 그래프 가지고 오는 개념</li>\n<li>패치 조인 대상에는 별칭을 줄 수 없다</li>\n<li>둘 이상의 컬렉션은 패치 조인 할 수 없다</li>\n<li>컬렉션을 패치 조인하면 페이징 <strong>API를 사용할 수 없다.</strong></li>\n</ul>\n<h3 id=\"다형성-쿼리\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%ED%98%95%EC%84%B1-%EC%BF%BC%EB%A6%AC\" aria-label=\"다형성 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다형성 쿼리</h3>\n<p>Type : 조회 대상을 특정 자식으로 한정</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"37990903583262740000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`-- [JPQL]\nselect i from Item i\nwhere type(i) IN (Book, Movie)\n\n-- [SQL]\nselect i from i\nwhere i.DTYPE in (‘B’, ‘M’)`, `37990903583262740000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"sql\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- [JPQL]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> i </span><span class=\"mtk4\">from</span><span class=\"mtk1\"> Item i</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">where</span><span class=\"mtk1\"> </span><span class=\"mtk4\">type</span><span class=\"mtk1\">(i) </span><span class=\"mtk4\">IN</span><span class=\"mtk1\"> (Book, Movie)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- [SQL]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> i </span><span class=\"mtk4\">from</span><span class=\"mtk1\"> i</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">where</span><span class=\"mtk1\"> i.DTYPE </span><span class=\"mtk4\">in</span><span class=\"mtk1\"> (‘B’, ‘M’)</span></span></span></code></pre>\n<p>TREAT : 상속 구조에서 부모 타입을 특정 자식 타입으로 다룰 때 사용</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"65350228211559070000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`-- [JPQL]\nselect i from Item i\nwhere treat(i as Book).auther = ‘kim’\n\n-- [SQL]\nselect i.* from Item i\nwhere i.DTYPE = ‘B’ and i.auther = ‘kim’`, `65350228211559070000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"sql\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- [JPQL]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> i </span><span class=\"mtk4\">from</span><span class=\"mtk1\"> Item i</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">where</span><span class=\"mtk1\"> treat(i </span><span class=\"mtk4\">as</span><span class=\"mtk1\"> Book).auther = ‘kim’</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- [SQL]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">select</span><span class=\"mtk1\"> i.* </span><span class=\"mtk4\">from</span><span class=\"mtk1\"> Item i</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">where</span><span class=\"mtk1\"> i.DTYPE = ‘B’ </span><span class=\"mtk4\">and</span><span class=\"mtk1\"> i.auther = ‘kim’</span></span></span></code></pre>\n<h3 id=\"named-쿼리정적-쿼리\" style=\"position:relative;\"><a href=\"#named-%EC%BF%BC%EB%A6%AC%EC%A0%95%EC%A0%81-%EC%BF%BC%EB%A6%AC\" aria-label=\"named 쿼리정적 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Named 쿼리(정적 쿼리)</h3>\n<blockquote>\n<p>미리 정의해서 이름을 부여해두고 사용하는 JPQL</p>\n</blockquote>\n<ul>\n<li>어노테이션, XML 정의</li>\n<li>어플리케이션 로딩 시점에 초기화 후 재사용, <strong>쿼리 검증</strong></li>\n</ul>\n<p>Tip!!</p>\n<ul>\n<li>\n<p>JPA에서 타입 비교시 instance of(객체 비교) 사용</p>\n</li>\n<li>\n<p>벌크 연산 수행 후 영속성 컨텍스트 초기화(em.clear()) 필수!</p>\n</li>\n<li>\n<p>다대다 연관관계 사용 x -> 일대다, 다대일로 관계를 풀어서 사용<br>\n(보통 중간에 매핑 테이블 필요 ex - category - gategory_item - item)</p>\n</li>\n<li>\n<p>@Entity 클래스는 @Entity나 @MappedSuperclass로 지정한 클래스만 상속할 수 있다.</p>\n</li>\n<li>\n<p>Entity는 기본 생성자 필요 -> protect 레벨로 생성 (추가로 필요한 내용 정리 예정)</p>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"52343383615876360000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@Entity\n@NoArgsconstructor(access = AccessLevel.PROTECTED)\npublic class Member {\n  ...\n}`, `52343383615876360000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Entity</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">NoArgsconstructor</span><span class=\"mtk1\">(access = </span><span class=\"mtk12\">AccessLevel</span><span class=\"mtk1\">.</span><span class=\"mtk12\">PROTECTED</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Member</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<ul>\n<li><a href=\"https://www.inflearn.com/course/ORM-JPA-Basic\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">자바 ORM 표준 JPA 프로그래밍 (기본편) - 김영한</a></li>\n<li><a href=\"https://ict-nroo.tistory.com/131\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">JPA - 프록시란?</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk17 { color: #808080; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#jpa-java-persistence-api\">JPA (JAVA Persistence API)</a></p>\n<ul>\n<li><a href=\"#ormobject-relational-mapping\">ORM(Object-relational mapping)</a></li>\n<li><a href=\"#jpa-%EC%84%A4%EC%A0%95persistencexml\">JPA 설정(Persistence.xml)</a></li>\n<li><a href=\"#%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD\">주의 사항</a></li>\n<li><a href=\"#jpql\">JPQL</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1\">영속성</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%9E%80\">영속성 컨텍스트란?</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%94%8C%EB%9F%AC%EC%8B%9C%EB%9E%80\">플러시란?</a></p>\n<ul>\n<li><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%BB%A8%ED%85%8D%EC%8A%A4%ED%8A%B8%EB%A5%BC-%ED%94%8C%EB%9F%AC%EC%8B%9C-%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">영속성 컨텍스트를 플러시 하는 방법</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A4%80%EC%98%81%EC%86%8D-%EC%83%81%ED%83%9C\">준영속 상태</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#entity-mapping\">Entity Mapping</a></p>\n<ul>\n<li>\n<p><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98\">기본 어노테이션</a></p>\n</li>\n<li>\n<p><a href=\"#column-%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98\">Column 어노테이션</a></p>\n</li>\n<li>\n<p><a href=\"#%EA%B8%B0%EB%B3%B8%ED%82%A4-%EB%A7%A4%ED%95%91\">기본키 매핑</a></p>\n<ul>\n<li><a href=\"#%EA%B8%B0%EB%B3%B8%ED%82%A4-%EC%9E%90%EB%8F%99-%EC%83%9D%EC%84%B1-%EC%A0%84%EB%9E%B5\">기본키 자동 생성 전략</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\">연관 관계 매핑</a></p>\n<ul>\n<li>\n<p><a href=\"#%EA%B3%A0%EB%A0%A4-%EC%82%AC%ED%95%AD\">고려 사항</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%96%91%EB%B0%A9%ED%96%A5\">단방향, 양방향</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC\">정리</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%A4%91%EC%84%B1\">다중성</a></p>\n<ul>\n<li><a href=\"#%EC%9D%BC%EB%8C%80%EC%9D%BC\">일대일</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%83%81%EC%86%8D-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\">상속 관계 매핑</a></p>\n<ul>\n<li><a href=\"#%EC%A0%95%EB%A6%AC-1\">정리</a></li>\n<li><a href=\"#mappedsubperclass\">@MappedSubperclass</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%94%84%EB%A1%9D%EC%8B%9C\">프록시</a></p>\n<ul>\n<li><a href=\"#%ED%8A%B9%EC%A7%95\">특징</a></li>\n<li><a href=\"#%EC%A6%89%EC%8B%9C-%EB%A1%9C%EB%94%A9-%EC%A7%80%EC%97%B0-%EB%A1%9C%EB%94%A9\">즉시 로딩, 지연 로딩</a></li>\n<li><a href=\"#%EC%98%81%EC%86%8D%EC%84%B1-%EC%A0%84%EC%9D%B4cascade\">영속성 전이(CASCADE)</a></li>\n<li><a href=\"#%EA%B3%A0%EC%95%84-%EA%B0%9D%EC%B2%B4\">고아 객체</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B0%92-%ED%83%80%EC%9E%85\">값 타입</a></p>\n<ul>\n<li>\n<p><a href=\"#%EA%B0%92-%ED%83%80%EC%9E%85-%EC%A2%85%EB%A5%98\">값 타입 종류</a></p>\n<ul>\n<li><a href=\"#1-%EA%B8%B0%EB%B3%B8-%EA%B0%92-%ED%83%80%EC%9E%85\">1. 기본 값 타입</a></li>\n<li><a href=\"#2-%EC%9E%84%EB%B2%A0%EB%94%94%EB%93%9C%EB%B3%B5%ED%95%A9-%EA%B0%92-%ED%83%80%EC%9E%85\">2. 임베디드(복합 값) 타입</a></li>\n<li><a href=\"#3-%EC%BB%AC%EB%A0%89%EC%85%98-%EA%B0%92-%ED%83%80%EC%9E%85\">3. 컬렉션 값 타입</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%BF%BC%EB%A6%AC\">쿼리</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%A2%85%EB%A5%98\">종류</a></p>\n</li>\n<li>\n<p><a href=\"#jpql%EB%AC%B8%EB%B2%95\">JPQL문법</a></p>\n<ul>\n<li><a href=\"#%EB%B0%98%ED%99%98-%ED%83%80%EC%9E%85\">반환 타입</a></li>\n<li><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C\">결과 조회</a></li>\n<li><a href=\"#%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%B0%94%EC%9D%B8%EB%94%A9\">파라미터 바인딩</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98\">프로젝션</a></li>\n<li><a href=\"#%ED%8E%98%EC%9D%B4%EC%A7%95-api\">페이징 API</a></li>\n<li><a href=\"#%EC%84%9C%EB%B8%8C-%EC%BF%BC%EB%A6%AC\">서브 쿼리</a></li>\n<li><a href=\"#%EA%B2%BD%EB%A1%9C-%ED%91%9C%ED%98%84%EC%8B%9D\">경로 표현식</a></li>\n<li><a href=\"#%ED%8E%98%EC%B9%98-%EC%A1%B0%EC%9D%B8\">페치 조인</a></li>\n<li><a href=\"#%EB%8B%A4%ED%98%95%EC%84%B1-%EC%BF%BC%EB%A6%AC\">다형성 쿼리</a></li>\n<li><a href=\"#named-%EC%BF%BC%EB%A6%AC%EC%A0%95%EC%A0%81-%EC%BF%BC%EB%A6%AC\">Named 쿼리(정적 쿼리)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"자바 ORM 표준 JPA 프로그래밍 (기본편)","summary":["자바 ORM 강의 학습"],"date":"2022.09.18.","category":["JPA"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42u1Tz0tUURS+zwopbNOiJChwlczC3j3fOXceQb+gNiGCyEBiPyhhtNQps2EaQV6L0EJCEckEoRYiJBkVJcwgSVBuokVuXNVK6G9o441rM/FodGyoTdAHj/vuPed953vfOVep/1BKVUUer/ieSCS2FeJeJP5X4EVWr2xSEAQ7iWgMwDMiSjNzEzPPAJgDcMXlxWKxGgCTADp/KVBKCGAXM18XkRVjzAcRGTTGrAEYMsZYrXWLKxIEgWXmVa31/nKkqugTEd0D8AnAbQDfRDDqCAG0AlgA8BbAVyLKRr8rUWiMqSOih8y8IiL5eFwGjInbhgZ/mg5Ts4g0Fog/OkIR+ews2Ejl+oaZDwB4QkR5EfF93z919Eh80tq1ahfXWl9i5ruF3EMAHgOoj0zH5rD2R5FM2Pcg97Tf5ucyb8Lw+Paynm3UHOcHkNzhNm0dXScu9KTtxHjmy9Kr7OL0VOaYOw/DMDqjW8Nau67gfDJ18GxHavl0oruu+Vzn3tZk13x7e++eSlWqiAo1ej995v3r7MjwcF/u4rVb9nJP78nNOvtbHj6fSu9+Nz+wvJS7Y6/eSC0qVbmPJd1/MZPdt/Cyn2Yf3az9E7KfpEW1W93fCn7fejYMq4rN+rfxHRanmNLe6eVDAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/5ce94/thumbnail.png","srcSet":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/a7be2/thumbnail.png 64w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/bb95d/thumbnail.png 128w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/5ce94/thumbnail.png 256w","sizes":"(min-width: 256px) 256px, 100vw"},"sources":[{"srcSet":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/bfa43/thumbnail.webp 64w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/b529c/thumbnail.webp 128w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/99d55/thumbnail.webp 256w","type":"image/webp","sizes":"(min-width: 256px) 256px, 100vw"}]},"width":256,"height":256}},"publicURL":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/thumbnail.png"}}}}]}},"pageContext":{"slug":"/JPA_1/","series":[{"slug":"/JPA_1/","title":"자바 ORM 표준 JPA 프로그래밍 (기본편)","num":1},{"slug":"/JPA_2/","title":"실전! 스프링 부트와 JPA 활용1 - 웹 애플리케이션 개발","num":2},{"slug":"/JPA_3/","title":"실전! 스프링 부트와 JPA 활용2 - API 개발과 성능 최적화","num":3},{"slug":"/JPA_4/","title":"실전 스프링 데이터 JPA","num":4},{"slug":"/JPA_5/","title":"Querydsl","num":5}],"lastmod":"2022.10.13."}},"staticQueryHashes":["2383754777"],"slicesMap":{}}