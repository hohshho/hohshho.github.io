{"componentChunkName":"component---src-templates-post-tsx","path":"/Singleton/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"5a9d5030-8f76-58db-b179-f3644331d1e9","html":"<h1 id=\"1-싱글톤-패턴\" style=\"position:relative;\"><a href=\"#1-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4\" aria-label=\"1 싱글톤 패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 싱글톤 패턴</h1>\n<blockquote>\n<p>단 하나의 유일한 객체를 만들기 위한 코드 패턴</p>\n</blockquote>\n<p>싱글톤 패턴의 목표는 크게 2가지이다.</p>\n<ol>\n<li>인스턴스를 오직 한개만 만들어 제공하는 클래스가 필요</li>\n<li>만들어진 한개의 인스턴스에 글로벌하게 접근할 수 있는 방법이 필요하다.</li>\n</ol>\n<h1 id=\"2-싱글톤-패턴을-사용하는-이유\" style=\"position:relative;\"><a href=\"#2-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"2 싱글톤 패턴을 사용하는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 싱글톤 패턴을 사용하는 이유</h1>\n<p>ex) DB커넥션과 Pool을 담당하는 인스턴스, 시스템 전역의 로깅을 담당하는 로거</p>\n<ul>\n<li>시스템 런타임, 환경 세팅에 대한 정보 등, 인스턴스가 여러 개 일 때 문제가 생길 수 있는 객체들을 한 곳에서 제어하기 위해서이다.</li>\n</ul>\n<p>-> 따라서 싱글톤 패턴은 2가지 목적이 존재</p>\n<ul>\n<li>인스턴스를 오직 1개만 만들어야한다. (한 곳에서만 제어하게)</li>\n<li>만든 인스턴스에 글로벌하게 접근하는 방식을 제공해야한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 384px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2bca72226c572e8da949cb671bf0cc4/66595/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.58282208588957%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA3UlEQVR42p1R14qFMBT0/z/NB8GCig0LYlfsouJc5oDLPu7dwEBMnHaidF0H27YFZVli2zas64p5nrEsC7ie58Ffl1LXNQzDgK7ryLJMhKZpQtu2gvu+cV2XGPV9L2cMQXDfNI387/s+4jiG8iZMkgSu68pFnudCHoYB53mKIEk8o2lVVUImh2CIfd+loQiqqgpN02BZliR1HEdqv5Xf2iT+Bu8JmvH7OA4ojBxFEdI0FXc6c886TPj1DJmQqTzPg2maCIIARVFgHMf/PQrnEobhTzo+EudBQVb5VvADcTQWhYoq/0gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/a2bca72226c572e8da949cb671bf0cc4/a81b5/1.webp 163w,\n/static/a2bca72226c572e8da949cb671bf0cc4/da3ef/1.webp 325w,\n/static/a2bca72226c572e8da949cb671bf0cc4/0ca9f/1.webp 384w\"\n              sizes=\"(max-width: 384px) 100vw, 384px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/a2bca72226c572e8da949cb671bf0cc4/5e043/1.png 163w,\n/static/a2bca72226c572e8da949cb671bf0cc4/e5cc6/1.png 325w,\n/static/a2bca72226c572e8da949cb671bf0cc4/66595/1.png 384w\"\n            sizes=\"(max-width: 384px) 100vw, 384px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/a2bca72226c572e8da949cb671bf0cc4/66595/1.png\"\n            alt=\"1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h1 id=\"3-싱글톤-패턴-구현하는-방법\" style=\"position:relative;\"><a href=\"#3-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"3 싱글톤 패턴 구현하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 싱글톤 패턴 구현하는 방법</h1>\n<h2 id=\"31-private-생성자에-static-메소드\" style=\"position:relative;\"><a href=\"#31-private-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-static-%EB%A9%94%EC%86%8C%EB%93%9C\" aria-label=\"31 private 생성자에 static 메소드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. private 생성자에 static 메소드</h2>\n<ul>\n<li>가장 간단하고 보편적인 방법이지만, 수많은 스레드가 동시에 생성 체크(if) 문에 접근 시 객체 생성 체크를 통과하기 때문에, 멀티스레드 환경에서는 안전하지 않은 방법</li>\n<li>객체를 호출할 떄 인스턴스를 생성하는 Lazy initialization 방식</li>\n<li>instance 호출 시 만들어진 instance 가 있다면 반환해주고 없다면 생성</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"53514001660340810000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`public class SettingsPrivateStatic {\r\n  private static SettingsPrivateStatic instance;\r\n\r\n  private SettingsPrivateStatic() {}\r\n\r\n  public static SettingsPrivateStatic getInstance() {\r\n    if (instance == null) {\r\n      instance = new SettingsPrivateStatic();\r\n    }\r\n    return instance;\r\n  }\r\n}`, `53514001660340810000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsPrivateStatic</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsPrivateStatic</span><span class=\"mtk1\"> </span><span class=\"mtk12\">instance</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsPrivateStatic</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsPrivateStatic</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (instance == </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      instance = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsPrivateStatic</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> instance;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해라</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 생성자를 private으로 만든 이유?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 외부에서의 **객체 생성을 막고, 한 곳에서 instance를 관리**하기 위해서</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. getInstance() 메소드를 static으로 선언한 이유?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 외부에서 글로벌하게 만들어진 **객체에 접근하는 방법**이 필요하기 때문</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3. getInstance()가 멀티쓰레드 환경에서 안전하지 않은 이유?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 객체 생성 전, 동시에 생성함수에 스레드가 접근하게 되면, 올바른 객체 생성 체크가 이루어지지 않을 수 있기 때문</span></span></code></pre>\n<h2 id=\"32-thread-safe-initialization\" style=\"position:relative;\"><a href=\"#32-thread-safe-initialization\" aria-label=\"32 thread safe initialization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. Thread safe initialization</h2>\n<ul>\n<li>synchronized 를 사용하여 객체대한 접근에 lock 을 걸어 Thread Safe 하게 만드는 방법</li>\n<li>lock 을 사용해서 순차접근을 하는 것이기 때문에 성능저하가 일어날 수 있다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"16887698933471685000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`public class SettingsSynchronized {\r\n\r\n    private static SettingsSynchronized instance;\r\n\r\n    private SettingsSynchronized() {}\r\n\r\n    public static synchronized SettingsSynchronized getInstance() {\r\n        if (instance == null) {\r\n            instance = new SettingsSynchronized();\r\n        }\r\n        return instance;\r\n    }\r\n}`, `16887698933471685000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsSynchronized</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsSynchronized</span><span class=\"mtk1\"> </span><span class=\"mtk12\">instance</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsSynchronized</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">synchronized</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsSynchronized</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (instance == </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            instance = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsSynchronized</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> instance;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해라</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 자바의 동기화 블럭 처리 방법은?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 여러 스레드가 동시에 하나의 자원에 접글할 때 데이터 일관성과 정합성을 보장하기 위해 사용  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; synchronized 키워드 사용 (동기화 블럭 또는 메소드 지정), 내부적으로 모니터 락 또는 뮤텍스 개념을 이용</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. getInstance() 메소드 동기화시 사용하는 락(lock)은 인스턴스의 락인가 클래스의 락인가? 그 이유는?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 클래스 락이다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  - static 메소드에 붙으면 (클래스 락)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 그 클래스 자체(Class 객체)에 락이 걸린다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 클래스 단위로 단 하나의 락만 존재</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 같은 객체로 메소드를 여러 스레드가 동시에 호출(어떤 인스턴스로 접근하든)하면 한 번에 한 스레드만 실행 가능하고 다른 스레드는 락이 풀릴 때까지 대기, 다른 객체로 접근하면 동시에 실행 가능 (락이 다르기 때문에)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  - 인스턴스 메소드에 붙으면 (인스턴스 락)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 그 메소드를 호출한 객체의 락(this)을 건다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 각 인스턴스마다 락이 따로 존재</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    - 모든 인스턴스가 공유하는 클래스 단위 락이기 때문에 한 스레드가 실행 중이면 다른 스레드는 어떤 인스턴스로도 그 static 메소드를 동시에 실행 불가</span></span></code></pre>\n<h2 id=\"33-이른-초기화-eager-initialization\" style=\"position:relative;\"><a href=\"#33-%EC%9D%B4%EB%A5%B8-%EC%B4%88%EA%B8%B0%ED%99%94-eager-initialization\" aria-label=\"33 이른 초기화 eager initialization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3. 이른 초기화 (eager initialization)</h2>\n<ul>\n<li>멀티쓰레드환경에서 안전한 싱글톤의 2번째 방법</li>\n<li>클래스가 로드되는 시점에 객체가 미리 생성되므로, 별도의 동기화 없이 안전하게 사용할 수 있음</li>\n<li>단점: 앱 구동 시점에 객체가 미리 생성되므로, 객체 생성 비용이 큰 경우 불필요하게 리소스를 점유할 수 있음</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"37393617466929660000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`public class SettingsEagerInitialization {\r\n    private static final SettingsEagerInitialization instance = new SettingsEagerInitialization();\r\n\r\n    private SettingsEagerInitialization() {}\r\n\r\n    public static SettingsEagerInitialization getInstance() {\r\n        return instance;\r\n    }\r\n}`, `37393617466929660000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsEagerInitialization</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">final</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsEagerInitialization</span><span class=\"mtk1\"> </span><span class=\"mtk12\">instance</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsEagerInitialization</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsEagerInitialization</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsEagerInitialization</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> instance;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해 보세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 이른 초기화가 단점이 될 수도 있는 이유? </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 앱 구동 시 미리 만드는데 객체 생성 비용이 큰 경우 너무 많은 리소스 사용</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. 만약에 생성자에서 checked 예외를 던진다면 이 코드를 어떻게 변경해야 할까요?</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; Static block initialization 방법 사용</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  - static block : 클래스가 로딩되고 클래스 변수가 준비된 후 자동으로 실행되는 블록</span></span></code></pre>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"45598030101035690000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`class Singleton {\r\n    // 싱글톤 클래스 객체를 담을 인스턴스 변수\r\n    private static Singleton instance;\r\n\r\n    // 생성자를 private로 선언 (외부에서 new 사용 X)\r\n    private Singleton() {}\r\n    \r\n    // static 블록을 이용해 예외 처리\r\n    static {\r\n        try {\r\n            instance = new Singleton();\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(&quot;싱글톤 객체 생성 오류&quot;);\r\n        }\r\n    }\r\n\r\n    public static Singleton getInstance() {\r\n        return instance;\r\n    }\r\n}`, `45598030101035690000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Singleton</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 싱글톤 클래스 객체를 담을 인스턴스 변수</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Singleton</span><span class=\"mtk1\"> </span><span class=\"mtk12\">instance</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 생성자를 private로 선언 (외부에서 new 사용 X)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Singleton</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// static 블록을 이용해 예외 처리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">try</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            instance = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">Singleton</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        } </span><span class=\"mtk15\">catch</span><span class=\"mtk1\"> (</span><span class=\"mtk10\">Exception</span><span class=\"mtk1\"> </span><span class=\"mtk12\">e</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk15\">throw</span><span class=\"mtk1\"> </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">RuntimeException</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;싱글톤 객체 생성 오류&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Singleton</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> instance;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"34-double-checked-locking\" style=\"position:relative;\"><a href=\"#34-double-checked-locking\" aria-label=\"34 double checked locking permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.4. double checked locking</h2>\n<ul>\n<li>매번 <code>synchronized</code> 동기화가 문제이니, 최초 초기화 할때만 적용하고 이미 만들어진 인스턴스를 반환할떄는 사용하지 않도록 하는 기법</li>\n<li>I/O 불일치를 해결하기 위해 volatile 이라는 키워드를 사용해야 하는데, 이 키워드는 JVM에 대한 심층적인 이해가 필요하고, JVM에 따라서 여전히 쓰레드 세이프 하지 않는 경우가 발생하기 때문에 사용 지양\n<ul>\n<li>volatile 키워드\n<ul>\n<li>메모리 가시성과 명령 재정렬 방지를 보장</li>\n<li>메모리 가시성\n<ul>\n<li>멀티스레드 환경에서 여러 CPU 코어는 성능을 위해서 각각의 쓰레드들은 변수를 메인 메모리(RAM)으로부터 가져오는 것이 아니라 캐시(Cache) 메모리에서 가져오게 된다.</li>\n<li>이로 인해 한 스레드가 변경한 변수</li>\n<li>의 값이 다른 스레드의 캐시에는 반영되지 않아 서로 다른 값을 볼 수도 있다.</li>\n<li>그래서 volatile 키워드를 통해 이 변수는 캐시에서 읽지 말고 메인 메모리에서 읽어오도록 지정해주는 것이다.</li>\n</ul>\n</li>\n<li>명령 재정렬 문제\n<ul>\n<li>자바에서 객체 생성 과정은 1. 메모리 공간 할당, 2. 생성자 호출, 3. 변수에 인스턴스 참조 대입</li>\n<li>컴파일러나 CPU의 최적화 과정에서 2 -> 3 순서가 바뀌는 경우가 발생\n<ul>\n<li>한 스레드가 아직 생성자를 다 수행하지 않은 객체를 다른 스레드에게 참조로 넘기는 경우, 다른 스레드가 불완전한 객체에 접근</li>\n</ul>\n</li>\n<li><code>volatile</code>을 사용하면 이러한 명령어 재배치(reordering)을 금지해 객체가 완전히 초기화된 후에만 다른 스레드가 볼 수 있도록 보장</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"71313352769102316000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`public class SettingsDoubleCheckSynchronized {\r\n    private static volatile SettingsDoubleCheckSynchronized instance;\r\n\r\n    private SettingsDoubleCheckSynchronized() {}\r\n\r\n    public static synchronized SettingsDoubleCheckSynchronized getInstance() {\r\n        if (instance == null) {\r\n            synchronized (SettingsDoubleCheckSynchronized.class) {\r\n                if (instance == null) {\r\n                    instance = new SettingsDoubleCheckSynchronized();\r\n                }\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n}`, `71313352769102316000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">volatile</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\"> </span><span class=\"mtk12\">instance</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">synchronized</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (instance == </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">synchronized</span><span class=\"mtk1\"> (</span><span class=\"mtk12\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (instance == </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">                    instance = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsDoubleCheckSynchronized</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> instance;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해 보세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. double check locking이라고 부르는 이유? </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 두번의 조건 검사가 있기 때문에</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  - 첫번째 if에서 인스턴스가 이미 생성되어 있는지 1차로 검사, 이미 생성된 경우 synchronized 블록에 들어가지 않아도 되므로 성능 향상의 효과</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  - 여러 스레드가 동시에 첫번째 if문을 통과할 가능성이 있으므로 동기화 블록 안에서 한번 더 검사하여 실제 인스턴스를 한번만 생성되게 한다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. instacne 변수는 어떻게 정의해야 하는가? 그 이유는?</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; volatile 키워드를 사용, 메모리 가시성과 명령 재정렬 방지를 보장하기 위해</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<h2 id=\"35-bill-pugh-solution-lazyholder\" style=\"position:relative;\"><a href=\"#35-bill-pugh-solution-lazyholder\" aria-label=\"35 bill pugh solution lazyholder permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.5. Bill Pugh Solution (LazyHolder)</h2>\n<ul>\n<li>권장하는 2가지 방법 중 1개</li>\n<li>멀티스레드 환경에서도 안전하고, 호출될 때 instance 가 만들어지는 Lazy initialization방식</li>\n<li>클래스 안에 내부 클래스를 두어 JVM의 클래스 로더 매커니즘과 클래스가 로드되는 시점을 이용한 방법</li>\n<li>static 메소드에서는 static 멤버만을 호출할 수 있기 때문에 내부 클래스를 static으로 설정, 이밖에도 내부 클래스의 치명적인 문제점인 메모리 누수 문제를 해결하기 위하여 내부 클래스를 static으로 설정</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"25718814315722960000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`public class SettingsStaticInner implements Serializable {\r\n    // 외부에서 new로 생성하지 못하게 생성자를 private로 막는다.\r\n    private SettingsStaticInner() {}\r\n\r\n    // 인스턴스를 보관하는 역할을 하는 private static 내부 클래스\r\n    private static class SettingsHolder {\r\n        private static final SettingsStaticInner INSTANCE = new SettingsStaticInner();\r\n    }\r\n\r\n    public static SettingsStaticInner getInstance() {\r\n        return SettingsHolder.INSTANCE;\r\n    }\r\n}`, `25718814315722960000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Serializable</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 외부에서 new로 생성하지 못하게 생성자를 private로 막는다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsStaticInner</span><span class=\"mtk1\">() {}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// 인스턴스를 보관하는 역할을 하는 private static 내부 클래스</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsHolder</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk4\">final</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\"> </span><span class=\"mtk12\">INSTANCE</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">SettingsStaticInner</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">SettingsHolder</span><span class=\"mtk1\">.</span><span class=\"mtk12\">INSTANCE</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>외부에서 new로 생성하지 못하게 생성자를 private로 막는다.</li>\n<li>인스턴스를 보관하는 역할을 하는 private static 내부 클래스</li>\n</ul>\n<p>요 두개가 중요</p>\n<ol>\n<li>우선 내부 클래스를 static으로 선언하기 때문에, 싱글톤 클래스가 초기화 되어도 SettingsHolder 내부 클래스는 메모리에 ㄴ로드되지 않음</li>\n<li>어떤 모듈에서 getInstance() 메서드를 호출할 때, SettingsHolder 내부 클래스의 static 멤버를 가져와 리턴하게 되는데, 이 때 내부 클래스가 한번만 초기화 되면서 싱글톤 객체를 최초로 생성 및 리턴하게 된다</li>\n<li>마지막으로 final로 지정함으로서 다시 값이 할당되지 않도록 방지한다.</li>\n</ol>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해 보세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 이 방법은 static final를 썼는데도 왜 지연 초기화 (lazy initialization)라고 볼 수 있는가?  </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; static 필드는 클래스가 처음 로딩될 때 정적인 메모리 공간에 만들어지는데, holder가 가지고 있는 클래스가 로딩되는 시점은 getInstance()를 호출할 때 로딩되기 때문에 lazy-initialization이라고 한다.</span></span></code></pre>\n<p><strong>이 방법은 클라이언트가 임의로 싱글톤을 파괴할 수 있다는 단점을 지닌다.</strong></p>\n<ol>\n<li>리플렉션</li>\n</ol>\n<blockquote>\n<p>구체적인 클래스 타입을 알지 못해도, 클래스에 대한 메서드, 타입, 변수들을 접근할 수 있도록 해주는 Java API</p>\n</blockquote>\n<ul>\n<li>자바에서 제공하는 리플렉션 API를 사용해서 내부 설정을 변경할 수 있다</li>\n<li>리플렉션으로 생성자를 가져와, 접근 제어자에 대한 설정을 변경해 Singleton으로 구현한 객체를 새로운 인스턴스로 생성할 수 있다.</li>\n</ul>\n<p>-> 해당 객체의 생성자를 불러오고 → 접근제어를 풀고 → 새로운 인스턴스를 생성하여 싱글톤 객체의 제어에서 벗어날 수 있다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"31382949979096097000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`@Test\r\n@DisplayName(&quot;리플렉션을 사용해서 Singleton 깨드리기&quot;)\r\nvoid reflection() throws Exception{\r\n\r\n    SettingsStaticInner setting = SettingsStaticInner.getInstance();\r\n\r\n    Constructor<SettingsStaticInner> declaredConstructor = SettingsStaticInner.class.getDeclaredConstructor();\r\n    declaredConstructor.setAccessible(true);\r\n\r\n    SettingsStaticInner setting1 = declaredConstructor.newInstance();\r\n\r\n    assertThat(setting).isEqualTo(setting1);\r\n}`, `31382949979096097000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Test</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">DisplayName</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;리플렉션을 사용해서 Singleton 깨드리기&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">reflection</span><span class=\"mtk1\">() throws Exception{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\"> </span><span class=\"mtk12\">setting</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">SettingsStaticInner</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Constructor</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">declaredConstructor</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">SettingsStaticInner</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getDeclaredConstructor</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">declaredConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">setAccessible</span><span class=\"mtk1\">(</span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">SettingsStaticInner</span><span class=\"mtk1\"> </span><span class=\"mtk12\">setting1</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">declaredConstructor</span><span class=\"mtk1\">.</span><span class=\"mtk11\">newInstance</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">assertThat</span><span class=\"mtk1\">(setting).</span><span class=\"mtk11\">isEqualTo</span><span class=\"mtk1\">(setting1);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해 보세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 리플렉션에 대해 설명하세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 구체적인 클래스 타입을 알지 못해도, 클래스에 대한 메서드, 타입, 변수들을 접근할 수 있도록 해주는 Java API</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. setAccessible(true)를 사용하는 이유는?→ 필드나 메서드의 접근제어 지시자에 대한 제어를 변경하기 위한 메소드</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 즉 private으로 제어한 접근 설정에 대해 접근 권한을 주는 행위</span></span></code></pre>\n<ol start=\"2\">\n<li>직렬화 및 역직렬화의 사용</li>\n</ol>\n<ul>\n<li>객체를 직렬화시킨 후 다시 역직렬화 시켜서 새로운 객체를 만드는 방법\n<ul>\n<li>자바에서 외부 파일을 역직렬화 할 시에는, 반드시 생성자를 사용하여 새로운 인스턴스를 만들어 준다.</li>\n<li>이러한 설정을 이용해서, Singleton 설정을 깨뜨릴 수 있다.</li>\n</ul>\n</li>\n</ul>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">다음을 직접 설명해 보세요.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">1. 자바의 직렬화 &amp; 역직렬화에 대해 설명하세요. </span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 직렬화(Serialization): 객체를 바이트 스트림으로 변환하여 파일, 네트워크, 데이터베이스 등에 저장하거나 전송할 수 있도록 만드는 과정</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 역직렬화(Deserialization): 바이트 스트림을 다시 원래 객체로 복원하는 과정</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. SerializableId란 무엇이며 왜 쓰는가?</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; serialVersionUID는 직렬화된 객체의 버전을 관리하는 고유한 ID 값.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 객체의 클래스가 변경되었을 때 역직렬화 오류를 방지하기 위해 사용됨.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3. try-resource 블럭에 대해 설명하세요</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; try-with-resources는 AutoCloseable을 구현한 리소스를 자동으로 닫아주는 try문.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-&gt; 자원(File, Socket, Stream 등)을 명시적으로 close() 호출하지 않아도 자동 해제됨.</span></span></code></pre>\n<h2 id=\"36-enum-이용\" style=\"position:relative;\"><a href=\"#36-enum-%EC%9D%B4%EC%9A%A9\" aria-label=\"36 enum 이용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.6. Enum 이용</h2>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"7488465433488467000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`enum SingletonEnum {\r\n    // INSTANCE가 자기 자신(SingletonEnum 타입)의 인스턴스이면서, 동시에 public static final 특성을 갖는 필드\r\n    INSTANCE;\r\n\r\n    private final Client dbClient;\r\n\t\r\n    // enum 생성자는 JVM에 의해 단 한번만 호출\r\n    SingletonEnum() {\r\n        dbClient = Database.getClient();\r\n    }\r\n\r\n    public static SingletonEnum getInstance() {\r\n        return INSTANCE;\r\n    }\r\n\r\n    public Client getClient() {\r\n        return dbClient;\r\n    }\r\n}\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        SingletonEnum singleton = SingletonEnum.getInstance();\r\n        singleton.getClient();\r\n\r\n        Client client2 = SingletonEnum.INSTANCE.getClient();\r\n    }\r\n}`, `7488465433488467000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">enum</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SingletonEnum</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// INSTANCE가 자기 자신(SingletonEnum 타입)의 인스턴스이면서, 동시에 public static final 특성을 갖는 필드</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    INSTANCE;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">final</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Client</span><span class=\"mtk1\"> </span><span class=\"mtk12\">dbClient</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">\t</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// enum 생성자는 JVM에 의해 단 한번만 호출</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk11\">SingletonEnum</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        dbClient = </span><span class=\"mtk12\">Database</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getClient</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">SingletonEnum</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> INSTANCE;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Client</span><span class=\"mtk1\"> </span><span class=\"mtk11\">getClient</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> dbClient;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Main</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> </span><span class=\"mtk10\">void</span><span class=\"mtk1\"> </span><span class=\"mtk11\">main</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\">[] </span><span class=\"mtk12\">args</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">SingletonEnum</span><span class=\"mtk1\"> </span><span class=\"mtk12\">singleton</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">SingletonEnum</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getInstance</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">singleton</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getClient</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">Client</span><span class=\"mtk1\"> </span><span class=\"mtk12\">client2</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">SingletonEnum</span><span class=\"mtk1\">.</span><span class=\"mtk12\">INSTANCE</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getClient</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>자바에서 가장 간결하고 안전하게 싱글톤을 구현하는 방법은 **Enum(열거 타입)**을 사용하는 것\n<ul>\n<li>코드가 매우 간결</li>\n<li>리플렉션 공격에 안전 (Enum은 내부적으로 리플렉션을 통한 인스턴스 생성을 막는다)</li>\n<li>JVM이 Enum 인스턴스의 생성을 단 한 번만 수행하도록 보장 -> 직렬화에 자동으로 대비</li>\n<li>스레드 안전성도 완벽하게 보장</li>\n</ul>\n</li>\n<li>단점\n<ul>\n<li>싱글톤 클래스를 멀티톤(일반 클래스)로 마이그레이션 할 때 처음부터 코드를 다시짜야 되는 단점이 존재한다. (개발 스펙은 언제어디서 변경 될 수 있기 때문에)</li>\n<li>클래스 상속이 필요할 때, enum외의 클래스 상속은 불가능하다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-싱글톤-패턴-복습\" style=\"position:relative;\"><a href=\"#4-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EB%B3%B5%EC%8A%B5\" aria-label=\"4 싱글톤 패턴 복습 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 싱글톤 패턴 복습</h1>\n<p>최종 정리하자면, 싱글톤 패턴 클래스를 만들기 위해서는 Bill Pugh Solution기법을 사용하거나 Enum으로 만들어 사용</p>\n<p>이 둘의 사용 선택은 자신의 싱글톤 클래스의 목적에 맞게 사용한다</p>\n<ul>\n<li>LasyHolder : 성능이 중요시 되는 환경</li>\n<li>Enum : 직렬화, 안정성이 중요시 되는 환경</li>\n</ul>\n<h2 id=\"41-싱글톤-패턴의-단점\" style=\"position:relative;\"><a href=\"#41-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"41 싱글톤 패턴의 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 싱글톤 패턴의 단점</h2>\n<ul>\n<li>모듈 간 의존성 증가\n<ul>\n<li>싱글톤 객체를 여러 모듈이 공유하기 때문에, 인스턴스 변경 시 참조 모듈도 수정 필요</li>\n<li>남용 시 클래스 간 결합도가 높아져 패턴 사용이 오히려 문제를 일으킬 수 있음</li>\n</ul>\n</li>\n<li>S.O.L.I.D 원칙 위배 가능\n<ul>\n<li>단일 책임 원칙(SRP): 하나의 싱글톤이 여러 책임을 가질 수 있음</li>\n<li>개방-폐쇄 원칙(OCP): 다른 클래스와 강하게 결합되면 변경 시 영향 범위가 커짐</li>\n<li>의존 역전 원칙(DIP): 클라이언트가 추상화가 아닌 구체 클래스에 의존하게 됨</li>\n</ul>\n->  잘못 쓰면 안티패턴이 될 수 있음</li>\n<li>단위 테스트(TDD) 어려움\n<ul>\n<li>인스턴스를 전역에서 공유하기 때문에 테스트 간 독립성이 깨질 수 있음</li>\n<li>상태 초기화가 필요하며, Mock 객체 생성과 테스트가 어려움</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"5-싱글톤-패턴-실무에서는-어떻게-쓰이나\" style=\"position:relative;\"><a href=\"#5-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EC%8B%A4%EB%AC%B4%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%93%B0%EC%9D%B4%EB%82%98\" aria-label=\"5 싱글톤 패턴 실무에서는 어떻게 쓰이나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 싱글톤 패턴 실무에서는 어떻게 쓰이나</h1>\n<ul>\n<li>스프링에서 빈의 스코프 중에 하나로 싱글톤 스코프</li>\n<li>자바 java.lang.Runtime</li>\n<li>다른 디자인 패턴 (빌더, 퍼사드, 추상 팩토리 등) 구현체의 일부로 쓰인다</li>\n</ul>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://www.inflearn.com/course/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/dashboard\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">코딩으로 학습하는 GoF의 디자인 패턴</a><br>\n<a href=\"https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%8B%B1%EA%B8%80%ED%86%A4Singleton-%ED%8C%A8%ED%84%B4-%EA%BC%BC%EA%BC%BC%ED%95%98%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">싱글톤(Singleton) 패턴 - 꼼꼼하게 알아보자 - Inpa Dev</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4\">1. 싱글톤 패턴</a></p>\n</li>\n<li>\n<p><a href=\"#2-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0\">2. 싱글톤 패턴을 사용하는 이유</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EA%B5%AC%ED%98%84%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">3. 싱글톤 패턴 구현하는 방법</a></p>\n<ul>\n<li><a href=\"#31-private-%EC%83%9D%EC%84%B1%EC%9E%90%EC%97%90-static-%EB%A9%94%EC%86%8C%EB%93%9C\">3.1. private 생성자에 static 메소드</a></li>\n<li><a href=\"#32-thread-safe-initialization\">3.2. Thread safe initialization</a></li>\n<li><a href=\"#33-%EC%9D%B4%EB%A5%B8-%EC%B4%88%EA%B8%B0%ED%99%94-eager-initialization\">3.3. 이른 초기화 (eager initialization)</a></li>\n<li><a href=\"#34-double-checked-locking\">3.4. double checked locking</a></li>\n<li><a href=\"#35-bill-pugh-solution-lazyholder\">3.5. Bill Pugh Solution (LazyHolder)</a></li>\n<li><a href=\"#36-enum-%EC%9D%B4%EC%9A%A9\">3.6. Enum 이용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EB%B3%B5%EC%8A%B5\">4. 싱글톤 패턴 복습</a></p>\n<ul>\n<li><a href=\"#41-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%98-%EB%8B%A8%EC%A0%90\">4.1 싱글톤 패턴의 단점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-%EC%8B%A4%EB%AC%B4%EC%97%90%EC%84%9C%EB%8A%94-%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%93%B0%EC%9D%B4%EB%82%98\">5. 싱글톤 패턴 실무에서는 어떻게 쓰이나</a></p>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"싱글톤 패턴 정리","summary":["싱글톤 패턴을 정리해보자"],"date":"2025.10.16.","update":"2025.10.16.","category":["DesignPattern"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACDUlEQVR42nWUyY7jMAxE9f/fk+Sa5JQAPZnse+zsi519mTPHj0AZ7sH0QZBEFskiKSrsdjs7nU622Wys1+vZaDSy+Xxux+PR9+l0as1m09brtSVJ4rtwi8XCDoeDzWYzm0wm1mq1LKxWKwehQBjHsREEo1KpZNVq1YNFUWTb7db2+/03XKfTcVy9Xnd9gAGK1+vlTi+XixtjSDBA6GGB/vl8+n4+n7/hCHrKMgh+yFJGQZoYkwoygqHPDTIZzljCUQYYo0cWZJCmqddMNbnf776TmjDCISe4cDhcLpduG6gBTIj2fr9zNixqOxwO3XgwGNh4PPYA4HBAOYTr9/vuPKhOLHVbiztAgslYrwInRVy323VZ4EKBb7ebs8MYIxb1Uc1IVTjY0RDh0LGjDzigdtSBCDQHGWex0rMRjvu/OMhAzh1yAaD0KDbPB0MeMHocssNEOAJcr9e81vgISgchDUKhCaAJrEaj4SzA4ZR6EYggwnH/+vplgXqILt1W9zCqVCpWq9XyNwdjOl7EtdttK5fLPinOECWHx+ORTwBPg7NqWpyU/+G8+5lzmhj0XDD8aQJgU5wUBRGOlNH7LMMCA02KfpnipKiLwmlSwMGYLOM4cln4nX0504wJys/n40YE0S9ER2HF7wMTGgFOI6keRPHS3p8/FvQpKGXdkyT1p6MGIJO+iIMxuJX/Nqn9BU9tz+JzmPYZAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/a6cebd99451f2805592572c17ff0fc74/c55db/thumbnail.png","srcSet":"/static/a6cebd99451f2805592572c17ff0fc74/be367/thumbnail.png 141w,\n/static/a6cebd99451f2805592572c17ff0fc74/e5d79/thumbnail.png 282w,\n/static/a6cebd99451f2805592572c17ff0fc74/c55db/thumbnail.png 563w","sizes":"(min-width: 563px) 563px, 100vw"},"sources":[{"srcSet":"/static/a6cebd99451f2805592572c17ff0fc74/f6e01/thumbnail.webp 141w,\n/static/a6cebd99451f2805592572c17ff0fc74/b189f/thumbnail.webp 282w,\n/static/a6cebd99451f2805592572c17ff0fc74/7d4f1/thumbnail.webp 563w","type":"image/webp","sizes":"(min-width: 563px) 563px, 100vw"}]},"width":563,"height":484}},"publicURL":"/static/a6cebd99451f2805592572c17ff0fc74/thumbnail.png"}}}}]}},"pageContext":{"slug":"/Singleton/","series":[],"lastmod":"2025.10.16.","prev":{"fields":{"slug":"/elkAnalyzer/"},"frontmatter":{"title":"Elastic Search Analyzer 정리","date":"2025.09.23.","update":"2025.09.23.","category":["ELK"],"tags":["ELK"],"summary":["Elastic Search Analyzer 정리한다."]}},"next":{"fields":{"slug":"/FactoryMethod/"},"frontmatter":{"title":"팩토리 메서드 패턴 정리","date":"2025.10.17.","update":"2025.10.17.","category":["DesignPattern"],"tags":["DesignPattern"],"summary":["팩토리 메서드 패턴을 정리해보자"]}}}},"staticQueryHashes":["427104293"],"slicesMap":{}}