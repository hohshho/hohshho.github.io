{"componentChunkName":"component---src-templates-post-tsx","path":"/JPA_5/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"82ab5084-b050-5411-9dab-63f9aec0de95","html":"<h1 id=\"querydsl-이란\" style=\"position:relative;\"><a href=\"#querydsl-%EC%9D%B4%EB%9E%80\" aria-label=\"querydsl 이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>QueryDSL 이란?</h1>\n<blockquote>\n<p><strong>Querydsl</strong>을 통해 생성되는 정적 Q-type 클래스를 이용해 쿼리를 생성하도록 도와주는 프레임 워크</p>\n</blockquote>\n<h2 id=\"jpql-vs-querydsl\" style=\"position:relative;\"><a href=\"#jpql-vs-querydsl\" aria-label=\"jpql vs querydsl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>JPQL vs Querydsl</h2>\n<p><strong>타입 체크, 오류 잡아주는 시점</strong><br>\nJPQL - 실행 시점 오류<br>\nQuerydsl - 컴파일 시점 오류</p>\n<p><strong>파라미터 바인딩</strong><br>\nJPQL - 파라미터 바인딩 직접<br>\nQuerydsl - 파라미터 바인딩 자동 처리</p>\n<h2 id=\"buildgradle\" style=\"position:relative;\"><a href=\"#buildgradle\" aria-label=\"buildgradle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>build.gradle</h2>\n<p>build.gradle에 queryDSL 설정 추가</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"># build.gradle</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">buildscript {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ext {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    queryDslVersion = &quot;5.0.0&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">plugin {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  id &quot;com.ewerk.gradle.plugins.querydsl&quot; version &quot;1.0.10&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">dependencies {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  implementation &quot;com.querydsl:querydsl-jpa:${queryDslVersion}&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  implementation &quot;com.querydsl:querydsl-apt:${queryDslVersion}&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">def querydslDir = &quot;$buildDir/generated/querydsl&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">querydsl {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  jpa = true</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  querydslSourcesDir = querydslDir</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">sourceSets {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  main.java.srcDir querydslDir</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">compileQuerydsl{</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  options.annotationProcessorPath = configurations.querydsl</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">configurations {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  compileOnly {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    extendsFrom annotationProcessor</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  querydsl.extendsFrom compileClasspath</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"87781890570083880000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`# queryDSL Q타입 생성 (git ignore 설정 필요)\n# build.gradle에 설정한 명령어\n./gradlew clean compileQuerydsl\n\n# Gradle 의존관계 확인\n./gradlew dependencies --configuration compileClasspath`, `87781890570083880000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># queryDSL Q타입 생성 (git ignore 설정 필요)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># build.gradle에 설정한 명령어</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">./gradlew clean compileQuerydsl</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gradle 의존관계 확인</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">./gradlew dependencies --configuration compileClasspath</span></span></span></code></pre>\n<p><strong>Querydsl 라이브러리</strong></p>\n<ul>\n<li>querydsl-apt: Querydsl 관련 코드 생성 기능 제공</li>\n<li>querydsl-jpa: querydsl 라이브러리</li>\n</ul>\n<h1 id=\"querydsl-활용\" style=\"position:relative;\"><a href=\"#querydsl-%ED%99%9C%EC%9A%A9\" aria-label=\"querydsl 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>QueryDSL 활용</h1>\n<h2 id=\"querydsl-bean-등록\" style=\"position:relative;\"><a href=\"#querydsl-bean-%EB%93%B1%EB%A1%9D\" aria-label=\"querydsl bean 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>QueryDSL Bean 등록</h2>\n<p>repository 작성 시 JPA에 접근하기 위한 EntityManager와 QueryDSL을 사용하기 위한 JPAQueryFactory를 주입받아야 하는데</p>\n<p>EntityManager의 경우 Spring에 Bean으로 등록되어 있어 생성자 주입으로 주입이 가능</p>\n<p>queryFactory도 생성자 주입으로 주입 받고 싶을 경우엔 SpringBoot에 Bean으로 등록시키고 생성자 생성시 주입받으면 된다.<br>\n(AppConfig를 만들어 적용)</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"34435754088771730000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@Configuration\n@RequiredArgsConstructor\npublic class Appconfig {\n    private final EntityManager em;\n\n    @Bean\n    public JPAQueryFactory queryFactory() {\n        return new JPAQueryFactory(em);\n    }\n}`, `34435754088771730000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Configuration</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">RequiredArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Appconfig</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">final</span><span class=\"mtk1\"> </span><span class=\"mtk10\">EntityManager</span><span class=\"mtk1\"> </span><span class=\"mtk12\">em</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">Bean</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPAQueryFactory</span><span class=\"mtk1\"> </span><span class=\"mtk11\">queryFactory</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JPAQueryFactory</span><span class=\"mtk1\">(em);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>JPA 접근 시 EntityManager 필요</li>\n<li>JPAQueryFatory는 QueryDSl 쿼리 작성 클래스</li>\n</ul>\n<h2 id=\"동시성-문제\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%8B%9C%EC%84%B1-%EB%AC%B8%EC%A0%9C\" aria-label=\"동시성 문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동시성 문제</h2>\n<blockquote>\n<p>스프링은 여러 쓰레드에서 동시에 같은 EntityManager에 접근해도<br>\n트랜잭션 마다 별도의 영속성 컨텍스트 제공 -> <strong>동시성 문제 x</strong></p>\n</blockquote>\n<h2 id=\"qclass-인스턴스-사용-방법\" style=\"position:relative;\"><a href=\"#qclass-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\" aria-label=\"qclass 인스턴스 사용 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Qclass 인스턴스 사용 방법</h2>\n<ol>\n<li>별칭 직접 지정 -> 같은 테이블 조인 시</li>\n<li>기본 인스턴스 사용 -> static import로 전역선언 후 사용</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"784441577916483700\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`//별칭 직접 지정\nQMember qMember = new QMember(&quot;m&quot;);\n\n//기본 인스턴스 사용\nQMember qMember = QMember.member;\n\n// 전역 선언\nimport static study.querydsl.entity.QMember.*;`, `784441577916483700`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//별칭 직접 지정</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">QMember</span><span class=\"mtk1\"> </span><span class=\"mtk12\">qMember</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMember</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;m&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//기본 인스턴스 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">QMember</span><span class=\"mtk1\"> </span><span class=\"mtk12\">qMember</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">QMember</span><span class=\"mtk1\">.</span><span class=\"mtk12\">member</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 전역 선언</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">import</span><span class=\"mtk1\"> </span><span class=\"mtk4\">static</span><span class=\"mtk1\"> study.querydsl.entity.QMember.*;</span></span></span></code></pre>\n<h2 id=\"검색-조건-추가\" style=\"position:relative;\"><a href=\"#%EA%B2%80%EC%83%89-%EC%A1%B0%EA%B1%B4-%EC%B6%94%EA%B0%80\" aria-label=\"검색 조건 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>검색 조건 추가</h2>\n<ul>\n<li>.and(), .or() 메서드 체인으로 연결</li>\n<li>JPQL이 제공하는 모든 검색 조건 제공</li>\n<li>and vs eq -> eq 사용 - 동적 쿼리 만들 때 null 무시하게 코드 작성 가능</li>\n</ul>\n<details>\n<summary><b>검색 조건 설정 (Toggle)</b></summary>\n<table>\n<thead>\n<tr>\n<th>표현</th>\n<th>결과</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>.eq(“member”)</td>\n<td>username = ‘member’</td>\n</tr>\n<tr>\n<td>.ne(“member”)</td>\n<td>username != ‘member’</td>\n</tr>\n<tr>\n<td>.eq(“member”).not()</td>\n<td>username != ‘member’</td>\n</tr>\n<tr>\n<td>.isNotNull()</td>\n<td>is not null</td>\n</tr>\n<tr>\n<td>.in(10, 20)</td>\n<td>in (10,20)</td>\n</tr>\n<tr>\n<td>.notIn(10, 20)</td>\n<td>not in (10, 20)</td>\n</tr>\n<tr>\n<td>.between(10,30)</td>\n<td>between 10, 30</td>\n</tr>\n<tr>\n<td>.goe(30)</td>\n<td>>= 30</td>\n</tr>\n<tr>\n<td>.gt(30)</td>\n<td>> 30</td>\n</tr>\n<tr>\n<td>.loe(30)</td>\n<td>&#x3C;= 30</td>\n</tr>\n<tr>\n<td>.lt(30)</td>\n<td>&#x3C; 30</td>\n</tr>\n<tr>\n<td>.like(“member%“)</td>\n<td>like 검색</td>\n</tr>\n<tr>\n<td>.contains(“member”)</td>\n<td>like ‘%member%’ 검색</td>\n</tr>\n<tr>\n<td>.startsWith(“member”)</td>\n<td>like ‘member%’ 검색</td>\n</tr>\n</tbody>\n</table>\n</details>\n<h2 id=\"결과-조회\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C\" aria-label=\"결과 조회 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결과 조회</h2>\n<p><strong>fetch()</strong> : 리스트 조회, 데이터 없으면 빈 리스트 반환</p>\n<p><strong>fetchOne()</strong> : 단 건 조회</p>\n<ul>\n<li>결과가 없으면 : null</li>\n<li>결과가 둘 이상이면 : com.querydsl.core.NonUniqueResultException</li>\n</ul>\n<p><strong>fetchFirst()</strong> : limit(1).fetchOne()</p>\n<p><strong>fetchResults, fetchCount</strong> -> deprecated 되서 count용 쿼리 구현 후 사용</p>\n<h2 id=\"정렬\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A0%AC\" aria-label=\"정렬 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정렬</h2>\n<blockquote>\n<p>groupby 사용</p>\n</blockquote>\n<p>desc() , asc() : 일반 정렬\nnullsLast() , nullsFirst() : null 데이터 순서 부여</p>\n<p>SQL은 다중 정렬 시 왼쪽부터 순차 정렬</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"59307596737603150000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`.orderBy(member.age.desc(), member.username.asc().nullsLast())`, `59307596737603150000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">.</span><span class=\"mtk11\">orderBy</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">desc</span><span class=\"mtk1\">(), </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">asc</span><span class=\"mtk1\">().</span><span class=\"mtk11\">nullsLast</span><span class=\"mtk1\">())</span></span></span></code></pre>\n<h2 id=\"집합\" style=\"position:relative;\"><a href=\"#%EC%A7%91%ED%95%A9\" aria-label=\"집합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>집합</h2>\n<p>7가지 집합 함수 사용 가능</p>\n<h2 id=\"조인\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EC%9D%B8\" aria-label=\"조인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조인</h2>\n<h4 id=\"기본-조인-페치-조인-적용\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EB%B3%B8-%EC%A1%B0%EC%9D%B8-%ED%8E%98%EC%B9%98-%EC%A1%B0%EC%9D%B8-%EC%A0%81%EC%9A%A9\" aria-label=\"기본 조인 페치 조인 적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기본 조인 (페치 조인 적용)</h4>\n<ul>\n<li>join은 leftJoin, rightJoin 모두 가능</li>\n<li>join 이후에 on을 넣어 조건절 가능</li>\n<li>세타조인 또한 가능</li>\n<li><strong>.on()</strong> 절을 통해 <strong>조인 대상을 필터링</strong> 하거나 <strong>동적인 조건 연관관계 없이 조인</strong> 가능</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"9679240597857030000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`List<Member> resultQuerydsl = queryFactory\n                .selectFrom(user)\n                .join(member.team, team).fetchJoin() // fetch join 가능\n                .fetch();\n\nList<Member> result = queryFactory\n        .select(member)\n        .from(member, team)\n        .where(member.username.eq(team.name))\n        .fetch();\n\nList<Tuple> result = queryFactory\n        .select(member, team)\n        .from(member)\n        .leftJoin(team).on(member.username.eq(team.name))\n        .fetch();\n`, `9679240597857030000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">resultQuerydsl</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">selectFrom</span><span class=\"mtk1\">(user)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">join</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">team</span><span class=\"mtk1\">, team).</span><span class=\"mtk11\">fetchJoin</span><span class=\"mtk1\">() </span><span class=\"mtk3\">// fetch join 가능</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Tuple</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(member, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">leftJoin</span><span class=\"mtk1\">(team).</span><span class=\"mtk11\">on</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<h2 id=\"서브-쿼리\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B8%8C-%EC%BF%BC%EB%A6%AC\" aria-label=\"서브 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서브 쿼리</h2>\n<ul>\n<li>QueryDSL에서 제공하는 <strong>JPAExpressions</strong> 클래스를 사용해 서브쿼리 사용 가능</li>\n<li>alias가 중복되면 안되는 경우 Q-type 객체 생성해서 사용</li>\n<li>case문 사용 시 <strong>CaseBuilder</strong> 클래스 사용</li>\n<li>상수 사용 시 <strong>Expressions</strong> 클래스 사용</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"52990413117228100000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// 1. where절 서브쿼리\nQMember memberSub = new QMember(&quot;memberSub&quot;);\nList<Member> result = queryFactory\n        .selectFrom(member)\n        .where(member.age.eq(\n                JPAExpressions\n                        .select(memberSub.age.max())\n                        .from(memberSub)\n        )).fetch();\n\n// 2. select절 서브쿼리\nList<Tuple> fetch = queryFactory\n        .select(member.username,\n                JPAExpressions\n                        .select(memberSub.age.avg())\n                        .from(memberSub)\n        ).from(member)\n        .fetch();\n\n// 3. case문\nList<String> result = queryFactory\n             .select(new CaseBuilder()\n                    .when(member.age.between(0, 20)).then(&quot;0~20살&quot;)\n                    .when(member.age.between(21, 30)).then(&quot;21~30살&quot;)\n                    .otherwise(&quot;기타&quot;))\n             .from(member)\n             .fetch();\n\n// 4. 상수 사용\nTuple result = queryFactory\n            .select(member.username, Expressions.constant(&quot;A&quot;))\n            .from(member)\n            .fetchFirst();`, `52990413117228100000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 1. where절 서브쿼리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">QMember</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memberSub</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMember</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;memberSub&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">selectFrom</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk10\">JPAExpressions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">memberSub</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">max</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(memberSub)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        )).</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 2. select절 서브쿼리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Tuple</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">fetch</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk10\">JPAExpressions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">memberSub</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">avg</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(memberSub)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ).</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 3. case문</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">String</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">CaseBuilder</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    .</span><span class=\"mtk11\">when</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">between</span><span class=\"mtk1\">(</span><span class=\"mtk7\">0</span><span class=\"mtk1\">, </span><span class=\"mtk7\">20</span><span class=\"mtk1\">)).</span><span class=\"mtk11\">then</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;0~20살&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    .</span><span class=\"mtk11\">when</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">between</span><span class=\"mtk1\">(</span><span class=\"mtk7\">21</span><span class=\"mtk1\">, </span><span class=\"mtk7\">30</span><span class=\"mtk1\">)).</span><span class=\"mtk11\">then</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;21~30살&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    .</span><span class=\"mtk11\">otherwise</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;기타&quot;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">             .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 4. 상수 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">Tuple</span><span class=\"mtk1\"> </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">, </span><span class=\"mtk12\">Expressions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">constant</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;A&quot;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">fetchFirst</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<h2 id=\"프로젝션\" style=\"position:relative;\"><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98\" aria-label=\"프로젝션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>프로젝션</h2>\n<ul>\n<li>간단한 몇 가지 프로퍼티들만 조회 할 경우엔 Q-type 객체의 프로퍼티를 넘겨주면 된다.</li>\n<li>Dto를 사용해 select 할 경우엔 3가지 방법이 가능하다\n<ul>\n<li>프로퍼티 접근</li>\n<li>필드 직접 접근</li>\n<li>생성자 사용</li>\n</ul>\n</li>\n<li>프로퍼티, 필드 접근 시 이름이 다를 땐 **ExpressionUtils.as(source,alias)**를 사용해 필드나 서브쿼리에 별칭을 적용한다.</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"35862979511109260000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// 대상이 하나인 경우\nList<String> result = queryFactory\n        .select(member.username)\n        .from(member)\n        .fetch();\n\n// 대상이 여러개\nList<Tuple> result2 = queryFactory\n        .select(member.username, member.age)\n        .from(member)\n        .fetch();\n\n// --- DTO 사용\n// 1. Property 사용\n// bean으로 사용하면 getter, setter로 값을 넣어준다.\nList<MemberDto> result = queryFactory\n        .select(Projections.bean(MemberDto.class,\n                member.username,\n                member.age))\n        .from(member)\n        .fetch();\n\n// 2. field 직접 접근\nList<MemberDto> result = queryFactory\n        .select(Projections.fields(MemberDto.class,\n                member.username,\n                member.age))\n        .from(member)\n        .fetch();\n\n// 2.1 field 접근 시 별칭이 다를 때\nQMember memberSub = new QMember(&quot;memberSub&quot;);\n\nList<UserDto> result = queryFactory\n        .select(Projections.fields(UserDto.class,\n                member.username.as(&quot;name&quot;),\n\n                // 서브 쿼리 사용 시, 이름이 없을 때 ExpressionUtils 사용\n                ExpressionUtils.as(\n                        select(memberSub.age.max())\n                                .from(memberSub), &quot;age&quot;)\n        ))\n        .from(member)\n        .fetch();\n\n// 3. 생성자 사용\n List<MemberDto> result = queryFactory\n        .select(Projections.constructor(MemberDto.class,\n        member.username,\n        member.age))\n.from(member)\n.fetch();`, `35862979511109260000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 대상이 하나인 경우</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">String</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 대상이 여러개</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Tuple</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result2</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">, </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// --- DTO 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 1. Property 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// bean으로 사용하면 getter, setter로 값을 넣어준다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Projections</span><span class=\"mtk1\">.</span><span class=\"mtk11\">bean</span><span class=\"mtk1\">(</span><span class=\"mtk12\">MemberDto</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 2. field 직접 접근</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Projections</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fields</span><span class=\"mtk1\">(</span><span class=\"mtk12\">MemberDto</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 2.1 field 접근 시 별칭이 다를 때</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">QMember</span><span class=\"mtk1\"> </span><span class=\"mtk12\">memberSub</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMember</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;memberSub&quot;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">UserDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Projections</span><span class=\"mtk1\">.</span><span class=\"mtk11\">fields</span><span class=\"mtk1\">(</span><span class=\"mtk12\">UserDto</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">as</span><span class=\"mtk1\">(</span><span class=\"mtk8\">&quot;name&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk3\">// 서브 쿼리 사용 시, 이름이 없을 때 ExpressionUtils 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk12\">ExpressionUtils</span><span class=\"mtk1\">.</span><span class=\"mtk11\">as</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">memberSub</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">max</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(memberSub), </span><span class=\"mtk8\">&quot;age&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// 3. 생성자 사용</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\"> </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Projections</span><span class=\"mtk1\">.</span><span class=\"mtk11\">constructor</span><span class=\"mtk1\">(</span><span class=\"mtk12\">MemberDto</span><span class=\"mtk1\">.</span><span class=\"mtk12\">class</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">.</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">.</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<p>추가로 Dto 클래스에 <strong>@QueryProjection</strong> 어노테이션을 추가해 Dto 전용 Q-type을 추가해<br>\n깔끔한 코드를 작성 가능한데 Dto 클래스 내부에 Querydsl 라이브러리 의존성이 생기기 때문에<br>\n확장성이나 유지보수 시 단점이 될 수 있다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"81233132798747640000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`@Data\n@NoArgsConstructor\npublic class UserDto {\n    private String name;\n    private int age;\n\n    @QueryProjection\n    public UserDto(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n}\n\nList<UserDto> result = queryFactory\n        .select(new QUserDto(member.username, member.age))\n        .from(member)\n        .fetch();\n`, `81233132798747640000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">Data</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">@</span><span class=\"mtk10\">NoArgsConstructor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">UserDto</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">String</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">age</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">QueryProjection</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">UserDto</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> </span><span class=\"mtk12\">name</span><span class=\"mtk1\">, </span><span class=\"mtk10\">int</span><span class=\"mtk1\"> </span><span class=\"mtk12\">age</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\"> = name;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\"> = age;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">UserDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QUserDto</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">, </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>Tip!!</p>\n<ul>\n<li>Query로 데이터 가져올 때 기본조건이나 limit 조건 있는게 좋음 (너무 많은 데이터 가져와서)</li>\n</ul>\n<h2 id=\"동적-쿼리\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%A0%81-%EC%BF%BC%EB%A6%AC\" aria-label=\"동적 쿼리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동적 쿼리</h2>\n<p>동적 쿼리를 처리할 땐 <strong>BooleanBuilder</strong>, <strong>Where 다중 파라미터</strong> 2가지 방법으로 처리가 가능하다.</p>\n<ol>\n<li>BooleanBuilder 사용</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"23119541214702256000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\nList<Member> result = searchMember1(usernameParam, ageParam);\n\nprivate List<Member> searchMember1(String usernameCond, Integer ageCond) {\n    BooleanBuilder builder = new BooleanBuilder();\n    if (usernameCond != null) {\n        builder.and(member.username.eq(usernameCond));\n    }\n    if (ageCond != null) {\n        builder.and(member.age.eq(ageCond));\n    }\n    return queryFactory\n            .selectFrom(member)\n            .where(builder)\n            .fetch();\n}\n`, `23119541214702256000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">searchMember1</span><span class=\"mtk1\">(usernameParam, ageParam);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;Member&gt; </span><span class=\"mtk11\">searchMember1</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> usernameCond, </span><span class=\"mtk10\">Integer</span><span class=\"mtk1\"> ageCond) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">BooleanBuilder</span><span class=\"mtk1\"> </span><span class=\"mtk12\">builder</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">BooleanBuilder</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (usernameCond != </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">builder</span><span class=\"mtk1\">.</span><span class=\"mtk11\">and</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(usernameCond));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">if</span><span class=\"mtk1\"> (ageCond != </span><span class=\"mtk4\">null</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">builder</span><span class=\"mtk1\">.</span><span class=\"mtk11\">and</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(ageCond));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">selectFrom</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(builder)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<ol start=\"2\">\n<li>Where 다중 파라미터 사용</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"40587742032313810000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`List<Member> result = searchMember2(usernameParam, ageParam);\n\nprivate List<Member> searchMember2(String usernameCond, Integer ageCond) {\n    return queryFactory\n            .selectFrom(member)\n            .where(usernameEq(usernameCond), ageEq(ageCond))\n            .fetch();\n}\n\nprivate BooleanExpression usernameEq(String usernameCond) {\n    return usernameCond != null ? member.username.eq(usernameCond) : null;\n}\n\nprivate BooleanExpression ageEq(Integer ageCond) {\n    return ageCond != null ? member.age.eq(ageCond) : null;\n}`, `40587742032313810000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">result</span><span class=\"mtk1\"> = </span><span class=\"mtk11\">searchMember2</span><span class=\"mtk1\">(usernameParam, ageParam);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;Member&gt; </span><span class=\"mtk11\">searchMember2</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> usernameCond, </span><span class=\"mtk10\">Integer</span><span class=\"mtk1\"> ageCond) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">selectFrom</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(usernameCond), </span><span class=\"mtk11\">ageEq</span><span class=\"mtk1\">(ageCond))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> usernameCond) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> usernameCond != </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(usernameCond) </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ageEq</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Integer</span><span class=\"mtk1\"> ageCond) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> ageCond != </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(ageCond) </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h2 id=\"sql-함수-사용\" style=\"position:relative;\"><a href=\"#sql-%ED%95%A8%EC%88%98-%EC%82%AC%EC%9A%A9\" aria-label=\"sql 함수 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SQL 함수 사용</h2>\n<ul>\n<li>concat, coalesce, upper 와 같은 간단한 함수들은 Querydsl 에서 메소드로 지원</li>\n<li>자신이 사용하고 싶은 함수가 Querydsl 에 없는 경우는 stringTemplate()을 이용하여 쿼리를 작성 가능</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"78913278449317050000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`ist<String> result = queryFactory\n\t\t.select(Expressions.stringTemplate(\n\t\t\t\t&quot;function('regexp_replace', {0}, {1}, {2})&quot;,\n\t\t\t\tuser.username, &quot;user&quot;, &quot;User_&quot;))\n\t\t.from(user)\n\t\t.fetch();`, `78913278449317050000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">ist&lt;String&gt; result = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t.</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk12\">Expressions</span><span class=\"mtk1\">.</span><span class=\"mtk11\">stringTemplate</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk8\">&quot;function(&#39;regexp_replace&#39;, {0}, {1}, {2})&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t\t\t</span><span class=\"mtk12\">user</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;user&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;User_&quot;</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t.</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(user)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\t\t.</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<h2 id=\"수정-삭제-벌크-연산\" style=\"position:relative;\"><a href=\"#%EC%88%98%EC%A0%95-%EC%82%AD%EC%A0%9C-%EB%B2%8C%ED%81%AC-%EC%97%B0%EC%82%B0\" aria-label=\"수정 삭제 벌크 연산 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>수정, 삭제 벌크 연산</h2>\n<ul>\n<li>영속성 컨텍스트에 있는 엔티티를 무시하고 실행되기 때문에 배치 쿼리를 실행하고 나면 영속성 컨텍스트를 초기화 필요</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"91012981772130000000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`long count = queryFactory\n              .update(member)\n              .set(member.username, &quot;비회원&quot;)\n              .where(member.age,lt(28))\n              .execute();\nem.flush();\nem.clear();`, `91012981772130000000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">count</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk11\">update</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk11\">set</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;비회원&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">,</span><span class=\"mtk11\">lt</span><span class=\"mtk1\">(</span><span class=\"mtk7\">28</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              .</span><span class=\"mtk11\">execute</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">em</span><span class=\"mtk1\">.</span><span class=\"mtk11\">flush</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk12\">em</span><span class=\"mtk1\">.</span><span class=\"mtk11\">clear</span><span class=\"mtk1\">();</span></span></span></code></pre>\n<h2 id=\"datajpa와-함께-사용\" style=\"position:relative;\"><a href=\"#datajpa%EC%99%80-%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9\" aria-label=\"datajpa와 함께 사용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DataJPA와 함께 사용</h2>\n<p>DataJPA 같은 경우 <a href=\"http://localhost:8000/JPA_4/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">실전 스프링 데이터 JPA</a> 에 정리해놔서</p>\n<p>코드로만 정리한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"68838674703297720000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`// repository\npublic interface MemberRepository extends JpaRepository<Member, Long>, MemberRepositoryCustom {\n    List<Member> findByUsername(String username);\n}\n\n// Custom\npublic interface MemberRepositoryCustom {\n    List<MemberTeamDto> search(MemberSearchCondition condition);\n\n    Page<MemberTeamDto> searchPageSimple(MemberSearchCondition condition,\n                                         Pageable pageable);\n    Page<MemberTeamDto> searchPageComplex(MemberSearchCondition condition,\n                                          Pageable pageable);\n}\n\n// Impl\npublic class MemberRepositoryImpl implements MemberRepositoryCustom {\n\n    private final JPAQueryFactory queryFactory;\n\n    public MemberRepositoryImpl(EntityManager em) {\n        this.queryFactory = new JPAQueryFactory(em);\n    }\n\n    //회원명, 팀명, 나이(ageGoe, ageLoe)\n    @Override\n    public List<MemberTeamDto> search(MemberSearchCondition condition) {\n        return queryFactory\n                .select(new QMemberTeamDto(\n                        member.id,\n                        member.username,\n                        member.age,\n                        team.id,\n                        team.name))\n                .from(member)\n                .leftJoin(member.team, team)\n                .where(usernameEq(condition.getUsername()),\n                        teamNameEq(condition.getTeamName()),\n                        ageGoe(condition.getAgeGoe()),\n                        ageLoe(condition.getAgeLoe()))\n                .fetch();\n    }\n\n    private BooleanExpression usernameEq(String username) {\n        return isEmpty(username) ? null : member.username.eq(username);\n    }\n\n    private BooleanExpression teamNameEq(String teamName) {\n        return isEmpty(teamName) ? null : team.name.eq(teamName);\n    }\n\n    private BooleanExpression ageGoe(Integer ageGoe) {\n        return ageGoe == null ? null : member.age.goe(ageGoe);\n    }\n\n    private BooleanExpression ageLoe(Integer ageLoe) {\n        return ageLoe == null ? null : member.age.loe(ageLoe);\n    }\n\n    @Override\n    public Page<MemberTeamDto> searchPageSimple(MemberSearchCondition condition,\n                                                Pageable pageable) {\n        QueryResults<MemberTeamDto> results = queryFactory\n                .select(new QMemberTeamDto(\n                        member.id,\n                        member.username,\n                        member.age,\n                        team.id,\n                        team.name))\n                .from(member)\n                .leftJoin(member.team, team)\n                .where(usernameEq(condition.getUsername()),\n                        teamNameEq(condition.getTeamName()),\n                        ageGoe(condition.getAgeGoe()),\n                        ageLoe(condition.getAgeLoe()))\n                .offset(pageable.getOffset())\n                .limit(pageable.getPageSize())\n                .fetchResults();\n        List<MemberTeamDto> content = results.getResults();\n        long total = results.getTotal();\n        return new PageImpl<>(content, pageable, total);\n    }\n\n    /*\n     * 데이터 조회 쿼리와, 전체 카운트 쿼리를 분리\n     */\n    @Override\n    public Page<MemberTeamDto> searchPageComplex(MemberSearchCondition condition,\n                                                 Pageable pageable) {\n        List<MemberTeamDto> content = queryFactory\n                .select(new QMemberTeamDto(\n                        member.id,\n                        member.username,\n                        member.age,\n                        team.id,\n                        team.name))\n                .from(member)\n                .leftJoin(member.team, team)\n                .where(usernameEq(condition.getUsername()),\n                        teamNameEq(condition.getTeamName()),\n                        ageGoe(condition.getAgeGoe()),\n                        ageLoe(condition.getAgeLoe()))\n                .offset(pageable.getOffset())\n                .limit(pageable.getPageSize())\n                .fetch();\n\n//        long total = queryFactory\n//                .select(member)\n//                .from(member)\n//                .leftJoin(member.team, team)\n//                .where(usernameEq(condition.getUsername()),\n//                        teamNameEq(condition.getTeamName()),\n//                        ageGoe(condition.getAgeGoe()),\n//                        ageLoe(condition.getAgeLoe()))\n//                .fetchCount();\n\n//        return new PageImpl<>(content, pageable, total);\n\n        JPAQuery<Member> countQuery = queryFactory\n                .select(member)\n                .from(member)\n                .leftJoin(member.team, team)\n                .where(usernameEq(condition.getUsername()),\n                        teamNameEq(condition.getTeamName()),\n                        ageGoe(condition.getAgeGoe()),\n                        ageLoe(condition.getAgeLoe()));\n        return PageableExecutionUtils.getPage(content, pageable,\n                countQuery::fetchCount);\n    }\n}\n\n`, `68838674703297720000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"java\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// repository</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MemberRepository</span><span class=\"mtk1\"> </span><span class=\"mtk4\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JpaRepository</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">, </span><span class=\"mtk10\">Long</span><span class=\"mtk1\">&gt;, </span><span class=\"mtk10\">MemberRepositoryCustom</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">findByUsername</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> </span><span class=\"mtk12\">username</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Custom</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">interface</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MemberRepositoryCustom</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">search</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Page</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">searchPageSimple</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                         </span><span class=\"mtk10\">Pageable</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk10\">Page</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">searchPageComplex</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                          </span><span class=\"mtk10\">Pageable</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Impl</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk4\">class</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MemberRepositoryImpl</span><span class=\"mtk1\"> </span><span class=\"mtk4\">implements</span><span class=\"mtk1\"> </span><span class=\"mtk10\">MemberRepositoryCustom</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk4\">final</span><span class=\"mtk1\"> </span><span class=\"mtk10\">JPAQueryFactory</span><span class=\"mtk1\"> </span><span class=\"mtk12\">queryFactory</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk11\">MemberRepositoryImpl</span><span class=\"mtk1\">(</span><span class=\"mtk10\">EntityManager</span><span class=\"mtk1\"> </span><span class=\"mtk12\">em</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">this</span><span class=\"mtk1\">.</span><span class=\"mtk12\">queryFactory</span><span class=\"mtk1\"> = </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">JPAQueryFactory</span><span class=\"mtk1\">(em);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">//회원명, 팀명, 나이(ageGoe, ageLoe)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">Override</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">search</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMemberTeamDto</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">leftJoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">team</span><span class=\"mtk1\">, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getUsername</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">teamNameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getTeamName</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageGoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeGoe</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageLoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeLoe</span><span class=\"mtk1\">()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> </span><span class=\"mtk12\">username</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isEmpty</span><span class=\"mtk1\">(username) </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(username);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">teamNameEq</span><span class=\"mtk1\">(</span><span class=\"mtk10\">String</span><span class=\"mtk1\"> </span><span class=\"mtk12\">teamName</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk11\">isEmpty</span><span class=\"mtk1\">(teamName) </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">.</span><span class=\"mtk11\">eq</span><span class=\"mtk1\">(teamName);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ageGoe</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Integer</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ageGoe</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> ageGoe == </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">goe</span><span class=\"mtk1\">(ageGoe);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">private</span><span class=\"mtk1\"> </span><span class=\"mtk10\">BooleanExpression</span><span class=\"mtk1\"> </span><span class=\"mtk11\">ageLoe</span><span class=\"mtk1\">(</span><span class=\"mtk10\">Integer</span><span class=\"mtk1\"> </span><span class=\"mtk12\">ageLoe</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> ageLoe == </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">?</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\"> </span><span class=\"mtk15\">:</span><span class=\"mtk1\"> </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">.</span><span class=\"mtk11\">loe</span><span class=\"mtk1\">(ageLoe);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">Override</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Page</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">searchPageSimple</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                                </span><span class=\"mtk10\">Pageable</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">QueryResults</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">results</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMemberTeamDto</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">leftJoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">team</span><span class=\"mtk1\">, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getUsername</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">teamNameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getTeamName</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageGoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeGoe</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageLoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeLoe</span><span class=\"mtk1\">()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">offset</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getOffset</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">limit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPageSize</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">fetchResults</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">content</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">results</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getResults</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">long</span><span class=\"mtk1\"> </span><span class=\"mtk12\">total</span><span class=\"mtk1\"> = </span><span class=\"mtk12\">results</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getTotal</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk10\">PageImpl</span><span class=\"mtk1\">&lt;&gt;(content, pageable, total);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">/*</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     * 데이터 조회 쿼리와, 전체 카운트 쿼리를 분리</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">     */</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    @</span><span class=\"mtk10\">Override</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">public</span><span class=\"mtk1\"> </span><span class=\"mtk10\">Page</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk11\">searchPageComplex</span><span class=\"mtk1\">(</span><span class=\"mtk10\">MemberSearchCondition</span><span class=\"mtk1\"> </span><span class=\"mtk12\">condition</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                                                 </span><span class=\"mtk10\">Pageable</span><span class=\"mtk1\"> </span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">List</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">MemberTeamDto</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">content</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(</span><span class=\"mtk15\">new</span><span class=\"mtk1\"> </span><span class=\"mtk11\">QMemberTeamDto</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">username</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">age</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk12\">team</span><span class=\"mtk1\">.</span><span class=\"mtk12\">name</span><span class=\"mtk1\">))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">leftJoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">team</span><span class=\"mtk1\">, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getUsername</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">teamNameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getTeamName</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageGoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeGoe</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageLoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeLoe</span><span class=\"mtk1\">()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">offset</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getOffset</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">limit</span><span class=\"mtk1\">(</span><span class=\"mtk12\">pageable</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPageSize</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">fetch</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//        long total = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                .select(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                .from(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                .leftJoin(member.team, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                .where(usernameEq(condition.getUsername()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                        teamNameEq(condition.getTeamName()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                        ageGoe(condition.getAgeGoe()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                        ageLoe(condition.getAgeLoe()))</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//                .fetchCount();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">//        return new PageImpl&lt;&gt;(content, pageable, total);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">JPAQuery</span><span class=\"mtk1\">&lt;</span><span class=\"mtk10\">Member</span><span class=\"mtk1\">&gt; </span><span class=\"mtk12\">countQuery</span><span class=\"mtk1\"> = queryFactory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">select</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">from</span><span class=\"mtk1\">(member)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">leftJoin</span><span class=\"mtk1\">(</span><span class=\"mtk12\">member</span><span class=\"mtk1\">.</span><span class=\"mtk12\">team</span><span class=\"mtk1\">, team)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                .</span><span class=\"mtk11\">where</span><span class=\"mtk1\">(</span><span class=\"mtk11\">usernameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getUsername</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">teamNameEq</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getTeamName</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageGoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeGoe</span><span class=\"mtk1\">()),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                        </span><span class=\"mtk11\">ageLoe</span><span class=\"mtk1\">(</span><span class=\"mtk12\">condition</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getAgeLoe</span><span class=\"mtk1\">()));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk15\">return</span><span class=\"mtk1\"> </span><span class=\"mtk12\">PageableExecutionUtils</span><span class=\"mtk1\">.</span><span class=\"mtk11\">getPage</span><span class=\"mtk1\">(content, pageable,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                countQuery</span><span class=\"mtk15\">::</span><span class=\"mtk1\">fetchCount);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<ul>\n<li><a href=\"https://www.inflearn.com/course/Querydsl-%EC%8B%A4%EC%A0%84/dashboard\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">실전! Querydsl</a></li>\n</ul>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk10 { color: #4EC9B0; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk11 { color: #DCDCAA; }\n  .default-dark .mtk15 { color: #C586C0; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#querydsl-%EC%9D%B4%EB%9E%80\">QueryDSL 이란?</a></p>\n<ul>\n<li><a href=\"#jpql-vs-querydsl\">JPQL vs Querydsl</a></li>\n<li><a href=\"#buildgradle\">build.gradle</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#querydsl-%ED%99%9C%EC%9A%A9\">QueryDSL 활용</a></p>\n<ul>\n<li><a href=\"#querydsl-bean-%EB%93%B1%EB%A1%9D\">QueryDSL Bean 등록</a></li>\n<li><a href=\"#%EB%8F%99%EC%8B%9C%EC%84%B1-%EB%AC%B8%EC%A0%9C\">동시성 문제</a></li>\n<li><a href=\"#qclass-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EC%82%AC%EC%9A%A9-%EB%B0%A9%EB%B2%95\">Qclass 인스턴스 사용 방법</a></li>\n<li><a href=\"#%EA%B2%80%EC%83%89-%EC%A1%B0%EA%B1%B4-%EC%B6%94%EA%B0%80\">검색 조건 추가</a></li>\n<li><a href=\"#%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C\">결과 조회</a></li>\n<li><a href=\"#%EC%A0%95%EB%A0%AC\">정렬</a></li>\n<li><a href=\"#%EC%A7%91%ED%95%A9\">집합</a></li>\n<li><a href=\"#%EC%A1%B0%EC%9D%B8\">조인</a></li>\n<li><a href=\"#%EC%84%9C%EB%B8%8C-%EC%BF%BC%EB%A6%AC\">서브 쿼리</a></li>\n<li><a href=\"#%ED%94%84%EB%A1%9C%EC%A0%9D%EC%85%98\">프로젝션</a></li>\n<li><a href=\"#%EB%8F%99%EC%A0%81-%EC%BF%BC%EB%A6%AC\">동적 쿼리</a></li>\n<li><a href=\"#sql-%ED%95%A8%EC%88%98-%EC%82%AC%EC%9A%A9\">SQL 함수 사용</a></li>\n<li><a href=\"#%EC%88%98%EC%A0%95-%EC%82%AD%EC%A0%9C-%EB%B2%8C%ED%81%AC-%EC%97%B0%EC%82%B0\">수정, 삭제 벌크 연산</a></li>\n<li><a href=\"#datajpa%EC%99%80-%ED%95%A8%EA%BB%98-%EC%82%AC%EC%9A%A9\">DataJPA와 함께 사용</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"Querydsl","summary":["Querydsl을 통해 생성되는 정적 Q-type 클래스를 이용해 쿼리를 생성하도록 도와주는 프레임 워크"],"date":"2022.10.17.","category":["JPA"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4ElEQVR42u1Tz0tUURS+zwopbNOiJChwlczC3j3fOXceQb+gNiGCyEBiPyhhtNQps2EaQV6L0EJCEckEoRYiJBkVJcwgSVBuokVuXNVK6G9o441rM/FodGyoTdAHj/vuPed953vfOVep/1BKVUUer/ieSCS2FeJeJP5X4EVWr2xSEAQ7iWgMwDMiSjNzEzPPAJgDcMXlxWKxGgCTADp/KVBKCGAXM18XkRVjzAcRGTTGrAEYMsZYrXWLKxIEgWXmVa31/nKkqugTEd0D8AnAbQDfRDDqCAG0AlgA8BbAVyLKRr8rUWiMqSOih8y8IiL5eFwGjInbhgZ/mg5Ts4g0Fog/OkIR+ews2Ejl+oaZDwB4QkR5EfF93z919Eh80tq1ahfXWl9i5ruF3EMAHgOoj0zH5rD2R5FM2Pcg97Tf5ucyb8Lw+Paynm3UHOcHkNzhNm0dXScu9KTtxHjmy9Kr7OL0VOaYOw/DMDqjW8Nau67gfDJ18GxHavl0oruu+Vzn3tZk13x7e++eSlWqiAo1ej995v3r7MjwcF/u4rVb9nJP78nNOvtbHj6fSu9+Nz+wvJS7Y6/eSC0qVbmPJd1/MZPdt/Cyn2Yf3az9E7KfpEW1W93fCn7fejYMq4rN+rfxHRanmNLe6eVDAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/5ce94/thumbnail.png","srcSet":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/a7be2/thumbnail.png 64w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/bb95d/thumbnail.png 128w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/5ce94/thumbnail.png 256w","sizes":"(min-width: 256px) 256px, 100vw"},"sources":[{"srcSet":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/bfa43/thumbnail.webp 64w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/b529c/thumbnail.webp 128w,\n/static/8d5284f24ad35b18e7b0d34d7fb95da2/99d55/thumbnail.webp 256w","type":"image/webp","sizes":"(min-width: 256px) 256px, 100vw"}]},"width":256,"height":256}},"publicURL":"/static/8d5284f24ad35b18e7b0d34d7fb95da2/thumbnail.png"}}}}]}},"pageContext":{"slug":"/JPA_5/","series":[{"slug":"/JPA_1/","title":"자바 ORM 표준 JPA 프로그래밍 (기본편)","num":1},{"slug":"/JPA_2/","title":"실전! 스프링 부트와 JPA 활용1 - 웹 애플리케이션 개발","num":2},{"slug":"/JPA_3/","title":"실전! 스프링 부트와 JPA 활용2 - API 개발과 성능 최적화","num":3},{"slug":"/JPA_4/","title":"실전 스프링 데이터 JPA","num":4},{"slug":"/JPA_5/","title":"Querydsl","num":5}],"lastmod":"2023.02.22."}},"staticQueryHashes":["2383754777"],"slicesMap":{}}