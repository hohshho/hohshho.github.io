{"componentChunkName":"component---src-templates-post-tsx","path":"/elkAnalyzer/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"52f404ee-b17d-5541-bc20-2e8432be8b09","html":"<h1 id=\"1-분석기analyzer\" style=\"position:relative;\"><a href=\"#1-%EB%B6%84%EC%84%9D%EA%B8%B0analyzer\" aria-label=\"1 분석기analyzer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 분석기(analyzer)</h1>\n<p>분석기는 **색인 시점(Index Time)**과 <strong>검색 시점(Search Time)</strong> 모두에서 작동하는 핵심 컴포넌트. 단순한 데이터 전처리를 넘어서 검색 품질과 성능을 결정하는 중요한 아키텍처 요소</p>\n<p>색인 시점의 분석기는 단순히 텍스트를 나누는 도구가 아니라, 검색 품질을 결정짓는 정교한 ‘데이터 전처리 파이프라인’</p>\n<p>이 파이프라인은 반드시 다음 순서로 실행된다.</p>\n<ol>\n<li>Character Filter : HTML태그나 불필요한 기호를 제거/변경 (옵션)</li>\n<li>Tokenizer : 텍스트를 실질적인 토큰 단위로 잘라낸다. (반드시 포함)</li>\n<li>Token Filter : 잘라진 토큰들을 소문자로 바꾸거나, 동의어를 추가하거나, 불필요한 단어를 버린다. (옵션)</li>\n</ol>\n<p>이 3단계를 거쳐 최종 생성된 토큰들이 역인덱스에 저장되어 검색에 사용된다.</p>\n<h1 id=\"2-character-filter\" style=\"position:relative;\"><a href=\"#2-character-filter\" aria-label=\"2 character filter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Character Filter</h1>\n<p>필터는 토크나이저에 전달되기 전에 문자 스트림을 사전 처리하는데 사용된다.</p>\n<h2 id=\"21-html-스트립-문자-필터\" style=\"position:relative;\"><a href=\"#21-html-%EC%8A%A4%ED%8A%B8%EB%A6%BD-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\" aria-label=\"21 html 스트립 문자 필터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1 HTML 스트립 문자 필터</h2>\n<p>HTML요소를 제거하고 HTML 엔티티를 디코딩된 값으로 바꾼다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"5123851154491699000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`PUT /my-index-000001\r\n{\r\n  &quot;settings&quot;: {\r\n    &quot;analysis&quot;: {\r\n      &quot;analyzer&quot;: {\r\n        &quot;my_analyzer&quot;: {\r\n          &quot;tokenizer&quot;: &quot;keyword&quot;,\r\n          &quot;char_filter&quot;: [\r\n            &quot;html_strip&quot;\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`, `5123851154491699000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">PUT /my-index</span><span class=\"mtk7\">-000001</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;settings&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;analysis&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;my_analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&quot;html_strip&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>analyzer에 <a href=\"https://www.elastic.co/docs/reference/text-analysis/analysis-htmlstrip-charfilter#analysis-htmlstrip-charfilter-analyzer-ex\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">char_filter</a>를 추가한다.</p>\n<p>escaped_tags 파라미터로 특정 태그를 보존할 수 있으며, 프로덕션에서는 XSS 방지를 위해 신중하게 사용한다.</p>\n<h2 id=\"22-매핑-문자-필터\" style=\"position:relative;\"><a href=\"#22-%EB%A7%A4%ED%95%91-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\" aria-label=\"22 매핑 문자 필터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2 매핑 문자 필터</h2>\n<p>키와 값이 있는데 키와 동일한 문자열을 발견하면 해당 키와 연관된 값으로 대체한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"74723609183910220000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`PUT /my-index-000001\r\n{\r\n  &quot;settings&quot;: {\r\n    &quot;analysis&quot;: {\r\n      &quot;analyzer&quot;: {\r\n        &quot;my_analyzer&quot;: {\r\n          &quot;tokenizer&quot;: &quot;standard&quot;,\r\n          &quot;char_filter&quot;: [\r\n            &quot;my_mappings_char_filter&quot;\r\n          ]\r\n        }\r\n      },\r\n      &quot;char_filter&quot;: {\r\n        &quot;my_mappings_char_filter&quot;: {\r\n          &quot;type&quot;: &quot;mapping&quot;,\r\n          &quot;mappings&quot;: [\r\n            &quot;:) => _happy_&quot;,\r\n            &quot;:( => _sad_&quot;\r\n          ]\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`, `74723609183910220000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">PUT /my-index</span><span class=\"mtk7\">-000001</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;settings&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;analysis&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;my_analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;standard&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&quot;my_mappings_char_filter&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;my_mappings_char_filter&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;mapping&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;mappings&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&quot;:) =&gt; _happy_&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&quot;:( =&gt; _sad_&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>mapping 문자 필터를 선언하고 analyzer에 char_filter로 등록한다.</p>\n<h2 id=\"23-패턴-문자-필터\" style=\"position:relative;\"><a href=\"#23-%ED%8C%A8%ED%84%B4-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\" aria-label=\"23 패턴 문자 필터 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3 패턴 문자 필터</h2>\n<p>정규표현식을 사용해 지정된 대체 문자열로 대체한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"78744786780110010000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`PUT my-index-000001\r\n{\r\n  &quot;settings&quot;: {\r\n    &quot;analysis&quot;: {\r\n      &quot;analyzer&quot;: {\r\n        &quot;my_analyzer&quot;: {\r\n          &quot;tokenizer&quot;: &quot;standard&quot;,\r\n          &quot;char_filter&quot;: [\r\n            &quot;my_char_filter&quot;\r\n          ]\r\n        }\r\n      },\r\n      &quot;char_filter&quot;: {\r\n        &quot;my_char_filter&quot;: {\r\n          &quot;type&quot;: &quot;pattern_replace&quot;,\r\n          &quot;pattern&quot;: &quot;(\\\\d+)-(?=\\\\d)&quot;,\r\n          &quot;replacement&quot;: &quot;\\$1_&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`, `78744786780110010000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">PUT my-index</span><span class=\"mtk7\">-000001</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;settings&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;analysis&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;my_analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;standard&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk8\">&quot;my_char_filter&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;my_char_filter&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;pattern_replace&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;pattern&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;(</span><span class=\"mtk6\">\\\\</span><span class=\"mtk8\">d+)-(?=</span><span class=\"mtk6\">\\\\</span><span class=\"mtk8\">d)&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;replacement&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;$1_&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"3-tokenizer\" style=\"position:relative;\"><a href=\"#3-tokenizer\" aria-label=\"3 tokenizer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Tokenizer</h1>\n<p>Character-Filtering을 통해 정제된 원문(문자열)에서 Token을 추출하는 과정</p>\n<ul>\n<li>Standard Tokenizer: 대부분의 언어에서 준수하게 동작하는 기본 토크나이저. 문법을 기반으로 단어를 분리하고 구두점 등을 제거</li>\n<li>Whitespace Tokenizer: 오직 공백(스페이스, 탭, 개행)만을 기준으로 텍스트를 분리 -> 가장 단순하지만, 구두점이 토큰에 포함될 수 있다.</li>\n<li>Letter Tokenizer: 문자가 아닌 것(공백, 숫자, 기호)을 기준으로 분리</li>\n<li>UAX URL Email Tokenizer: URL이나 이메일 주소를 하나의 토큰으로 인식하도록 특화</li>\n<li>Nori Tokenizer: 한글 형태소 분석을 위한 토크나이저 (후술)</li>\n</ul>\n<h1 id=\"4-token-filter\" style=\"position:relative;\"><a href=\"#4-token-filter\" aria-label=\"4 token filter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Token Filter</h1>\n<p>토큰 단위의 처리이고, 빠른 검색을 위해 검색에 사용될 텀 들을 미리 분리해서 역 인덱스에 저장한다.</p>\n<h2 id=\"41-ngram\" style=\"position:relative;\"><a href=\"#41-ngram\" aria-label=\"41 ngram permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1 NGram</h2>\n<p>house를 min_gram : 2, max_gram : 3 으로 설정하면 다음과 같이 분석되어 총 7개의 토큰을 저장한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 295px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7bcebf84ca4ae728e933e550bf66ad42/60cc9/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTElEQVR42pWVWYvqQBCF8///zQz4IOKC+uCGuEbFFfe477vW3K+gJV7jwDRk0olVp06dOp2xHo+HmGX27nd/XRZ/4vG4VCoVfZFOp2W328lsNpNarabvOp2OzOdzuVwuks1mn0Xv9/vL/Qlo27YmX69XiUQimjwcDiWRSGgQxcbjsZxOJ4lGo78zXK/X0m63ZbFYyHQ6fd5J9lqGSb/fl1KpJI7jSLVa1a4UcL/fKwNAD4eDZDIZ6fV62p5bU7OnPQNYLBaVgN/vV1kUEDaDwUBWq5V0u1290+5kMpHtdqsJXouCkOGCyO1202LKEKEbjYa2mUqltA1YlstlOZ/PGvx/y/l8XplB4uv7S/fkWLCAJVMdjUa6B9Bcy+XS00YUYYgsiqIhhCyC+YEWSK7X69ouYOhEB0Y3N8Nms6mOQBLcQM7TNmZhF4QGCJGxE0WoDjBFzaKzzWaj+gFO3BsgAyGRO3aiBRIJ5pm9WciTy+U0Hh3RD/AXQBJjsZgGMKRkMqn6wBRbkWwWXfAe7YmjbYq+AMKAJPSgfSqiJa3xTII7FjCWsc1by0ZwWBkNeQdbvEmiiWm1WnoMAfX5fCrTR0AYYXZAnImjjNEMtoCSfDwenx51F/IEJJiPAReWAhh7cGF2hmXbZQkEAgoeDAYlFAq9D8UNiBUKhYIOivaYonsQsKMYsRRkkDxbXucUI+M5AmAAM4ABgjW+5HPHMeV3vGtOjfXpu2a+MLTH6VE9/2mIPYwTsBJah8NhZfwroFm0xJCwCbaBHftP/yZ+ALVS9Ux4kp87AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/7bcebf84ca4ae728e933e550bf66ad42/a81b5/1.webp 163w,\n/static/7bcebf84ca4ae728e933e550bf66ad42/66888/1.webp 295w\"\n              sizes=\"(max-width: 295px) 100vw, 295px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/7bcebf84ca4ae728e933e550bf66ad42/5e043/1.png 163w,\n/static/7bcebf84ca4ae728e933e550bf66ad42/60cc9/1.png 295w\"\n            sizes=\"(max-width: 295px) 100vw, 295px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/7bcebf84ca4ae728e933e550bf66ad42/60cc9/1.png\"\n            alt=\"1\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>찾아보니 검색 결과를 예상하기 어렵기 때문에 일반적인 텍스트 검색에는 사용하지 않는 것이 좋다.</p>\n<p>ngram을 사용하기에 적합한 사례는 카테고리 목록이나 태그 목록과 같이 전체 개수가 많지 않은 데이터 집단에 부분 일치나 오타 보정 검색에 적합</p>\n<h2 id=\"42-edge-ngram\" style=\"position:relative;\"><a href=\"#42-edge-ngram\" aria-label=\"42 edge ngram permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2 Edge NGram</h2>\n<p>텀 앞쪽의 ngram 만 저장</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 325px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6226c207afa12866ba7d4705efae2a00/e5cc6/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABcElEQVR42nWT56oCMRCF9/0fxVewYUHwjyiCYAd727U3LHPvdyBhXe8diNmdJGe+OVkD+43r9Wr9fp9H2+12er/f73Y8HpU7HA5+Zo14vV72fr814hHws9/vLZVKKVEoFGw4HNpkMrFisahcPp/XXCqVtEYkhbzg8/m0zWZjURhJmMou/jt0u91suVzadrv1xB+C6/XaWq2WWuLdiTnB5IxQpVIR7Xw+/1gLHo+HklAuFgt5GPfqr6CL8/lsl8tFtPGuAl4grNfrEmm32zYej3UpyXAUtJtOp20wGFgul7MwDP26CGezmQghXa1WGhSB9HQ6fQljC3nooHQ2eQ8RaDQaIux0OhKm/W63q9aShOzPZrMi5EuoVqu+sPeQTYgwaAlqBs+IchFxQnIQ0kX8MkXIoWazKfxerydRWh6NRqoMCZY489mfyWT0ZyiXy1ar1XQeOF0KpiISRZFNp1NPiyA5PnJnvGsdQiyiMAVYR+sHCINIOawnS2IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/6226c207afa12866ba7d4705efae2a00/a81b5/2.webp 163w,\n/static/6226c207afa12866ba7d4705efae2a00/da3ef/2.webp 325w\"\n              sizes=\"(max-width: 325px) 100vw, 325px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/6226c207afa12866ba7d4705efae2a00/5e043/2.png 163w,\n/static/6226c207afa12866ba7d4705efae2a00/e5cc6/2.png 325w\"\n            sizes=\"(max-width: 325px) 100vw, 325px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/6226c207afa12866ba7d4705efae2a00/e5cc6/2.png\"\n            alt=\"2\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>입력과 동시에 검색어 추천 기능을 구현하는데 최적화</p>\n<h2 id=\"43-shingle\" style=\"position:relative;\"><a href=\"#43-shingle\" aria-label=\"43 shingle permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3 shingle</h2>\n<p>문자가 아니라 단어 단위로 구성된 묶음을 Shingle 이라고 하며 “type”: “shingle” 토큰 필터의 이용이 가능</p>\n<p>주로 구(phrase) 검색의 정확도를 높일 때 사용</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0696caf44c47a24481a058b072344e48/dc057/3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.22085889570552%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA40lEQVR42mWR6YqEQAyEff83U/wrKKJ44YGOx4i3Y4Yv4O7iBkKFdFd1JW3Yti3v91uu65Isy+Tz+ci+7+I4jhzHIWVZimmaepamqdZ5ngsB5xmGZVlKmudZCeM4yrqu0ve9Ci7LIq/XS5E+NThNk8RxrOLDMPwK4g4RsigKRcR4hBrRv25u5A4GkiTR+j4z7mLbNhXACRdc19VV1HUtYRhKVVVynuePE1whSD+KIkV1+NwB4og2TaOjQWLPkHDNmG3b6uj0giAQ3/fF8zzl/BN8Rtd1OhZI8jkI8hguccZE9MgvyRfJh3UKHmQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/0696caf44c47a24481a058b072344e48/a81b5/3.webp 163w,\n/static/0696caf44c47a24481a058b072344e48/da3ef/3.webp 325w,\n/static/0696caf44c47a24481a058b072344e48/309d5/3.webp 650w,\n/static/0696caf44c47a24481a058b072344e48/e0546/3.webp 678w\"\n              sizes=\"(max-width: 650px) 100vw, 650px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/0696caf44c47a24481a058b072344e48/5e043/3.png 163w,\n/static/0696caf44c47a24481a058b072344e48/e5cc6/3.png 325w,\n/static/0696caf44c47a24481a058b072344e48/663f3/3.png 650w,\n/static/0696caf44c47a24481a058b072344e48/dc057/3.png 678w\"\n            sizes=\"(max-width: 650px) 100vw, 650px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/0696caf44c47a24481a058b072344e48/663f3/3.png\"\n            alt=\"3\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<h4 id=\"tip\" style=\"position:relative;\"><a href=\"#tip\" aria-label=\"tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tip!!</h4>\n<p>N-gram Tokenizer와  N-gram Token Filter와 헷갈릴 수 있는데 둘다 텍스트를 작은 단위로 나누는 역할을 하지만 언제, 무엇을 대상으로 작동하는지에서 결정적인 차이가 있다.</p>\n<p>N-gram Tokenizer는 텍스트 전체를 하나의 긴 문자열로 보고, 지정된 크기의 n-gram으로 직접 잘라 토큰을 생성한다. 공백이나 구두점도 문자열의 일부로 취급한다.</p>\n<p>장점은 단어의 경계를 무시하므로 중간 검색어나 오타에 강하다. -> 자동완성 기능 구현이나 단어 경계를 넘는 부분 검색, 하이픈이 중요한 데이터 검색에 에 매우 유용</p>\n<p>단점은 공백이나 특수 문자를 포함한 의미 없는 토큰이 많이 생성될 수 있다.</p>\n<p>N-gram Token Filter는 분리된 토큰에 대해 n-gram을 생성한다.</p>\n<p>장점으로는 단어 내 부분 일치 검색 구현이 가능해지고, 의미 없는 공백이나 구두점 관련 n-gram이 생성되지 않아 더 깔끔하다.</p>\n<p>단점으로는 단어 경계를 넘나드는 검색은 불가능하다. ex) ‘ch en’ -> ‘search engine’ x</p>\n<p>사용하는 부분을 정리하면</p>\n<ul>\n<li>지번/도로명 주소, 상품 코드 검색: N-gram Tokenizer (또는 Edge N-gram Tokenizer)가 더 적합 (’-’ 문자가 의미가 있기 때문에)</li>\n<li>업소명 검색: Standard Tokenizer + N-gram Token Filter 조합. 의미 단위로 단어를 나누고(스타벅스, 강남역점), 각 단어 내에서 부분 검색(스타, 강남)을 허용하는 것이 가장 효율적</li>\n</ul>\n<h1 id=\"5-한국어-분석기-nori\" style=\"position:relative;\"><a href=\"#5-%ED%95%9C%EA%B5%AD%EC%96%B4-%EB%B6%84%EC%84%9D%EA%B8%B0-nori\" aria-label=\"5 한국어 분석기 nori permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 한국어 분석기 (Nori)</h1>\n<ul>\n<li>nori는 Elasticsearch가 공식 지원하는 한글 형태소 분석기</li>\n<li>내부 사전을 참조하여 문장을 의미 단위(형태소)로 분해하고 품사를 태깅</li>\n<li>nori_part_of_speech 토큰 필터와 함께 사용하면 조사(‘은/는/이/가’), 어미 등 검색에 불필요한 품사를 제거하여 색인 효율과 검색 정확도를 크게 향상</li>\n<li>토크나이저 : nori_tokenizer</li>\n<li>토큰필터 : nori_part_of_speech(불필요한 품사 태그를 지정하여 삭제), nori_readingform(한자를 한글로 변환하는 필터</li>\n</ul>\n<p>), nori_number(한글로 된 숫자를 숫자로 변환)</p>\n<h1 id=\"6-역인덱싱\" style=\"position:relative;\"><a href=\"#6-%EC%97%AD%EC%9D%B8%EB%8D%B1%EC%8B%B1\" aria-label=\"6 역인덱싱 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 역인덱싱</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 638px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c91a7c7b9cb17b163ef2c392f3a3112c/d376a/4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.54601226993866%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADjUlEQVR42p1U+2/aZhTl//9x0vYPTKvSSp3WdVXakpIlkEDAL2xsYxu/bbDN+/0IcHo/k2SJFmnVPumTwOBzzzn33lPo9/swTROO52Kz3eK1kyYpojhGrxtDEiVYpoX1aoXFYo4sTbHf75/+W0iSBK7rolq5QddxXwWcz+eYjMeYTqcEEGAyyXA8AJv1BrPZ7CWgaZiQZRmls3f49NPP2NHL7BwPh38B7/cHxLELzzPzz6+dgq5qEHgBPDFs3VZxeFbteDzmsu7v77FYLhF3u4iiCL7nw7ZtYjfN2Q+HQ+x2uxPgerHEdrXGer3ChOhnmY+s72AwCGD6McqyBbET4a+v17gVVOjxELwV4uJOxteqiJuWhWJDQVMzToBdqqppWm70iCqtVkvyakz+LKEYHdRUF4IR4PezDzj/UIRkReDoO2cGKEs67jQHip+hxkuk7h6FLEvhOA44jsOwP3iSyo5qOaiqHShej9gI+PPyFk0nhmgRoOGhqpD/ThcS3brYzO0qSJKMRoPD1dUVKpXKi45plksMbLQIsHQn4VuVhxZmZEEIru2CJ9B2PIDsMkD5BHj2tozP5yVoagvdbg9J6iJNLZq9Ti65rrv5C5cEeC1o0KM+Afmok1QGyApIxPqJod0J4Ls+0l6C5XxBHq6w2Wywp86qJklu2SQ5QfFWwJcbLm+KQJIbVIgV06Mhmm7vH8A07cEwDFidTj71zz3UbR+VpgnJpm6LKsrUZTXok38+Nct+ABzQ7yRZeABM0oRWz4BQr2M6nrwANJwgf1F2enjzsYFvNQ2dZISmTZ1us6ZYUIidSl1uSMqpy5pOc1YsofTrb2h8KaI/jNGNTSQ9G6LaxsfrBi7qKn55U8IflzxqxKrEafRMwfkNjyvJoGvijhiy7Sq8fVfF+ftP4IsXiDo2BcSGNmNLd4cpbYHjB/BoO4I4hBeGMGnfNZpZ2wtw8fdniIpCzzyEUXwCVGiPBUGgVXIQBMGLsXntsDDwKEw814GuqTQdKlya45T8Z+tXmNMfZpQio9EIY0qUR/+e7/PjfSw2GAxo/3kYbQMeMWZEDg9hUsD/OFvKTRYIglCm6LOxpOB4SpsfBWHsmIrFcgGWobqug+dqFLhinjgseVhe/ifgowVMptxsksw2rmlNRYq88WiMOIygtlpoU4EoCH8ckElkYTyfznLfJsMxZuMpFrM5+kmGkKZhtVjiOzeNxtCuHWQYAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c91a7c7b9cb17b163ef2c392f3a3112c/a81b5/4.webp 163w,\n/static/c91a7c7b9cb17b163ef2c392f3a3112c/da3ef/4.webp 325w,\n/static/c91a7c7b9cb17b163ef2c392f3a3112c/022fa/4.webp 638w\"\n              sizes=\"(max-width: 638px) 100vw, 638px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c91a7c7b9cb17b163ef2c392f3a3112c/5e043/4.png 163w,\n/static/c91a7c7b9cb17b163ef2c392f3a3112c/e5cc6/4.png 325w,\n/static/c91a7c7b9cb17b163ef2c392f3a3112c/d376a/4.png 638w\"\n            sizes=\"(max-width: 638px) 100vw, 638px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c91a7c7b9cb17b163ef2c392f3a3112c/d376a/4.png\"\n            alt=\"4\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>역인덱스는 용어(Term) → 문서 ID 리스트 매핑 구조로, 각 용어마다 다음 정보를 포함한다.</p>\n<ul>\n<li>문서 빈도(Document Frequency): 용어가 나타나는 문서 수</li>\n<li>용어 빈도(Term Frequency): 각 문서 내 용어 출현 횟수</li>\n<li>위치 정보(Positions): 구문 검색을 위한 토큰 위치</li>\n<li>오프셋 정보(Offsets): 하이라이팅을 위한 문자 위치</li>\n</ul>\n<h1 id=\"7-분석기-api\" style=\"position:relative;\"><a href=\"#7-%EB%B6%84%EC%84%9D%EA%B8%B0-api\" aria-label=\"7 분석기 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 분석기 API</h1>\n<ul>\n<li>POST _analyze</li>\n<li>필터와 토크나이저를 테스트하기 위해 API로 제공</li>\n<li>analyzer, field, character filter, tokenizer, filter 항목의 분석 결과를 볼 수 있음</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>파라미터</th>\n<th>deafult값</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>analyzer</td>\n<td></td>\n<td>인덱스 명을 지정하여 api호출 시 세팅에 정의된 분석기를 지정하여 분석 가능</td>\n</tr>\n<tr>\n<td>char_filter</td>\n<td></td>\n<td>tokenizer를 분석하기 전 문자를 전처리하여 나온 결과를 확인 가능</td>\n</tr>\n<tr>\n<td>explain</td>\n<td>false</td>\n<td>분석 결과의 과정 전체를 확인</td>\n</tr>\n<tr>\n<td>field</td>\n<td></td>\n<td>인덱스명에 매핑된 필드명에 지정된 분석기의 분석</td>\n</tr>\n<tr>\n<td>filter</td>\n<td></td>\n<td>filter로 지정된 분석기의 분석</td>\n</tr>\n<tr>\n<td>normalizer</td>\n<td></td>\n<td>필드 데이터 타입이 keyword인 항목의 테스트 변형을 위한 분석기로 변형된 결과 확인</td>\n</tr>\n<tr>\n<td>tokenizer</td>\n<td></td>\n<td>텍스트를 특정 규칙에 따라 토큰을 분할 한 결과 확인</td>\n</tr>\n</tbody>\n</table>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"17271141471082019000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`GET carmaster.analyzer/_analyze\r\n{\r\n  &quot;char_filter&quot;: [\r\n    &quot;html_strip&quot;\r\n    ],\r\n    &quot;tokenizer&quot;: &quot;whitespace&quot;,\r\n    &quot;filter&quot;: [\r\n      &quot;lowercase&quot;,\r\n       &quot;trim&quot;\r\n    ],\r\n    &quot;text&quot;: [&quot;<b>싼타페</b> TM 디젤 2.5 터보&quot;],\r\n    &quot;explain&quot;: true\r\n}`, `17271141471082019000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">GET carmaster.analyzer/_analyze</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;char_filter&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk8\">&quot;html_strip&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;whitespace&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;filter&quot;</span><span class=\"mtk1\">: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk8\">&quot;lowercase&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">       </span><span class=\"mtk8\">&quot;trim&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    ],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;text&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk8\">&quot;&lt;b&gt;싼타페&lt;/b&gt; TM 디젤 2.5 터보&quot;</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;explain&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<h1 id=\"8-설정\" style=\"position:relative;\"><a href=\"#8-%EC%84%A4%EC%A0%95\" aria-label=\"8 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. 설정</h1>\n<ol>\n<li>elastic search Dockerfile 수정 (설치)</li>\n</ol>\n<p>nori는 Elastic Search에 기본 포함된 기능이 아닌 플러그인이라 설치부터 해줘야 한다.</p>\n<p>Docker를 쓴다면 install 명령어를 한 줄 추가한다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"24491439530215440000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`ARG ELASTIC_VERSION\r\n\r\n# https://www.docker.elastic.co/\r\nFROM docker.elastic.co/elasticsearch/elasticsearch:\\${ELASTIC_VERSION:-8.17.2}\r\n\r\n# Add your elasticsearch plugins setup here\r\n# Example: RUN elasticsearch-plugin install analysis-icu\r\n\r\nRUN bin/elasticsearch-plugin install analysis-nori`, `24491439530215440000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"dockerfile\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">ARG</span><span class=\"mtk1\"> ELASTIC_VERSION</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># https://www.docker.elastic.co/</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">FROM</span><span class=\"mtk1\"> docker.elastic.co/elasticsearch/elasticsearch:${ELASTIC_VERSION:-8.17.2}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># Add your elasticsearch plugins setup here</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk3\"># Example: RUN elasticsearch-plugin install analysis-icu</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk4\">RUN</span><span class=\"mtk1\"> bin/elasticsearch-plugin install analysis-nori</span></span></span></code></pre>\n<ol start=\"2\">\n<li>template 업데이트 (분석기 커스텀 &#x26; 필드에 적용)</li>\n</ol>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"7553148354489480000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`{\r\n  &quot;index_patterns&quot;: [&quot;elk_local_data*&quot;],\r\n  &quot;template&quot;: {\r\n    &quot;settings&quot;: {\r\n      &quot;index.max_ngram_diff&quot;: 15, // ngram 이나 edge_ngram 사용 시 max_gram과 min_gram의 차이 허용치\r\n      &quot;analysis&quot;: {\r\n        &quot;tokenizer&quot;: {\r\n          &quot;address_ngram_tokenizer&quot;: { &quot;type&quot;: &quot;ngram&quot;, &quot;min_gram&quot;: 2, &quot;max_gram&quot;: 10, &quot;token_chars&quot;: [ &quot;letter&quot;, &quot;digit&quot; ] },\r\n          &quot;korean_nori_tokenizer&quot;: { &quot;type&quot;: &quot;nori_tokenizer&quot;, &quot;decompound_mode&quot;: &quot;mixed&quot; }\r\n        },\r\n        &quot;filter&quot;: {\r\n          &quot;business_name_ngram_filter&quot;: { &quot;type&quot;: &quot;ngram&quot;, &quot;min_gram&quot;: 2, &quot;max_gram&quot;: 7 },\r\n          &quot;nori_pos_filter&quot;: { &quot;type&quot;: &quot;nori_part_of_speech&quot;, &quot;stoptags&quot;: [ &quot;E&quot;, &quot;J&quot;, &quot;IC&quot;, &quot;MAJ&quot;, &quot;MM&quot;, &quot;SP&quot;, &quot;SSC&quot;, &quot;SSO&quot;, &quot;SC&quot;, &quot;SE&quot;, &quot;XPN&quot;, &quot;XSA&quot;, &quot;XSN&quot;, &quot;XSV&quot; ] }\r\n        },\r\n        &quot;analyzer&quot;: {\r\n          // 텍스트를 잘게 자른 후, lowercase 필터로 모두 소문자 처리하여 대소문자 구분 없이 검색되게 합니다.\r\n          &quot;address_analyzer&quot;: { &quot;tokenizer&quot;: &quot;address_ngram_tokenizer&quot;, &quot;filter&quot;: [ &quot;lowercase&quot; ] },\r\n          // 정확도 높은 한글 검색을 위한 표준 분석기입니다. nori로 의미 단위로 자르고, 불필요한 조사를 제거한 후, 소문자 처리합니다. 가장 기본적이고 중요한 분석기입니다.\r\n          &quot;korean_nori_analyzer&quot;: { &quot;tokenizer&quot;: &quot;korean_nori_tokenizer&quot;, &quot;filter&quot;: [ &quot;lowercase&quot;, &quot;nori_pos_filter&quot; ] },\r\n          // 오타 및 부분 검색까지 지원하는 상호명 분석기, 형태소 분석 토큰과 ngram 토큰을 모두 갖게 되어 검색 유연성이 극대화\r\n          &quot;business_name_analyzer&quot;: { &quot;tokenizer&quot;: &quot;korean_nori_tokenizer&quot;, &quot;filter&quot;: [ &quot;lowercase&quot;, &quot;nori_pos_filter&quot;, &quot;business_name_ngram_filter&quot; ] }\r\n        }\r\n      }\r\n    },\r\n    &quot;mappings&quot;: {\r\n      &quot;properties&quot;: {\r\n        &quot;id&quot;: { &quot;type&quot;: &quot;keyword&quot; },\r\n        &quot;type&quot;: { &quot;type&quot;: &quot;keyword&quot; },\r\n        &quot;type_name&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;fields&quot;: { &quot;keyword&quot;: { &quot;type&quot;: &quot;keyword&quot; } }\r\n        },\r\n        &quot;name&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;analyzer&quot;: &quot;korean_nori_analyzer&quot;,\r\n          &quot;fields&quot;: {\r\n            &quot;ngram&quot;: {\r\n              &quot;type&quot;: &quot;text&quot;,\r\n              &quot;analyzer&quot;: &quot;business_name_analyzer&quot;,\r\n              &quot;search_analyzer&quot;: &quot;korean_nori_analyzer&quot;\r\n            },\r\n            &quot;keyword&quot;: {\r\n              &quot;type&quot;: &quot;keyword&quot;,\r\n              &quot;ignore_above&quot;: 256\r\n            }\r\n          }\r\n        },\r\n        &quot;x&quot;: { &quot;type&quot;: &quot;float&quot; },\r\n        &quot;y&quot;: { &quot;type&quot;: &quot;float&quot; },\r\n        &quot;location&quot;: { &quot;type&quot;: &quot;geo_point&quot; },\r\n        &quot;table_name&quot;: { &quot;type&quot;: &quot;keyword&quot; },\r\n        &quot;geom&quot;: {\r\n          &quot;type&quot;: &quot;text&quot;,\r\n          &quot;index&quot;: false\r\n        }\r\n      }\r\n    }\r\n  }\r\n}`, `7553148354489480000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;index_patterns&quot;</span><span class=\"mtk1\">: [</span><span class=\"mtk8\">&quot;elk_local_data*&quot;</span><span class=\"mtk1\">],</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;template&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;settings&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;index.max_ngram_diff&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">15</span><span class=\"mtk1\">, </span><span class=\"mtk3\">// ngram 이나 edge_ngram 사용 시 max_gram과 min_gram의 차이 허용치</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;analysis&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;address_ngram_tokenizer&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;ngram&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;min_gram&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;max_gram&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">10</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;token_chars&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;letter&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;digit&quot;</span><span class=\"mtk1\"> ] },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;korean_nori_tokenizer&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;nori_tokenizer&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;decompound_mode&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;mixed&quot;</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"10\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"11\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;filter&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"12\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;business_name_ngram_filter&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;ngram&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;min_gram&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">2</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;max_gram&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">7</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"13\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;nori_pos_filter&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;nori_part_of_speech&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;stoptags&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;E&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;J&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;IC&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;MAJ&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;MM&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SP&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SSC&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SSO&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SC&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;SE&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;XPN&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;XSA&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;XSN&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;XSV&quot;</span><span class=\"mtk1\"> ] }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"14\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"15\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"16\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">// 텍스트를 잘게 자른 후, lowercase 필터로 모두 소문자 처리하여 대소문자 구분 없이 검색되게 합니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"17\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;address_analyzer&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;address_ngram_tokenizer&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;filter&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;lowercase&quot;</span><span class=\"mtk1\"> ] },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"18\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">// 정확도 높은 한글 검색을 위한 표준 분석기입니다. nori로 의미 단위로 자르고, 불필요한 조사를 제거한 후, 소문자 처리합니다. 가장 기본적이고 중요한 분석기입니다.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"19\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;korean_nori_analyzer&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;korean_nori_tokenizer&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;filter&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;lowercase&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;nori_pos_filter&quot;</span><span class=\"mtk1\"> ] },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"20\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk3\">// 오타 및 부분 검색까지 지원하는 상호명 분석기, 형태소 분석 토큰과 ngram 토큰을 모두 갖게 되어 검색 유연성이 극대화</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"21\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;business_name_analyzer&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;tokenizer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;korean_nori_tokenizer&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk12\">&quot;filter&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;lowercase&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;nori_pos_filter&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;business_name_ngram_filter&quot;</span><span class=\"mtk1\"> ] }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"22\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"23\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"24\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"25\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;mappings&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"26\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;properties&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"27\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;id&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"28\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"29\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;type_name&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"30\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"31\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;fields&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;keyword&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\"> } }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"32\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"33\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;name&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"34\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"35\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;korean_nori_analyzer&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"36\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;fields&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"37\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;ngram&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"38\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"39\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">&quot;analyzer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;business_name_analyzer&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"40\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">&quot;search_analyzer&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;korean_nori_analyzer&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"41\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"42\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk12\">&quot;keyword&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"43\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"44\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk12\">&quot;ignore_above&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk7\">256</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"45\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"46\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"47\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"48\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;x&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;float&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"49\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;y&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;float&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"50\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;location&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;geo_point&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"51\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;table_name&quot;</span><span class=\"mtk1\">: { </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;keyword&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"52\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk12\">&quot;geom&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"53\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"54\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk12\">&quot;index&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"55\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"56\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"57\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"58\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"59\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>크게 두 부분으로 나뉜다.</p>\n<ul>\n<li>settings : 인덱스 레벨의 설정 정의, 커스텀 분석기를 정의하는 analysis부분이 핵심\n<ul>\n<li>nori_pos_filter: nori가 분석한 토큰의 품사(Part-of-Speech)를 보고 불필요한 것을 제거하는 필터 ex - E(어미), J(조사)</li>\n<li>analyzer: 위에서 정의한 tokenizer와 filter 부품들을 조립하여 최종 ‘분석기 레시피’를 완성하는 곳</li>\n</ul>\n</li>\n<li>mappings : 각 필드의 데이터 타입과 해당 필드에 어떤 분석기를 적용할지를 정의하는 데이터 스키마에 해당\n<ul>\n<li>name: name 필드에 대한 매핑 정의입니다.\n<ul>\n<li>type: “text”: 전문(Full-text) 검색이 가능한 텍스트 필드로 지정</li>\n<li><strong>korean_nori_analyzer: 검색 시에는 이 분석기를 사용</strong>, “스타벅”이라고 검색하면, 검색어 자체를 ngram으로 쪼개지 않고 의미 있는 단위로만 분석</li>\n<li><strong>business_name_analyzer : 색인 시에는 이 분석기 사용</strong>, 형태소 분석 토큰과 ngram 토큰 모두 저장</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>다음과 같이 검색된다.</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"86410760172757240000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`GET /_search\r\n{\r\n  &quot;query&quot;: {\r\n    &quot;match&quot;: {\r\n      &quot;name&quot;: &quot;강남 스타벅스&quot;\r\n    }\r\n  }\r\n}`, `86410760172757240000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">GET /_search</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;query&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;match&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;name&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;강남 스타벅스&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<ul>\n<li>기본 name필드는 색인 시와 검색 시 모두 korean_nori_analyzer가 사용</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"29510010311566148000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`GET /_search\r\n{\r\n  &quot;query&quot;: {\r\n    &quot;match&quot;: {\r\n      &quot;name.ngram&quot;: &quot;강남 스타벅스&quot;\r\n    }\r\n  }\r\n}`, `29510010311566148000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">GET /_search</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;query&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;match&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;name.ngram&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;강남 스타벅스&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>name.ngram 이라는 서브 필드를 대상으로 검색 쿼리를 실행하면 색인은 business_name_analyzer이걸로 되는데 검색은 korean_nori_analyzer 분석</p>\n<p>두 분석기 장점 활용</p>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"7119277024171211000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"복사 되었습니다!\"\n              data-toaster-duration=\"3000\"\n              onClick=\"copyToClipboard(`GET /_search\r\n{\r\n  &quot;query&quot;: {\r\n    &quot;multi_match&quot;: {\r\n      &quot;query&quot;: &quot;강남 스타벅스&quot;,\r\n      &quot;fields&quot;: [ &quot;name&quot;, &quot;name.ngram&quot; ]\r\n    }\r\n  }\r\n}`, `7119277024171211000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                복사<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"json\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"1\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">GET /_search</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"2\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"3\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk12\">&quot;query&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"4\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk12\">&quot;multi_match&quot;</span><span class=\"mtk1\">: {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"5\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;query&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk8\">&quot;강남 스타벅스&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"6\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk12\">&quot;fields&quot;</span><span class=\"mtk1\">: [ </span><span class=\"mtk8\">&quot;name&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk8\">&quot;name.ngram&quot;</span><span class=\"mtk1\"> ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"7\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"8\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-gutter-pad\"></span><span class=\"grvsc-gutter grvsc-line-number\" aria-hidden=\"true\" data-content=\"9\"></span><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p>검색어 “강남 스타벅스”을 korean_nori_analyzer로 분석하여 [강남, 스벅] 토큰으로 name 필드를 검색<br>\n검색어 “강남 스타벅스”을 korean_nori_analyzer(search_analyzer)로 분석하여 [강남, 스벅] 토큰으로 name.ngram 필드를 검색</p>\n<p>-> Elasticsearch는 이 두 검색 결과를 합산하고, 더 높은 관련도 점수(_score)를 가진 문서를 상위에 노출</p>\n<h1 id=\"9-동의어-불용어-처리\" style=\"position:relative;\"><a href=\"#9-%EB%8F%99%EC%9D%98%EC%96%B4-%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%B2%98%EB%A6%AC\" aria-label=\"9 동의어 불용어 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 동의어, 불용어 처리</h1>\n<ul>\n<li>동의어 -> config 폴더 하위에 동의어 사전을 구성해서 적용</li>\n<li>불용어 -> config 폴더에 불용어 사전 파일 생성해 적용</li>\n</ul>\n<h1 id=\"reference\" style=\"position:relative;\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://www.elastic.co/docs/reference/text-analysis/character-filter-reference\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Character filter - Elastic Search Document</a><br>\n<a href=\"https://www.elastic.co/docs/reference/text-analysis/analysis-htmlstrip-charfilter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">HTML strip character filter - Elastic Search Document</a><br>\n<a href=\"https://www.elastic.co/docs/reference/text-analysis/analysis-mapping-charfilter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Mapping character filter - Elastic Search Document</a><br>\n<a href=\"https://www.elastic.co/docs/reference/text-analysis/analysis-pattern-replace-charfilter\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pattern replace character filter - Elastic Search Document</a><br>\n<a href=\"https://techblog.yogiyo.co.kr/%EA%B2%80%EC%83%89%EC%97%94%EC%A7%84%EC%9D%98-analyzer-%ED%98%95%ED%83%9C%EC%86%8C%EB%B6%84%EC%84%9D%EA%B8%B0-%ED%86%A0%ED%81%AC%EB%82%98%EC%9D%B4%EC%A0%80-5878af195d14\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">검색엔진의 Analyzer, 형태소분석기 ≠ 토크나이저 - 요기요</a><br>\n<a href=\"https://jaimemin.tistory.com/2520#google_vignette\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">[Elasticsearch] 분석기(analyzer)</a><br>\n<a href=\"https://esbook.kimjmin.net/06-text-analysis/6.5-tokenizer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">6.5 토크나이저 - Tokenizer - Elastic 가이드북</a><br>\n<a href=\"https://esbook.kimjmin.net/06-text-analysis/6.6-token-filter/6.6.4-ngram-edge-ngram-shingle\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">6.6.4 NGram, Edge NGram, Shingle - Elastic 가이드북</a><br>\n<a href=\"https://esbook.kimjmin.net/06-text-analysis/6.7-stemming/6.7.2-nori\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">6.7.2 노리 (nori) 한글 형태소 분석기 - Elastic 가이드북</a></p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .mtk7 { color: #B5CEA8; }\n  .default-dark .mtk12 { color: #9CDCFE; }\n  .default-dark .mtk8 { color: #CE9178; }\n  .default-dark .mtk6 { color: #D7BA7D; }\n  .default-dark .mtk4 { color: #569CD6; }\n  .default-dark .mtk3 { color: #6A9955; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%EB%B6%84%EC%84%9D%EA%B8%B0analyzer\">1. 분석기(analyzer)</a></p>\n</li>\n<li>\n<p><a href=\"#2-character-filter\">2. Character Filter</a></p>\n<ul>\n<li><a href=\"#21-html-%EC%8A%A4%ED%8A%B8%EB%A6%BD-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\">2.1 HTML 스트립 문자 필터</a></li>\n<li><a href=\"#22-%EB%A7%A4%ED%95%91-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\">2.2 매핑 문자 필터</a></li>\n<li><a href=\"#23-%ED%8C%A8%ED%84%B4-%EB%AC%B8%EC%9E%90-%ED%95%84%ED%84%B0\">2.3 패턴 문자 필터</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-tokenizer\">3. Tokenizer</a></p>\n</li>\n<li>\n<p><a href=\"#4-token-filter\">4. Token Filter</a></p>\n<ul>\n<li><a href=\"#41-ngram\">4.1 NGram</a></li>\n<li><a href=\"#42-edge-ngram\">4.2 Edge NGram</a></li>\n<li><a href=\"#43-shingle\">4.3 shingle</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-%ED%95%9C%EA%B5%AD%EC%96%B4-%EB%B6%84%EC%84%9D%EA%B8%B0-nori\">5. 한국어 분석기 (Nori)</a></p>\n</li>\n<li>\n<p><a href=\"#6-%EC%97%AD%EC%9D%B8%EB%8D%B1%EC%8B%B1\">6. 역인덱싱</a></p>\n</li>\n<li>\n<p><a href=\"#7-%EB%B6%84%EC%84%9D%EA%B8%B0-api\">7. 분석기 API</a></p>\n</li>\n<li>\n<p><a href=\"#8-%EC%84%A4%EC%A0%95\">8. 설정</a></p>\n</li>\n<li>\n<p><a href=\"#9-%EB%8F%99%EC%9D%98%EC%96%B4-%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%B2%98%EB%A6%AC\">9. 동의어, 불용어 처리</a></p>\n</li>\n<li>\n<p><a href=\"#reference\">Reference</a></p>\n</li>\n</ul>","frontmatter":{"title":"Elastic Search Analyzer 정리","summary":["Elastic Search Analyzer 정리한다."],"date":"2025.09.23.","update":"2025.09.23.","category":["ELK"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpElEQVR42o2TzUsbQRiH86/UkyfRg6GliBcPlQqF0BZ6ECRHqadei168tIdevElL6aVULCSNHoSQQEIpIWxykHhSS7Mk+5GkNlmXZLNm9ukmm09NJC+8CzPzzjO/374zPobCcZxOegMxtNBqf5gmfEO7aLOEXcWuy4guxLEUl90cVAmBXarR0r2cAPROd6wKVm4LMgsI5aO72ab5a47WxdsBsHJN4+U+/1Y/YP7IeJPCGQUK4dn7tPee9aePCHw7JqmW3AWTwtEDSjE/RtOiXVWr/OXd/Auy2196vu4q7AMPv/Nw8zXLkSyHiuFW3xB48pg5/yxLJwccaDKGqjGztsJi5DM/r/SuwFsKe8OrG5ud81PenCaIaX86c/FonOcbQZ7FwkRcYMO4Jhj+yqt0nN0zCW61yzeuy229zYaFUbv70+v1et9Ry70JzuQueyf15EuZDLlcrpPFYpHfl5eoioIkSRQLhWmuzWiYpkk0GiWdTpNMJgmFQuTzeRKJBKlUqu9oaqCu66iqSrlcRpZlaq59TdOoVqsYhjEWdi9wUoy8pjHA/zx7NTYyOtULAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/550453d38d1c75694a0ab3984eb8d9a1/ccf95/thumbnail.png","srcSet":"/static/550453d38d1c75694a0ab3984eb8d9a1/ba754/thumbnail.png 483w,\n/static/550453d38d1c75694a0ab3984eb8d9a1/b4d90/thumbnail.png 966w,\n/static/550453d38d1c75694a0ab3984eb8d9a1/ccf95/thumbnail.png 1932w","sizes":"(min-width: 1932px) 1932px, 100vw"},"sources":[{"srcSet":"/static/550453d38d1c75694a0ab3984eb8d9a1/da43d/thumbnail.webp 483w,\n/static/550453d38d1c75694a0ab3984eb8d9a1/026bc/thumbnail.webp 966w,\n/static/550453d38d1c75694a0ab3984eb8d9a1/99b19/thumbnail.webp 1932w","type":"image/webp","sizes":"(min-width: 1932px) 1932px, 100vw"}]},"width":1932,"height":1108}},"publicURL":"/static/550453d38d1c75694a0ab3984eb8d9a1/thumbnail.png"}}}}]}},"pageContext":{"slug":"/elkAnalyzer/","series":[],"lastmod":"2025.09.23.","prev":{"fields":{"slug":"/elkscore/"},"frontmatter":{"title":"Elasticsearch 검색 품질 올리기","date":"2025.09.22.","update":"2025.09.22.","category":["ELK"],"tags":["ELK"],"summary":["Elasticsearch의 기본 스코어링 알고리즘을 이해하고 function_score를 활용"]}},"next":{"fields":{"slug":"/Singleton/"},"frontmatter":{"title":"싱글톤 패턴 정리","date":"2025.10.16.","update":"2025.10.16.","category":["DesignPattern"],"tags":["DesignPattern"],"summary":["싱글톤 패턴을 정리해보자"]}}}},"staticQueryHashes":["427104293"],"slicesMap":{}}