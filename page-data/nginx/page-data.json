{"componentChunkName":"component---src-templates-post-tsx","path":"/nginx/","result":{"data":{"site":{"siteMetadata":{"title":"Just Keep Going","description":"Ian's Archive","siteUrl":"https://hohshho.github.io"}},"allMarkdownRemark":{"edges":[{"node":{"id":"60ec452c-20f0-5a63-9c9c-0c4e7547e568","html":"<h1 id=\"nginx\" style=\"position:relative;\"><a href=\"#nginx\" aria-label=\"nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Nginx</h1>\n<h2 id=\"cgicommon-gateway-interface-란\" style=\"position:relative;\"><a href=\"#cgicommon-gateway-interface-%EB%9E%80\" aria-label=\"cgicommon gateway interface 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CGI(Common Gateway Interface) 란?</h2>\n<blockquote>\n<p>웹서버와 외부 프로그램(C, PHP, Python 등) 사이에서 정보를 주고받는 방법과 규약</p>\n</blockquote>\n<p><strong>이 표준에 맞춰 만들어진 것이 CGI 스크립트이다.</strong></p>\n<p><img src=\"/abdcdb62b17eececa456b7423a7a9360/cgipic.png\" alt=\"\"></p>\n<h3 id=\"관련-용어\" style=\"position:relative;\"><a href=\"#%EA%B4%80%EB%A0%A8-%EC%9A%A9%EC%96%B4\" aria-label=\"관련 용어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>관련 용어</h3>\n<ul>\n<li>Web Server : 웹 클라이언트에게 콘텐츠를 제공하는 서버</li>\n<li>WAS : 서버 단에서 Application을 동작할 수 있도록 지원</li>\n</ul>\n<h3 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점</h3>\n<ul>\n<li>언어, 플랫폼에 독립적</li>\n<li>매우 단순하고 다른 서버 사이드 프로그래밍 언어에 비해 쉽게 수행</li>\n<li>라이브러리가 풍부하다</li>\n<li>가볍다</li>\n</ul>\n<h3 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>단점</h3>\n<ul>\n<li>느리다(요청이 올 때 마다 DB connection을 새로 열어야 한다)</li>\n</ul>\n<!-- TODO : 확인해보자 -->\n<ul>\n<li>HTTP 요청마다 <strong>새로운 프로세스를 만들어</strong> 서버 메모리를 사용한다 (Fork로 구현되어 있음)</li>\n<li>데이터가 메모리에 캐시될 수 없다.</li>\n</ul>\n<h3 id=\"추가\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80\" aria-label=\"추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가</h3>\n<p><a href=\"https://tools.ietf.org/html/rfc3875#section-1.4\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RPC 3875-1.4 항목</a></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">1. CGI 프로그램을 호출하는 WEB 서버 역할</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  1) 전송 단계에서의 인증 및 보안</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  2) CGI 프로그램의 선택</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  3) CGI Request 로 변환</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  4) CGI Response에서의 변환</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2. 호출 프로그램의 지정 방법 (URI)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">3. WEB 서버에서 CGI Request의 해석 방법 (경로 및 프로토콜)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">4. WEB 서버에서 CGI Response에 대한 반환 방법 (경로 및 프로토콜)</span></span></code></pre>\n<h2 id=\"fastcgi란\" style=\"position:relative;\"><a href=\"#fastcgi%EB%9E%80\" aria-label=\"fastcgi란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>FastCGI란?</h2>\n<blockquote>\n<p>하나의 큰 프로세스로 동작한다. 이 프로세스가 계속해서 새로운 요청(Request) 처리(CGI 단점 해결)</p>\n</blockquote>\n<p><img src=\"/07073fa1645db47fbd224fc6a09fe2d3/fastcgip.png\" alt=\"\"></p>\n<p>대부분의 웹서버 <strong>(Nginx, IIS, Apache)</strong> 가 FastCGI를 제공한다.</p>\n<h2 id=\"php-fpmfast-process-manager\" style=\"position:relative;\"><a href=\"#php-fpmfast-process-manager\" aria-label=\"php fpmfast process manager permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PHP-FPM(Fast Process Manager)</h2>\n<blockquote>\n<p>PHP를 FastCGI 모드로 동작하게 해준다.</p>\n</blockquote>\n<h2 id=\"1-역할\" style=\"position:relative;\"><a href=\"#1-%EC%97%AD%ED%95%A0\" aria-label=\"1 역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 역할</h2>\n<ol>\n<li>정적 파일을 처리하는 <strong>HTTP 서버</strong>로서의 역할</li>\n</ol>\n<p><img src=\"/8adb94e382071ee630fc427dfadd8e04/webserver.png\" alt=\"\"></p>\n<ol start=\"2\">\n<li>응용 프로그램 서버에 요청을 보내는 <strong>리버스 프록시</strong> 역할</li>\n</ol>\n<p><img src=\"/a44021d65e8c8560a553b7286dbfc734/reverseProxy.png\" alt=\"\"></p>\n<p>프록시는, <strong>클라이언트와 서버 통신 사이에서 통신을 대신!! 해주는 서버를 의미한다.</strong></p>\n<h3 id=\"리버스-프록시란\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%9E%80\" aria-label=\"리버스 프록시란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리버스 프록시란?</h3>\n<blockquote>\n<p>클라이언트가 서버에 요청하면, 프록시 서버가 배후 서버(응용프로그램 서버)로부터 데이터를 가져옴</p>\n</blockquote>\n<p>추가로 포워드 프록시는 클라이언트 앞단에서 <strong>클라이언트의 성능향상에 초점</strong></p>\n<p>빈번히 사용될 리소스들을 포워드 프록시에 캐싱하여 서버까지 요청할 필요 없이 프록시에서 받아오게 함</p>\n<p>리버스 프록시는 서버의 앞단에서 요청을 처리<br>\n<strong>좀 더 안전하게 Request, Response를 관리</strong></p>\n<h3 id=\"리버스-프록시를-쓰는-이유\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\" aria-label=\"리버스 프록시를 쓰는 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리버스 프록시를 쓰는 이유</h3>\n<blockquote>\n<ol>\n<li><strong>프록시 서버를 둠으로써 요청을 배분하는 역할</strong></li>\n<li>cli가 직접 App 서버에 요청하면 프로세스 1개가 응답대기 상태가 되어서 요청에 대한 버퍼링이 생긴다</li>\n<li>보안상 이점! -> WAS는 대부분 DB서버와 연결되어 있으므로 WS - WAS가 통신을 통해 클라이언트에게 제공하는 방식</li>\n</ol>\n</blockquote>\n<p>추가로 스위치(로드밸런서)로써 역할도 가능하다.</p>\n<blockquote>\n<p>프로세스 응답 대기를 막고, 요청을 배분하는 역할</p>\n</blockquote>\n<h3 id=\"event-driven-방식\" style=\"position:relative;\"><a href=\"#event-driven-%EB%B0%A9%EC%8B%9D\" aria-label=\"event driven 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Event-driven 방식</h3>\n<p>Thread 기반은 하나의 커넥션당 하나의 쓰레드를 사용</p>\n<p>Event-driven 방식은 Event Handler를 통해 비동기 방식으로 처리해 먼저 처리되는 것부터 로직이 진행된다.</p>\n<p><img src=\"/ddf80552509d0d55c94bd9d42a422342/threadp.png\" alt=\"\"></p>\n<p><img src=\"/a5a87ed1c2ebb17d8edc3a52861b07dc/eventp.png\" alt=\"\"></p>\n<h2 id=\"2-파일-구조\" style=\"position:relative;\"><a href=\"#2-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0\" aria-label=\"2 파일 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 파일 구조</h2>\n<p>5개 폴더 및 파일을 알아보고 넘어가겠다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">conf.d : nginx.conf에서 불러들일 수 있는 파일을 저장</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">fastcgi.conf : FastCGI 환경설정 파일</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">nginx.conf : 접속자 수, 동작 프로세스 수 등 퍼포먼스에 관한 설정들</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">sites-available : 비활성화된 사이트들의 설정 파일들이 위치한다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">sites-enabled : 활성화된 사이트들의 설정 파일들이 위치한다.</span></span></code></pre>\n<p>사실 기본 설정이 이렇다는 거고, 폴더명 같은 경우는 상황에 따라 변경이 가능하다.</p>\n<h2 id=\"3-변수\" style=\"position:relative;\"><a href=\"#3-%EB%B3%80%EC%88%98\" aria-label=\"3 변수 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 변수</h2>\n<h4 id=\"arg_parameter\" style=\"position:relative;\"><a href=\"#arg_parameter\" aria-label=\"arg_parameter permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$arg_{PARAMETER}</h4>\n<blockquote>\n<p>URI의 파라미터 변수의 이름 의미</p>\n</blockquote>\n<h4 id=\"host\" style=\"position:relative;\"><a href=\"#host\" aria-label=\"host permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$host</h4>\n<blockquote>\n<p>현재 요청의 호스트 명</p>\n</blockquote>\n<h4 id=\"uri\" style=\"position:relative;\"><a href=\"#uri\" aria-label=\"uri permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$uri</h4>\n<blockquote>\n<p>현재 요청의 URI (호스트명과 파라미터는 제외된다.)</p>\n</blockquote>\n<h4 id=\"args\" style=\"position:relative;\"><a href=\"#args\" aria-label=\"args permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$args</h4>\n<blockquote>\n<p>URL의 질의 문자열</p>\n</blockquote>\n<h4 id=\"binary_remote_addr\" style=\"position:relative;\"><a href=\"#binary_remote_addr\" aria-label=\"binary_remote_addr permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$binary_remote_addr</h4>\n<blockquote>\n<p>바이너리 형식의 클라이언트 주소</p>\n</blockquote>\n<h4 id=\"body_bytes_sent\" style=\"position:relative;\"><a href=\"#body_bytes_sent\" aria-label=\"body_bytes_sent permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$body_bytes_sent</h4>\n<blockquote>\n<p>전송된 바디의 바이트 수</p>\n</blockquote>\n<h4 id=\"content_length\" style=\"position:relative;\"><a href=\"#content_length\" aria-label=\"content_length permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$content_length</h4>\n<blockquote>\n<p>HTTP 요청헤더의 Content-length</p>\n</blockquote>\n<h4 id=\"content_type\" style=\"position:relative;\"><a href=\"#content_type\" aria-label=\"content_type permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$content_type</h4>\n<blockquote>\n<p>HTTP 요청헤더의 Content-type</p>\n</blockquote>\n<h4 id=\"document_root\" style=\"position:relative;\"><a href=\"#document_root\" aria-label=\"document_root permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$document_root</h4>\n<blockquote>\n<p>현재 요청의 document root 값</p>\n</blockquote>\n<h4 id=\"http_header\" style=\"position:relative;\"><a href=\"#http_header\" aria-label=\"http_header permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$http_HEADER</h4>\n<blockquote>\n<p>HTTP 헤더의 값을 소문자로 한 값(-는 _로 변환된다.)</p>\n</blockquote>\n<h4 id=\"server_name--server_port--server_protocol\" style=\"position:relative;\"><a href=\"#server_name--server_port--server_protocol\" aria-label=\"server_name  server_port  server_protocol permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>$server_name / $server_port / $server_protocol</h4>\n<blockquote>\n<p>각각 name, port, protocol을 의미한다.</p>\n</blockquote>\n<h4 id=\"cookie_쿠키이름\" style=\"position:relative;\"><a href=\"#cookie_%EC%BF%A0%ED%82%A4%EC%9D%B4%EB%A6%84\" aria-label=\"cookie_쿠키이름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>cookie_{쿠키이름}</h4>\n<blockquote>\n<p>해당 쿠키의 값을 얻을 수 있다.</p>\n</blockquote>\n<h2 id=\"4-설정\" style=\"position:relative;\"><a href=\"#4-%EC%84%A4%EC%A0%95\" aria-label=\"4 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 설정</h2>\n<p><strong>설정 수정 시 원본을 복사해 보관해 두는 습관 가지자!</strong></p>\n<h3 id=\"설정-파일\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\" aria-label=\"설정 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정 파일</h3>\n<p>설정파일은 크게 4가지로 나뉜다.</p>\n<ol>\n<li>nginx.conf : 메인 설정 파일</li>\n<li>fcgi.conf : FastCGI 환경 설정파일</li>\n<li>sites-enabled : 활성화된 사이트들의 설정 파일 위치</li>\n<li>sites-available : 비활성화된 사이트들의 설정 파일 위치</li>\n</ol>\n<p>두개의 파일을 보며 Nginx 설정에 대해 확인해보자</p>\n<blockquote>\n<p>/etc/nginx/nginx.conf<br>\n/etc/nginx/sites-available/default</p>\n</blockquote>\n<h4 id=\"etcnginxnginxconf\" style=\"position:relative;\"><a href=\"#etcnginxnginxconf\" aria-label=\"etcnginxnginxconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/etc/nginx/nginx.conf</h4>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">user www-data;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">worker_processes auto;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">pid /run/nginx.pid;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">events {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        worker_connections 768;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        # multi_accept on; #기본값:off</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">http {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        sendfile on;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        tcp_nopush on;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        tcp_nodelay on;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        keepalive_timeout 10; #기본값:75</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        types_hash_max_size 2048;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        server_tokens off;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        server_names_hash_bucket_size 64; #기본값:32</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        server_names_hash_max_size 2048; #기본값:512</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        # server_name_in_redirect off;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        include /etc/nginx/mime.types;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        default_type application/octet-stream;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        access_log off; log_not_found off;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        error_log /var/log/nginx/error.log warn;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        include /etc/nginx/conf.d/*.conf;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        include /etc/nginx/sites-enabled/*;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p>nginx.conf 파일은 접속자 수, 동작 프로세스 수 등 퍼포먼스에 대한 기본적인 설정 항목을 포함한다.</p>\n<p>크게 3가지 항목으로 나뉜다.</p>\n<h4 id=\"1-최상단-core-모듈\" style=\"position:relative;\"><a href=\"#1-%EC%B5%9C%EC%83%81%EB%8B%A8-core-%EB%AA%A8%EB%93%88\" aria-label=\"1 최상단 core 모듈 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 최상단 (Core 모듈)</h4>\n<p>user : Nginx 프로세스(워커 프로세스)가 실행되는 권한</p>\n<ul>\n<li>nginx는 master process, worker process로 동작한다.</li>\n<li>실질적으로 <strong>worker process가 실직적인 웹서버 역할</strong> 수행</li>\n<li>root로 설정되어 있을 경우, 워커 프로세스를 root 권한으로 동작<br>\n-> 악의적인 사용자가 제어하게 된다면 보안상 위험<br>\n-> 보통 <strong>www-data, www, nginx</strong>와 같이 계정이 하는 일에 대한 대표성 있는 이름 사용\n<ul>\n<li>(default 값 - ubuntu : www-data, 기타 nobody )<br>\n-> 이 계정들은 일반 유저의 권한으로 쉘에 접속 할 수 없어야 안전하다.</li>\n<li>ubuntu 에서 계정 생성방법</li>\n</ul>\n</li>\n</ul>\n<div\n              class=\"gatsby-code-button-container copyButtonContainer\"\n              data-toaster-id=\"66861996674397650000\"\n              data-toaster-class=\"gatsby-code-button-toaster copyButtonToaster\"\n              data-toaster-text-class=\"gatsby-code-button-toaster-text copyButtonToasterText\"\n              data-toaster-text=\"customToasterText\"\n              data-toaster-duration=\"3500\"\n              onClick=\"copyToClipboard(`\\$ useradd --shell /usr/sbin/nologin www-data`, `66861996674397650000`)\"\n            >\n              <div\n                class=\"gatsby-code-button copyButtonClass\"\n                data-tooltip=\"\"\n              >\n                copyButtonText<svg class=\"gatsby-code-button-icon\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\"><path fill=\"none\" d=\"M0 0h24v24H0V0z\"/><path d=\"M16 1H2v16h2V3h12V1zm-1 4l6 6v12H6V5h9zm-1 7h5.5L14 6.5V12z\"/></svg>\n              </div>\n            </div>\n<pre class=\"grvsc-container default-dark\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">$ useradd --shell /usr/sbin/nologin www-data</span></span></span></code></pre>\n<p>worker_processes : Nginx 프로세스 실행 가능 수</p>\n<ul>\n<li>auto일 경우도 있지만, 명시적으로 서버의 코어 수 만큼 할당하는 것이 보통 (더 높게도 가능)</li>\n</ul>\n<p>pid : Nginx 마스터 프로세스 정보</p>\n<h4 id=\"2-events\" style=\"position:relative;\"><a href=\"#2-events\" aria-label=\"2 events permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. events</h4>\n<p>주로 네트워크의 동작 방법과 관련된 설정값을 가진다.</p>\n<p>worker_connections : 몇개의 접속을 동시에 처리할 것인가</p>\n<ul>\n<li>worker_processes * worker_connections = <strong>처리 할 수 있는 커넥션의 양</strong></li>\n<li>Tip!!\n<ul>\n<li>여러 자료와 퍼포먼스 테스트를 하며 값을 조정해야 한다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"3-http\" style=\"position:relative;\"><a href=\"#3-http\" aria-label=\"3 http permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. http</h4>\n<blockquote>\n<p>server, location의 루트 블록이라 할 수 있고, 여기서 설정된 값들은 하위 블록들이 상속한다.<br>\nhttp 블록은 여러개를 사용할 수 있지만 관리상의 이유로 한번 사용하는 것이 좋다.</p>\n</blockquote>\n<ul>\n<li>keepalive_timeout : 클라이언트에서 커넥션을 유지하는 시간을 의미</li>\n<li>servers token : Nginx 버전 숨길 수 있는 기능 (주석을 제거해 보안 이슈를 방지하는 것이 좋다.)</li>\n<li>server_names_hash_max_size, server_names_hash_bucket_size : 호스트의 도메인 이름에 대한 공간(너무 낮으면 에러 발생 가능)</li>\n<li><strong>log관련 설정</strong>은 각 <strong>호스트 마다 배분</strong>하는 것이 관리하기 편하므로 http block에선 off로 처리한다.</li>\n</ul>\n<h4 id=\"etc\" style=\"position:relative;\"><a href=\"#etc\" aria-label=\"etc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>etc</h4>\n<ul>\n<li><strong>include 옵션</strong> : 별도의 파일에 설정을 기록해서 설정의 그룹핑, 재활용성을 높이는 방법</li>\n<li>ex) 리버스 프록시를 각 도메인에 설정한다고 했을 때 헤더 처리 옵션등을 conf.d에 넣어두고 불러온다. (nginx.conf 설정 파일이 깔끔해짐)\n<ul>\n<li>리버스 프록시란? :</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"4-server--location\" style=\"position:relative;\"><a href=\"#4-server--location\" aria-label=\"4 server  location permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. server / location</h4>\n<p>/etc/nginx/sites-available/default에 server, location 블록이 작성되어 있다.</p>\n<p>server 블록 : 하나의 웹사이트를 선언하는데 사용 (가상 호스팅 개념)\nlocation 블록 : server 블록 안에 등장하며 특정 URL을 처리한다.</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">server {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    listen       80;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server_name  localhost;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    root   /usr/share/nginx/html;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    location / {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        index  index.html index.htm index.php;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    location = /50x.html {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        root   /usr/share/nginx/html;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    location ~ \\.php$ {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        fastcgi_pass   unix:/var/run/php5-fpm.sock;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        fastcgi_index  index.php;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        include        fastcgi_params;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p>location 블록을 상세히 살펴보면</p>\n<ol>\n<li>fastcgi_pass :</li>\n<li>fastcgi_param :</li>\n</ol>\n<p><strong>설정 파일을 변경하면 nginx에 반영해야 하는데, reload 명령을 이용한다</strong></p>\n<h2 id=\"추가-1\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EA%B0%80-1\" aria-label=\"추가 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추가!!</h2>\n<ul>\n<li>보통 가상 호스트 설정 파일의 경우 sites-available 디렉토리 아래 위치</li>\n<li>sites-enabled 디렉토리에 심볼릭 링크를 걸어주면서 nginx에서 사용하게 설정</li>\n<li>에러 같은 경우 중요한 오류 이외에는 로그로 남기지 않게 설정해서 로그로 인해 디스크 엑세스를 하지 않게 설정한다!</li>\n</ul>\n<p><strong>conf파일 구성은 상황마다 다르다.</strong></p>\n<h3 id=\"로그-파일-위치\" style=\"position:relative;\"><a href=\"#%EB%A1%9C%EA%B7%B8-%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\" aria-label=\"로그 파일 위치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>로그 파일 위치</h3>\n<blockquote>\n<p>/var/log/nginx</p>\n</blockquote>\n<h2 id=\"upstream-module\" style=\"position:relative;\"><a href=\"#upstream-module\" aria-label=\"upstream module permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Upstream Module</h2>\n<blockquote>\n<p>NGINX를 일종의 LoadBalancer(부하분산, 속도개선)로 이용할 수 있게 해주는 모듈</p>\n</blockquote>\n<ul>\n<li>conf파일의 upstream블록을 통해 사용한다.</li>\n<li>was를 의미하고, nginx는 downstream에 해당한다고 할 수 있다.</li>\n</ul>\n<p><strong>형식</strong></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">upstream 이름 {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    [ip_hash;]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server host 주소:포트 [옵션];</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    .....</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p><strong>예제</strong></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">upstream backend {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ip_hash;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server 192.168.125.142:9000 weight=3;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server 192.168.125.143:9000;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server 192.168.125.144:9000 max_fails=5 fail_timeout=30s;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server unix:/var/run/php5-fpm.sock backup;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p><strong>옵션</strong></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">ip_hash : 같은 방문자로부터 도착한 요청은 항상 같은 업스트림 서버가 처리하게 설정</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">weight=n : 업스트림 서버의 비중(2 -&gt; 2배 더 자주 사용)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">max_fails=n : n으로 지정한 횟수만큼 실패가 일어나면 서버가 죽은 것으로 간주한다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">fail_timeout=n : max_fails가 지정된 상태에서 이 값이 설정만큼 서버가 응답하지 않으면 죽은 것으로 간주한다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">down : 해당 서버를 사용하지 않게 지정한다. ip_hash; 지시어가 설정된 상태에서만 유효하다.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">backup : 모든 서버가 동작하지 않을 때 backup으로 표시된 서버가 사용되고 그 전까지는 사용되지 않는다.</span></span></code></pre>\n<p>다음 사진과 같이 사용한다.\n<img src=\"/90ed54ffa789de99de5f0405f68a29cd/upstream.png\" alt=\"\"></p>\n<h2 id=\"재작성rewrite\" style=\"position:relative;\"><a href=\"#%EC%9E%AC%EC%9E%91%EC%84%B1rewrite\" aria-label=\"재작성rewrite permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>재작성(rewrite)</h2>\n<blockquote>\n<p>rewrite 모듈을 통해 URL 재작성</p>\n</blockquote>\n<p>예제</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">location ~ /tutorials/javascript.html {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    rewrite ^ http://opentutorials.org/course/48;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p>리다이렉션을 디버깅 하기 위해선 <strong>error_log 지시자를 server나 location블록 아래에 위치!!</strong></p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">server {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    server_name opentutorials.org</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    error_log /var/log/opentutorials.org.error debug;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    location ~ /.php$ {</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        error_log /var/log/opentutorials.org.php.error debug;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    }</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<p>위와 같이 사용하면 error log는 debug수준에서 출력 -> 에러 출력 debug레벨 사용</p>\n<p>www를 제거하는 예제</p>\n<pre class=\"grvsc-container default-dark\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">if ($host ~* ^www\\.(.*)){</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    set $host_without_www $1;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    rewrite ^/(.*)$ $scheme://$host_without_www/$1 permanent;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">}</span></span></code></pre>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .default-dark {\n    background-color: #1E1E1E;\n    color: #D4D4D4;\n  }\n  .default-dark .mtk1 { color: #D4D4D4; }\n  .default-dark .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#nginx\">Nginx</a></p>\n<ul>\n<li>\n<p><a href=\"#cgicommon-gateway-interface-%EB%9E%80\">CGI(Common Gateway Interface) 란?</a></p>\n<ul>\n<li><a href=\"#%EA%B4%80%EB%A0%A8-%EC%9A%A9%EC%96%B4\">관련 용어</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90\">단점</a></li>\n<li><a href=\"#%EC%B6%94%EA%B0%80\">추가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#fastcgi%EB%9E%80\">FastCGI란?</a></p>\n</li>\n<li>\n<p><a href=\"#php-fpmfast-process-manager\">PHP-FPM(Fast Process Manager)</a></p>\n</li>\n<li>\n<p><a href=\"#1-%EC%97%AD%ED%95%A0\">1. 역할</a></p>\n<ul>\n<li><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%9E%80\">리버스 프록시란?</a></li>\n<li><a href=\"#%EB%A6%AC%EB%B2%84%EC%8A%A4-%ED%94%84%EB%A1%9D%EC%8B%9C%EB%A5%BC-%EC%93%B0%EB%8A%94-%EC%9D%B4%EC%9C%A0\">리버스 프록시를 쓰는 이유</a></li>\n<li><a href=\"#event-driven-%EB%B0%A9%EC%8B%9D\">Event-driven 방식</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0\">2. 파일 구조</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EB%B3%80%EC%88%98\">3. 변수</a></p>\n</li>\n<li>\n<p><a href=\"#4-%EC%84%A4%EC%A0%95\">4. 설정</a></p>\n<ul>\n<li><a href=\"#%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC\">설정 파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B6%94%EA%B0%80-1\">추가!!</a></p>\n<ul>\n<li><a href=\"#%EB%A1%9C%EA%B7%B8-%ED%8C%8C%EC%9D%BC-%EC%9C%84%EC%B9%98\">로그 파일 위치</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#upstream-module\">Upstream Module</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9E%AC%EC%9E%91%EC%84%B1rewrite\">재작성(rewrite)</a></p>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Nginx 학습","summary":["Nginx에 대해 자세히 알아보자"],"date":"2021.02.24.","category":["Nginx"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAABYlAAAWJQFJUiTwAAADnklEQVR42oWUbUxTVxjHuw8zE5zOOR3RT/plM/OrIW7ZZlSwyMsEsoCNm/rJL+pCCMZFZQgoRYO81AbKwPJmLy01IG6aaFxQjJEsvhWBtKJSatpCi6wvUNt7b//mPOmtXnBwkpt78pzn+Z3z/M/zHAU+MISoSB8bb4QwGmy9uDh6DRGRj6+LsfW5QzHXwByjiNL8H/dDbLtZgE8MKVhqSIXyVhHuTgzSGvOJRqMLAyWQ1TeO/ffUWMqlEmitORdJ5myaJ3YqcXCgCi8CTlnMPKCUQo+jH2vMu7Hk0g58c3UfNvTk4zNjOlZ3/YT13fn4+speWlt3ORc3nP/KYmVASbPfHzbi40vb8UVXFu57hmDzO7ChZw8U7T+izNKG/gkLbcCgFYMdFMNHhf8HllpaKDUGtEw/J9st1wMCnh82kRzLOpVI5HaiesQUi10AWPJET5ewypSJUf8r1Ix0EVhr7UaZpRUjPjs+7UxDApeKqmHj4sBTlhYCrjRlYDw4gaMP6rGx91e4QlNwh6ZIhhXGdCRwO+nEiwJPPm4mZ3ZCdpPlg+1Q6JPx850/aP2+Z5g0XMYpcXaIWxzIUlS0/4Dlxl1Q9Zdi87WD+NyUQZpl951Afv8pJHJKfNSxFU2jf8tiZUCpmkJCGDpbL77q3QtF63dYYdyFJHMO1l7ORQKXQrZNfx2AfvQ6wkJkXi3O6xSp+t2h1zj2qBFfmneTBKzIWe2xS5uK+MCHIggGgou3HtuNaSKBn7x+jpzbJynVkf/s8U15UfhgP7/rFFGMO7NPEEVEeF5miz8coogo6/mYXYqd38uxoPcBohQYewzefxDmwuJAZhx7+ZL+TqcTs7OzsI+Noctkgtvths/ng8PhoI8N5mO1WjE9PY1wOIxnNpscyHZKVypxu68P+uZmNDc14bfDh6Grr8exoiI06nQ4p1ZDmZKCcbsd5yorodVoUHH6NBobGmguHYyAPM/jF5UKRw4dgqa2FiXFxbig0cDr9aBVr4dWU4fqqirkZGWhvLSU1l0uF4qPH0dGWppMAgL6/X5yamtpwbfJyTirVqO2uhpDT59ClZ+HyooKlJWUoK6mBuozZ/D9li2YnJxEYUEBsjMzEQqF5MCZmRnajWmnysvDle5uFBUW0mkYyNDRQekxCVjKLJsGrRZ/6nTgDAZcqKsjYDAYfKeh3+ejeg8EAhB4ni5iYGCANmPCsyxYAAUGAvB4PGQXBAFer5f+TMO3OS2DiAfjYo0AAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/ba2e584ce18a42691469246b5ffe98b3/9b85b/thumbnail.png","srcSet":"/static/ba2e584ce18a42691469246b5ffe98b3/e4033/thumbnail.png 169w,\n/static/ba2e584ce18a42691469246b5ffe98b3/ec422/thumbnail.png 337w,\n/static/ba2e584ce18a42691469246b5ffe98b3/9b85b/thumbnail.png 674w","sizes":"(min-width: 674px) 674px, 100vw"},"sources":[{"srcSet":"/static/ba2e584ce18a42691469246b5ffe98b3/04c6b/thumbnail.webp 169w,\n/static/ba2e584ce18a42691469246b5ffe98b3/c856c/thumbnail.webp 337w,\n/static/ba2e584ce18a42691469246b5ffe98b3/23f5d/thumbnail.webp 674w","type":"image/webp","sizes":"(min-width: 674px) 674px, 100vw"}]},"width":674,"height":722}},"publicURL":"/static/ba2e584ce18a42691469246b5ffe98b3/thumbnail.png"}}}}]}},"pageContext":{"slug":"/nginx/","series":[],"lastmod":"2021.03.01."}},"staticQueryHashes":["2383754777"],"slicesMap":{}}